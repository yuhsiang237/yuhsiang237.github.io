<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>UM&#39;s Coding Note</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="I record my coding experience at this place">
<meta property="og:type" content="website">
<meta property="og:title" content="UM&#39;s Coding Note">
<meta property="og:url" content="https://yuhsiang237.github.io/page/8/index.html">
<meta property="og:site_name" content="UM&#39;s Coding Note">
<meta property="og:description" content="I record my coding experience at this place">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Yu Hsiang">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="UM's Coding Note" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">UM&#39;s Coding Note</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">I record my coding experience at this placeğŸ¤™</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://yuhsiang237.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-C-MVC-API-Bearer-Tokenå¯¦ä½œ" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/10/28/C-MVC-API-Bearer-Token%E5%AF%A6%E4%BD%9C/" class="article-date">
  <time class="dt-published" datetime="2021-10-28T13:57:47.000Z" itemprop="datePublished">2021-10-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Code/">Code</a>â–º<a class="article-category-link" href="/categories/Code/C/">C#</a>â–º<a class="article-category-link" href="/categories/Framework/">Framework</a>â–º<a class="article-category-link" href="/categories/Framework/AspNetCore-API/">AspNetCore API</a>â–º<a class="article-category-link" href="/categories/Topic/">Topic</a>â–º<a class="article-category-link" href="/categories/Topic/2021-C-AspNetCore-Challenge/">2021 C# AspNetCore Challenge</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/10/28/C-MVC-API-Bearer-Token%E5%AF%A6%E4%BD%9C/">[Day25] C# MVC API JWT Tokené©—è­‰ (ä¸‹) JWTå¯¦ä½œ - C#&amp;AspNetCore</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>åœ¨é€™ç¯‡ä¸­ä¸»è¦å¯¦ä½œJWTçš„ç™»å…¥èªè­‰ï¼Œå–å¾—Tokenã€é€éTokenå°æœ‰æ¬Šé™çš„APIé€²è¡Œå­˜å–ã€‚</p>
<h3 id="å®‰è£"><a href="#å®‰è£" class="headerlink" title="å®‰è£"></a>å®‰è£</h3><p>1.å…ˆå®‰è£JWTå¥—ä»¶ï¼Œå› ç‚ºæˆ‘æ˜¯ç”¨AspNetCoreæ‰€ä»¥ç”¨<br>Microsoft.AspNetCore.Authentication.JwtBearer</p>
<img src="/2021/10/28/C-MVC-API-Bearer-Token%E5%AF%A6%E4%BD%9C/1.png" class="">

<h3 id="æ’°å¯«"><a href="#æ’°å¯«" class="headerlink" title="æ’°å¯«"></a>æ’°å¯«</h3><p>1.æ’°å¯«ç”¢ç”ŸJWT Tokençš„ç¨‹å¼ç¢¼ã€‚<br><strong>TokenController.cs</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[HttpPost(&quot;GenerateToken&quot;)]</span><br><span class="line">[AllowAnonymous]</span><br><span class="line">public ActionResult&lt;string&gt; GenerateToken()</span><br><span class="line">&#123;</span><br><span class="line">    string issuer = &quot;JwtAuthDemo&quot;;</span><br><span class="line">    string signKey = &quot;ASASA1@AAASASASASA1@AAASAS&quot;; // éœ€è¦å¤§æ–¼16å­—å…ƒ</span><br><span class="line">    string Account = &quot;TestAccount&quot;;</span><br><span class="line">  </span><br><span class="line">    var securityKey = new SymmetricSecurityKey(Encoding.UTF8.GetBytes(signKey));</span><br><span class="line">    var signingCredentials = new SigningCredentials(securityKey, SecurityAlgorithms.HmacSha256Signature);</span><br><span class="line"></span><br><span class="line">    // å»ºç«‹ SecurityTokenDescriptor</span><br><span class="line">    var tokenDescriptor = new SecurityTokenDescriptor</span><br><span class="line">    &#123;</span><br><span class="line">        Issuer = issuer,</span><br><span class="line">        Subject = new ClaimsIdentity(new[]</span><br><span class="line">                &#123;</span><br><span class="line">                  new Claim(JwtRegisteredClaimNames.Sub, Account), // User.Identity.Name</span><br><span class="line">                  new Claim(JwtRegisteredClaimNames.Jti, Guid.NewGuid().ToString()), // JWT ID</span><br><span class="line">                  new Claim(&quot;test&quot;, &quot;123&quot;) // å¯åŠ å…¥è‡ªè¨‚å…§å®¹åœ¨è²æ˜è£¡</span><br><span class="line">                &#125;),</span><br><span class="line">        Expires = DateTime.Now.AddMinutes(60),</span><br><span class="line">        SigningCredentials = signingCredentials</span><br><span class="line">    &#125;;</span><br><span class="line">    var tokenHandler = new JwtSecurityTokenHandler();</span><br><span class="line">    var securityToken = tokenHandler.CreateToken(tokenDescriptor);</span><br><span class="line">    var serializeToken = tokenHandler.WriteToken(securityToken);</span><br><span class="line">    return serializeToken;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.æ’°å¯«æ¸¬è©¦JWTè«‹æ±‚çš„ç¨‹å¼ç¢¼<br>åœ¨æ­¤æ’°å¯«å…©å€‹ä¸€å€‹æ˜¯å–å¾—æ‰€æœ‰è²æ˜ï¼Œä¸€å€‹æ˜¯å–å¾—è©²Tokenå¾—ç¨ç«‹è­˜åˆ¥å€¼ã€‚<br><strong>TokenController.cs</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[Authorize]</span><br><span class="line">[HttpGet(&quot;GetClaims&quot;)]</span><br><span class="line">public IActionResult GetClaims()</span><br><span class="line">&#123;</span><br><span class="line">    return Ok(User.Claims.Select(p =&gt; new &#123; p.Type, p.Value &#125;));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[Authorize]</span><br><span class="line">[HttpGet(&quot;GetTokenID&quot;)]</span><br><span class="line">public IActionResult GetTokenID()</span><br><span class="line">&#123;</span><br><span class="line">    var jti = User.Claims.FirstOrDefault(p =&gt; p.Type == &quot;jti&quot;);//æ¯å€‹tokençš„è­˜åˆ¥å€¼ï¼Œå¦‚æœè¦ç¦ç”¨æŸtokenå°±å¯ä»¥æŠŠè­˜åˆ¥å€¼å­˜åˆ°è³‡æ–™åº«ç•¶é»‘åå–®</span><br><span class="line">    return Ok(jti.Value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3.å¢åŠ æœå‹™<br>Startup.cs</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">public void ConfigureServices(IServiceCollection services)&#123;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">  services</span><br><span class="line">  .AddAuthentication(JwtBearerDefaults.AuthenticationScheme)</span><br><span class="line">  .AddJwtBearer(options =&gt;</span><br><span class="line">  &#123;</span><br><span class="line">  // ç•¶é©—è­‰å¤±æ•—æ™‚ï¼Œå›æ‡‰æ¨™é ­æœƒåŒ…å« WWW-Authenticate æ¨™é ­ï¼Œé€™è£¡æœƒé¡¯ç¤ºå¤±æ•—çš„è©³ç´°éŒ¯èª¤åŸå› </span><br><span class="line">  options.IncludeErrorDetails = true; // é è¨­å€¼ç‚º trueï¼Œæœ‰æ™‚æœƒç‰¹åˆ¥é—œé–‰</span><br><span class="line"></span><br><span class="line">  options.TokenValidationParameters = new TokenValidationParameters</span><br><span class="line">  &#123;</span><br><span class="line"></span><br><span class="line">    // ä¸€èˆ¬æˆ‘å€‘éƒ½æœƒé©—è­‰ Issuer</span><br><span class="line">    ValidateIssuer = true,</span><br><span class="line">    ValidIssuer = &quot;JwtAuthDemo&quot;,</span><br><span class="line"></span><br><span class="line">    // é€šå¸¸ä¸å¤ªéœ€è¦é©—è­‰ Audience</span><br><span class="line">    ValidateAudience = false,</span><br><span class="line">    //ValidAudience = &quot;JwtAuthDemo&quot;, // ä¸é©—è­‰å°±ä¸éœ€è¦å¡«å¯«</span><br><span class="line"></span><br><span class="line">    // ä¸€èˆ¬æˆ‘å€‘éƒ½æœƒé©—è­‰ Token çš„æœ‰æ•ˆæœŸé–“</span><br><span class="line">    ValidateLifetime = true,</span><br><span class="line"></span><br><span class="line">    // å¦‚æœ Token ä¸­åŒ…å« key æ‰éœ€è¦é©—è­‰ï¼Œä¸€èˆ¬éƒ½åªæœ‰ç°½ç« è€Œå·²</span><br><span class="line">    ValidateIssuerSigningKey = false,</span><br><span class="line"></span><br><span class="line">    // JWTç°½è­‰å¯†è¦ï¼Œä¹‹å¾Œå¯è‡ªè¡Œè¨­å®šåœ¨appsettings.json</span><br><span class="line">    IssuerSigningKey = new SymmetricSecurityKey(Encoding.UTF8.GetBytes(&quot;ASASA1@AAASASASASA1@AAASAS&quot;))</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.æ·»åŠ æˆæ¬Š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public void Configure(IApplicationBuilder app, IWebHostEnvironment env, IApiVersionDescriptionProvider provider)</span><br><span class="line">&#123;</span><br><span class="line">        app.UseAuthentication(); </span><br><span class="line">        app.UseAuthorization();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5.å®Œæˆæ¸¬è©¦çµæœ:<br>å–å¾—Token</p>
<img src="/2021/10/28/C-MVC-API-Bearer-Token%E5%AF%A6%E4%BD%9C/2.png" class="">
<p>ç”¨å‰›å‰›ç”¢ç”Ÿçš„JWT Tokenå–å¾—è²æ˜</p>
<img src="/2021/10/28/C-MVC-API-Bearer-Token%E5%AF%A6%E4%BD%9C/3.png" class="">
<p>ç”¨å‰›å‰›ç”¢ç”Ÿçš„JWT Tokenå–å¾—Tokenè­˜åˆ¥å€¼</p>
<img src="/2021/10/28/C-MVC-API-Bearer-Token%E5%AF%A6%E4%BD%9C/4.png" class="">


<h3 id="ç¸½çµ"><a href="#ç¸½çµ" class="headerlink" title="ç¸½çµ"></a>ç¸½çµ</h3><p>C#åœ¨è™•ç†JWTä¸Šç®—æ˜¯è »ç°¡æ½”çš„ï¼Œä¸ç”¨å¯«å¤ªå¤šè¡Œï¼Œä¸»è¦è¤‡é›œé»å°±åœ¨Startup.cså¢åŠ æœå‹™ã€ç”¢ç”ŸTokené€™å…©å€‹æ­¥é©Ÿã€‚<br>å°ˆæ¡ˆå­˜åº«ä½ç½®:<a target="_blank" rel="noopener" href="https://github.com/yuhsiang237/ASP.NET-Core-RESTfulAPI-JWT">https://github.com/yuhsiang237/ASP.NET-Core-RESTfulAPI-JWT</a></p>
<p>ç„¶å¾Œé™„ä¸ŠDEMOå½±ç‰‡ä¸€å€‹æ˜¯ç”¨Postmanæ¸¬è©¦ï¼Œä¸€å€‹æ˜¯ç¨‹å¼ç¢¼è·‘èµ·çš„æ™‚çš„Swagger<br>swagger demo:</p>
<img src="/2021/10/28/C-MVC-API-Bearer-Token%E5%AF%A6%E4%BD%9C/demo.gif" class="">
<p>postman demo:</p>
<img src="/2021/10/28/C-MVC-API-Bearer-Token%E5%AF%A6%E4%BD%9C/postmandemo.gif" class="">



      
    </div>
    <footer class="article-footer">
      <a data-url="https://yuhsiang237.github.io/2021/10/28/C-MVC-API-Bearer-Token%E5%AF%A6%E4%BD%9C/" data-id="cme6kwo08000qgalj1p42cx2z" data-title="[Day25] C# MVC API JWT Tokené©—è­‰ (ä¸‹) JWTå¯¦ä½œ - C#&amp;AspNetCore" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Arduino-LEDäº®ç‡ˆ" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/10/28/Arduino-LED%E4%BA%AE%E7%87%88/" class="article-date">
  <time class="dt-published" datetime="2021-10-28T09:04:44.000Z" itemprop="datePublished">2021-10-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Computer-Science/">Computer Science</a>â–º<a class="article-category-link" href="/categories/Computer-Science/Electronic-Circuit/">Electronic Circuit</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/10/28/Arduino-LED%E4%BA%AE%E7%87%88/">Arduinoé™æµLEDå¯¦é©—</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>æƒ³ä»¥åƒ…æœ‰çš„ææ–™åšå€‹LEDé™æµçš„å¯¦é©—ï¼Œä¸¦ä½¿ç”¨é›»è·¯å…¬å¼ç®—å‡ºç†è«–æ•¸å€¼å¯¦ä½œã€‚</p>
<h3 id="ææ–™"><a href="#ææ–™" class="headerlink" title="ææ–™"></a>ææ–™</h3><ol>
<li>LED 3MM ç´…è‰² x 1 :ç™¼å…‰äºŒæ¥µé«”</li>
<li>Arduinoç‰ˆ  x 1:ä»»æ„ä¸€å¡Šéƒ½å¯</li>
<li>220æ­å§†é›»é˜»  x 3:ç´…ç´…æ£•é‡‘</li>
</ol>
<h3 id="ç†è«–éƒ¨åˆ†"><a href="#ç†è«–éƒ¨åˆ†" class="headerlink" title="ç†è«–éƒ¨åˆ†"></a>ç†è«–éƒ¨åˆ†</h3><p>é¦–å…ˆæˆ‘å€‘Arduinoé›»æºæ¥3.3Vï¼Œè€ŒLEDç´…çš„é›»æµéœ€è¦0.02A(20mA)é›»å£“å‰‡æ˜¯2.0-2.2Vï¼Œå§‘ä¸”ç®—2.0é›»å£“ã€‚</p>
<p>é€™æ™‚3.3Væ€æ¨£é™åˆ°2.0V?å°±æ˜¯ä½¿ç”¨é›»é˜»<br>é‚£è¦å¤šå°‘æ­å§†çš„é›»é˜»å€¼å‘¢?<br>é€éæ­å§†å®šå¾‹<br>åœ¨é›»è·¯å­¸è£ï¼Œæ­å§†å®šå¾‹ï¼ˆè‹±èªï¼šOhmâ€™s lawï¼‰è¡¨æ˜ï¼Œå°é›»é«”å…©ç«¯çš„é›»å£“èˆ‡é€šéå°é›»é«”çš„é›»æµæˆæ­£æ¯”ï¼Œä»¥æ–¹ç¨‹å¼è¡¨ç¤ºã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">V=IR</span><br></pre></td></tr></table></figure>
<p>(3.3-2.0) = 0.02 * R<br>1.3 = 0.02R<br>R = 1.3/0.02<br>R = 65<br>æ‰€ä»¥æˆ‘å€‘éœ€è¦65Î©(Ohm)çš„é›»é˜»<br>ä½†å¤©æ®ºçš„= =è‚¯å®šä¸æœƒé€™éº¼å‰›å¥½æœ‰65æ­å§†çš„é›»é˜»ï¼Œé€™æ™‚å°±è¦ç”¨ç¾æœ‰çš„é›»é˜»å…œå‡ºä¾†ã€‚<br>ä¸¦è¯é›»é˜»å¯ä»¥é™ä½æ­å§†ã€‚<br>ä¾ç…§å…‹å¸Œè·å¤«é›»è·¯å®šå¾‹æ¨å€’å¾Œå¾—åˆ°ä»¥ä¸‹å…¬å¼:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Rt = 1/(1/R1+1/R2+1/R3+...+1/Rn)</span><br></pre></td></tr></table></figure>
<p>ä»¥ç¾æœ‰çš„220æ­å§†é›»é˜»è¦é™åˆ°65å°±è¦ç¨å¾®è¨ˆç®—ä¸€ä¸‹</p>
<p>3é¡†:<br>1/(1/220+1/220+1/220) = 73<br>4é¡†:<br>1/(1/220+1/220+1/220+1/220) = 55</p>
<p>ç™¼ç¾3é¡†é›»é˜»ç´„å¯ä»¥åˆ°73å¾ˆæ¥è¿‘65äº†ï¼Œç¬¬4é¡†å‰‡æ˜¯æœƒä½é65ã€‚<br>æˆ‘å€‘ä½¿ç”¨é›»é˜»æ˜¯ç‚ºäº†é™ä½é›»å£“ã€é™æµï¼Œè®“ICèƒ½å¤ æ­£å¸¸å•Ÿç”¨ä¸‹é¿å…éç†±ç‡’æ¯€ã€ç©©å®šé‹ä½œï¼Œæ‰€ä»¥å·®ä¸å¤šå°±ä½¿ç”¨3é¡†é›»é˜»ä¸¦è¯ã€‚</p>
<p>é›»è·¯åœ–</p>
<img src="/2021/10/28/Arduino-LED%E4%BA%AE%E7%87%88/%E9%9B%BB%E8%B7%AF%E5%9C%96_fx.png" class="">

<p>æ¥ç·šåœ–</p>
<img src="/2021/10/28/Arduino-LED%E4%BA%AE%E7%87%88/%E5%AF%A6%E9%9A%9B%E6%8E%A5%E7%B7%9A%E5%9C%96_fx.png" class="">

<p>ç¾å¯¦:</p>
<img src="/2021/10/28/Arduino-LED%E4%BA%AE%E7%87%88/real_fx.png" class="">

<h3 id="ç¸½çµ"><a href="#ç¸½çµ" class="headerlink" title="ç¸½çµ"></a>ç¸½çµ</h3><p>ç”¨ç†è«–å…¬å¼æ¨å¾Œå°±å¯ä»¥ç”¨ä»»æ„çš„é›»å£“ã€é›»é˜»ä¾†å…œ<br>é¿å…ICç‡’å£ã€å»¶é•·ä½¿ç”¨æ™‚é–“</p>
<p>((ps.æ‡‚äº†å¾Œæœƒè¦ºå¾—ä¸€äº›ç¯„ä¾‹æ›¸ä¸Šåªçµ¦ä¸€å€‹é›»é˜»ç„¶å¾Œä¸å‘Šè¨´ä½ ç‚ºä»€éº¼ã€æ€éº¼ç®—å¯¦åœ¨å¤ªé»‘äº†ã€‚</p>
<p><strong>åƒè€ƒè³‡æ–™</strong><br>é›»é˜»è‰²ç¢¼è¨ˆç®—<br><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E9%9B%BB%E9%98%BB%E8%89%B2%E7%A2%BC">https://zh.wikipedia.org/wiki/%E9%9B%BB%E9%98%BB%E8%89%B2%E7%A2%BC</a><br>é›»é˜»æ”¾ç½®<br><a target="_blank" rel="noopener" href="https://zhidao.baidu.com/question/1610875004126323107.html">https://zhidao.baidu.com/question/1610875004126323107.html</a><br>é™æµé›»é˜»è¨ˆç®—å™¨<br><a target="_blank" rel="noopener" href="https://gc.digitw.com/Program/Resistor4LED/Resistor4LED.htm">https://gc.digitw.com/Program/Resistor4LED/Resistor4LED.htm</a><br>ç‚ºä»€éº¼LEDè¦åŠ ä¸Šé›»é˜»<br><a target="_blank" rel="noopener" href="http://yehnan.blogspot.com/2012/03/arduinoled220-ohm.html">http://yehnan.blogspot.com/2012/03/arduinoled220-ohm.html</a><br>æ§åˆ¶LED<br><a target="_blank" rel="noopener" href="https://blog.jmaker.com.tw/arduino-tutorials-3/">https://blog.jmaker.com.tw/arduino-tutorials-3/</a><br>æ­å§†å®šå¾‹<br><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E6%AC%A7%E5%A7%86%E5%AE%9A%E5%BE%8B">https://zh.wikipedia.org/wiki/%E6%AC%A7%E5%A7%86%E5%AE%9A%E5%BE%8B</a><br>ä¸¦è¯é›»è·¯<br><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E4%B8%A6%E8%81%AF%E9%9B%BB%E8%B7%AF#%E9%9B%BB%E9%98%BB%E5%99%A8">https://zh.wikipedia.org/wiki/%E4%B8%A6%E8%81%AF%E9%9B%BB%E8%B7%AF#%E9%9B%BB%E9%98%BB%E5%99%A8</a><br>å…‹å¸Œè·å¤«é›»è·¯å®šå¾‹<br><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%9F%BA%E7%88%BE%E9%9C%8D%E5%A4%AB%E9%9B%BB%E8%B7%AF%E5%AE%9A%E5%BE%8B#%E5%9F%BA%E7%88%BE%E9%9C%8D%E5%A4%AB%E9%9B%BB%E6%B5%81%E5%AE%9A%E5%BE%8B%EF%BC%88KCL%EF%BC%89">https://zh.wikipedia.org/wiki/%E5%9F%BA%E7%88%BE%E9%9C%8D%E5%A4%AB%E9%9B%BB%E8%B7%AF%E5%AE%9A%E5%BE%8B#%E5%9F%BA%E7%88%BE%E9%9C%8D%E5%A4%AB%E9%9B%BB%E6%B5%81%E5%AE%9A%E5%BE%8B%EF%BC%88KCL%EF%BC%89</a><br>æ­å§†å®šå¾‹<br><a target="_blank" rel="noopener" href="https://physcourse.thu.edu.tw/mengwen/%E6%99%AE%E7%89%A9%E5%AF%A6%E9%A9%97/%E5%AF%A6%E9%A9%97%E9%A0%85%E7%9B%AE/%E6%AD%90%E5%A7%86%E5%AE%9A%E5%BE%8B/">https://physcourse.thu.edu.tw/mengwen/%E6%99%AE%E7%89%A9%E5%AF%A6%E9%A9%97/%E5%AF%A6%E9%A9%97%E9%A0%85%E7%9B%AE/%E6%AD%90%E5%A7%86%E5%AE%9A%E5%BE%8B/</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yuhsiang237.github.io/2021/10/28/Arduino-LED%E4%BA%AE%E7%87%88/" data-id="cme6kwnzt0005galj0n4z4n80" data-title="Arduinoé™æµLEDå¯¦é©—" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-C-MVC-API-Bearer-Tokené©—è­‰" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/10/27/C-MVC-API-Bearer-Token%E9%A9%97%E8%AD%89/" class="article-date">
  <time class="dt-published" datetime="2021-10-27T13:57:47.000Z" itemprop="datePublished">2021-10-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Code/">Code</a>â–º<a class="article-category-link" href="/categories/Code/C/">C#</a>â–º<a class="article-category-link" href="/categories/Framework/">Framework</a>â–º<a class="article-category-link" href="/categories/Framework/AspNetCore-API/">AspNetCore API</a>â–º<a class="article-category-link" href="/categories/Topic/">Topic</a>â–º<a class="article-category-link" href="/categories/Topic/2021-C-AspNetCore-Challenge/">2021 C# AspNetCore Challenge</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/10/27/C-MVC-API-Bearer-Token%E9%A9%97%E8%AD%89/">[Day24] C# MVC API JWT Tokené©—è­‰ (ä¸Š) JWTåŸºç¤çŸ¥è­˜ - C#&amp;AspNetCore</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>åœ¨å…ˆå‰æœ‰ä»‹ç´¹éCookie-Basedé©—è­‰æ–¼MVCå°ˆæ¡ˆè£¡ã€‚</p>
<a href="/2021/10/07/C-MVC-%E9%A9%97%E8%AD%89%E8%88%87%E6%8E%88%E6%AC%8A%E7%99%BB%E5%85%A5%E8%88%87%E7%99%BB%E5%87%BA/" title="[Day12] C# MVC é©—è­‰èˆ‡æˆæ¬Šï¼Œç™»å…¥èˆ‡ç™»å‡º - C#&amp;AspNetCore">[Day12] C# MVC é©—è­‰èˆ‡æˆæ¬Šï¼Œç™»å…¥èˆ‡ç™»å‡º - C#&amp;AspNetCore</a>

<p>è€Œé€™å›ä¸»è¦æ¢è¨çš„æ˜¯Token-Basedé©—è­‰ï¼Œä¹Ÿå°±æ˜¯APIå¸¸ç”¨çš„JWT (Json Web Token)ã€‚</p>
<h3 id="ä»€éº¼æ˜¯JWT"><a href="#ä»€éº¼æ˜¯JWT" class="headerlink" title="ä»€éº¼æ˜¯JWT"></a>ä»€éº¼æ˜¯JWT</h3><p>JSON Web Token (JWT) is a proposed Internet standard for creating data with optional signature and/or optional encryption whose payload holds JSON that asserts some number of claims. </p>
<p>ç‚ºJSON Web Tokenï¼Œæ˜¯ä¸€å€‹å»ºè­°çš„ç¶²è·¯æ¨™æº–ï¼Œç”¨ä¾†å»ºç«‹ç°½åï¼Œä¸”åœ¨å…¶ä¸­å¯ä»¥è¦–éœ€æ±‚åŠ å…¥è‡ªè¨‚çš„JSONå…§å®¹ã€‚</p>
<p>ç°¡è¨€ä¹‹ï¼Œå°±æ˜¯ä»¤ç‰Œ(Token)ï¼Œä½ å¯ä»¥æ‹¿é€™ä»¤ç‰Œå»è¦è³‡æ–™ã€‚</p>
<h3 id="JWTå„ªé»"><a href="#JWTå„ªé»" class="headerlink" title="JWTå„ªé»"></a>JWTå„ªé»</h3><p>è·¨åŸŸ: ä¸å—ç¶²åŸŸé™åˆ¶ï¼Œå¯ç”¨ä¾†ä¸²æ¥ç¬¬ä¸‰æ–¹æ‡‰ç”¨ï¼Œå¦‚ OAuthã€‚<br>å®‰å…¨æ€§: ä¸ä½¿ç”¨ Cookie å› æ­¤ä¸æœƒå—åˆ° CSRF æ”»æ“Šï¼Œä¸é Token ä¸¦ä¸èƒ½é˜²è­· XSS æ”»æ“Šï¼Œé‚„æ˜¯éœ€è¦ç‰¹åˆ¥æ³¨æ„ã€‚<br>è¡Œå‹•ç«¯: å¯ç”¨æ–¼ä¸æ”¯æ´ Cookie çš„è£ç½®ä¸Šï¼Œä¸”ç¾åœ¨ç¶²ç«™å’Œ APP ä¸²æ¥æ™®éä½¿ç”¨ Token æˆæ¬Šã€‚</p>
<h3 id="JWTæ ¼å¼"><a href="#JWTæ ¼å¼" class="headerlink" title="JWTæ ¼å¼"></a>JWTæ ¼å¼</h3><p>ä¸»è¦ç”±ä¸‰å€‹éƒ¨åˆ†çµ„æˆ:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">header.payload.signature</span><br></pre></td></tr></table></figure>


<p><strong>Header</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;alg&quot;: &quot;HS256&quot;,</span><br><span class="line">  &quot;typ&quot;: &quot;JWT&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>alg:å®šç¾©åŠ å¯†çš„æ–¹å¼ç”¢ç”Ÿsignatureï¼Œå¦‚ä¸Šæ˜¯HS256è¡¨ç¤ºä½¿ç”¨æ˜¯HMAC-SHA256.<br>typ:Tokené¡å‹</p>
<p>å¸¸è¢«ä½¿ç”¨çš„headerå¦‚:typã€ctyã€algã€kidã€x5cã€x5uã€crit<br>å¯è‡ªè¡Œæ·»åŠ åƒè€ƒ:<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/JSON_Web_Token">https://en.wikipedia.org/wiki/JSON_Web_Token</a></p>
<p><strong>Payload</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;loggedInAs&quot;: &quot;admin&quot;,</span><br><span class="line">  &quot;iat&quot;: 1422779638</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>loggedInAs:é€™æ˜¯å®¢è£½åŒ–claimï¼Œä»¥æ­¤ä¾†èªªæ˜¯ç®¡ç†å“¡ã€‚<br>iat:é€™æ˜¯æ¨™æº–çš„claimï¼Œè¡¨ç¤ºæ­¤JWTç™¼å¸ƒçš„æ™‚é–“ã€‚</p>
<p>æ¨™æº–çš„claimå¦‚:issã€subã€audã€expã€nbfã€iatã€jti<br>å¯è‡ªè¡Œæ·»åŠ åƒè€ƒ:<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/JSON_Web_Token">https://en.wikipedia.org/wiki/JSON_Web_Token</a></p>
<p>é€šå¸¸ç‚ºäº†è®“å‰ç«¯æˆ–å¾Œç«¯å¥½å­˜å–å¤šåŠ ä¸Šä¸€äº›è­˜åˆ¥å€¼ã€‚</p>
<p><strong>Signature</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">HMAC_SHA256(</span><br><span class="line">  secret,</span><br><span class="line">  base64urlEncoding(header) + &#x27;.&#x27; +</span><br><span class="line">  base64urlEncoding(payload)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>ç°½åï¼Œç¢ºä¿è³‡æ–™å®Œæ•´æ€§çš„é›œæ¹Šç°½ç« ã€‚</p>
<p>å°‡ä»¥ä¸Šä¸‰è€…ç”¨Base64url Encodingçµæœå³ç‚ºJWT</p>
<p>ç”Ÿæˆ:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const token = base64urlEncoding(header) + &#x27;.&#x27; + base64urlEncoding(payload) + &#x27;.&#x27; + base64urlEncoding(signature)</span><br></pre></td></tr></table></figure>
<p>çµæœ:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJsb2dnZWRJbkFzIjoiYWRtaW4iLCJpYXQiOjE0MjI3Nzk2Mzh9.gzSraSYS8EXBxLN_oWnFSRgCzcmJmMjLiuyu5CSpyHI</span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨æƒ…å¢ƒ"><a href="#ä½¿ç”¨æƒ…å¢ƒ" class="headerlink" title="ä½¿ç”¨æƒ…å¢ƒ"></a>ä½¿ç”¨æƒ…å¢ƒ</h3><p>å°‡æ­¤Tokenæ”¾ç½®æ–¼APIè«‹æ±‚çš„Headerä¸­:<br>ä¾‹å¦‚:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJsb2dnZWRJbkFzIjoiYWRtaW4iLCJpYXQiOjE0MjI3Nzk2Mzh9.gzSraSYS8EXBxLN_oWnFSRgCzcmJmMjLiuyu5CSpyHI</span><br></pre></td></tr></table></figure>
<p>å‚³é€çµ¦å¾Œç«¯</p>
<h3 id="JWTè¡ä¼¸å•é¡Œ"><a href="#JWTè¡ä¼¸å•é¡Œ" class="headerlink" title="JWTè¡ä¼¸å•é¡Œ"></a>JWTè¡ä¼¸å•é¡Œ</h3><p>Tokençš„ç«Šå–å•é¡Œï¼Œå› ç‚ºJWTç™¼å‡ºå»å°±ä¸èƒ½éŠ·æ¯€ï¼Œåªèƒ½è‡ªå·±ç­‰å¾…éæœŸã€‚<br>æ‰€ä»¥æœ‰äº†<code>Refresh Token</code>çš„å‡ºç¾ã€‚</p>
<p>ä½¿ç”¨Refresh Tokenå¾Œ:<br>ç¸®çŸ­æ¯å€‹Tokenæ™‚é–“ï¼ŒéæœŸæ™‚å†é‡æ–°ç´¢å–ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;access_token&quot;:&quot;l0XG52TQx&quot;,    //Token</span><br><span class="line">  &quot;refresh_token&quot;:&quot;KWI3JOkFA&quot;,   //Refresh Token</span><br><span class="line">  &quot;expires_in&quot;:3600              //å¹¾ç§’éæœŸ</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç•¶TokenéæœŸå¾Œï¼Œä½¿ç”¨refresh_tokenå‘¼å«ä¸€å€‹APIè¦å–ä¸€å€‹æ–°Tokenã€‚<br>refresh_tokenæ˜¯å­˜åœ¨è‡ªå·±è³‡æ–™åº«å…§çš„ï¼Œæ‰€ä»¥è¢«ç›œç”¨å¯ä»¥é¦¬ä¸Šåˆªé™¤æ‰!</p>
<p>åœ¨å¯«ç¨‹å¼ç¢¼æ™‚å¯ä»¥åœ¨æŸAPIç™¼ç¾éæœŸå¾Œç«‹å³å‘¼å«æ›´æ›ã€‚<br>æˆ–æ˜¯ç”¨Tokenè£¡é¢å¸¶å…¥çš„payloadå»ç¢ºèªæ›´æ›æ™‚æ©Ÿä¹Ÿå¯ä»¥ï¼Œä½†å¯èƒ½æœƒæœ‰æ™‚å€å•é¡Œã€‚</p>
<p>æ­¤å¤–ï¼Œå¦‚æœç”¨Refresh Tokenä»æœƒæœ‰ä¸€äº›å®‰å…¨ç–‘æ…®ï¼Œå°±æ˜¯ç™¼å‡ºçš„tokené‚„æ˜¯è¦ç­‰åˆ°æ™‚é–“è‡ªå·±é€¾æœŸã€‚<br>(ä¸å¦‚è‡ªå·±å»ºè¡¨è¨˜Tokené‚„æ¯”è¼ƒå®‰å…¨ï¼Œæ‰€ä»¥åœ¨ä¸‹é¢æˆ‘å¯«äº†é¡å¤–è£œå……)</p>
<h3 id="é¡å¤–è£œå……"><a href="#é¡å¤–è£œå……" class="headerlink" title="é¡å¤–è£œå……"></a>é¡å¤–è£œå……</h3><p>é™¤äº†JWTå¤–ä¹Ÿæœ‰ä¸€äº›è‡ªè¨‚çš„åšæ³•èƒ½ç”¨ä¾†é©—è­‰APPæ‰‹æ©Ÿç«¯ã€‚<br>å¦‚DBè‡ªå»ºTokenè¡¨ï¼Œå¯èƒ½åƒæ˜¯é€™æ¨£:</p>
<p>æ¯æ¬¡æ“ä½œAPIéƒ½å¸¶å…¥Tokenï¼ŒDBæª¢é©—ä¸€æ¬¡ã€‚<br>è¢«ç›œç”¨æ™‚æƒ³åˆªéš¨æ™‚èƒ½åˆªã€èƒ½å¼·åˆ¶ç™»å‡ºã€‚</p>
<p><strong>Tokensè³‡æ–™è¡¨</strong></p>
<table>
<tr>
<th>UserID</th>
<th>Token</th>
<th>Expires_In</th>
</tr>
<tr>
<td>1</td>
<td>AJIASOIASssarJ</td>
<td>2021-10-16</td>
</tr>
<tr>
<td>2</td>
<td>AASKOPASKOAPaS</td>
<td>2021-10-17</td>
</tr>
<tr>
<td>3</td>
<td>AASK45as4daaS</td>
<td>2021-10-14</td>
</tr>
</table>

<p>æµç¨‹å¤§æ¦‚åƒé€™æ¨£:<br>API&gt;æ’ˆDBæª¢æŸ¥&gt;å¤§æ–¼æ™‚é–“ï¼Œåˆªé™¤Token&gt;å›å‚³æˆæ¬Šå¤±æ•—</p>
<p>é›–ç„¶æ¯”è¼ƒè€—è³‡æ–™åº«è³‡æºä½†æˆ‘è¦ºå¾—æ˜¯æœ€å®‰å…¨çš„æ–¹å¼XDã€‚<br>è€Œä¸”æ²’æœ‰ç™¼å‡ºè¦ç­‰åˆ°æ™‚é–“åˆ°æ‰æœƒé€¾æœŸçš„å•é¡Œ</p>
<h3 id="ç¸½çµ"><a href="#ç¸½çµ" class="headerlink" title="ç¸½çµ"></a>ç¸½çµ</h3><p>åœ¨é€™å›ä¸­ä¸»è¦æ¢è¨JWTæ˜¯ä»€éº¼ã€å‰ç½®çš„çŸ¥è­˜ç†è«–ã€‚<br>ç™¼ç¾äº†JWTçš„ä¸€äº›å¥½è™•èˆ‡å£è™•ã€‚</p>
<p>å› æ­¤å¦‚æœæœ‰ç–‘æ…®å¥½åƒè‡ªå·±å»ºç«‹Tokenè¡¨é‚„æ˜¯æœ€å®‰å…¨çš„XD</p>
<p>è€Œåœ¨ä¸‹ç¯‡ä¸­å°‡æœƒå¯¦ä½œJWTçš„æ©Ÿåˆ¶ã€‚</p>
<p><strong>åƒè€ƒè³‡æ–™</strong><br><a target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/articles/10199102">https://ithelp.ithome.com.tw/articles/10199102</a><br><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/JSON_Web_Token">https://en.wikipedia.org/wiki/JSON_Web_Token</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yuhsiang237.github.io/2021/10/27/C-MVC-API-Bearer-Token%E9%A9%97%E8%AD%89/" data-id="cme6kwo07000ngalja1kjdumx" data-title="[Day24] C# MVC API JWT Tokené©—è­‰ (ä¸Š) JWTåŸºç¤çŸ¥è­˜ - C#&amp;AspNetCore" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-C-MVC-Web-APIå¢åŠ Swagger" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/10/26/C-MVC-Web-API%E5%A2%9E%E5%8A%A0Swagger/" class="article-date">
  <time class="dt-published" datetime="2021-10-26T11:59:32.000Z" itemprop="datePublished">2021-10-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Code/">Code</a>â–º<a class="article-category-link" href="/categories/Code/C/">C#</a>â–º<a class="article-category-link" href="/categories/Topic/">Topic</a>â–º<a class="article-category-link" href="/categories/Topic/2021-C-AspNetCore-Challenge/">2021 C# AspNetCore Challenge</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/10/26/C-MVC-Web-API%E5%A2%9E%E5%8A%A0Swagger/">[Day23] C# MVC Web APIç‰ˆæœ¬å¢åŠ Swagger - C#&amp;AspNetCore</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>åœ¨ä¸Šå›ä¸­æˆ‘å€‘ä»‹ç´¹äº† <a href="/2021/10/19/C-MVC-API%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/" title="[Day22] C# MVC APIç‰ˆæœ¬æ§åˆ¶ - C#&amp;AspNetCore">[Day22] C# MVC APIç‰ˆæœ¬æ§åˆ¶ - C#&amp;AspNetCore</a> ï¼Œå¯¦ä½œäº†RESTful APIçš„ç‰ˆæ§ã€‚</p>
<p>è€Œé€™å›å°‡è¦é€²è¡ŒAPIçš„éƒ¨å±¬ï¼Œä½¿ç”¨Swagger UIã€‚</p>
<p>æ‰¾äº†å¾ˆå¤šç¯‡ç®—æ˜¯æ‰¾åˆ°ä¸€ç¯‡<br><a target="_blank" rel="noopener" href="https://codingfreaks.de/dotnet-core-api-versioning/">https://codingfreaks.de/dotnet-core-api-versioning/</a><br>å¯ä»¥åŒæ™‚ä½¿ç”¨API Versioningè·ŸSwaggerå¥—ä»¶çš„ç¯„ä¾‹</p>
<p>åœ¨é€™ç¯‡ä¸­ä¸»è¦é…ç½®APIä¸¦ä¸”åˆ‡ç‰ˆæœ¬</p>
<p>1.å…ˆç”¨Nugetå®‰è£ä»¥ä¸‹å¥—ä»¶:<br>Swashbuckle.AspNetCore<br>Swashbuckle.AspNetCore.Annotations<br>Swashbuckle.AspNetCore.Swagger<br>Swashbuckle.AspNetCore.SwaggerGen<br>Swashbuckle.AspNetCore.SwaggerUI</p>
<img src="/2021/10/26/C-MVC-Web-API%E5%A2%9E%E5%8A%A0Swagger/4.png" class="">

<p>2.å†ä¾†æ˜¯æˆ‘å€‘è¦ä¿®æ”¹çš„æª”æ¡ˆ</p>
<img src="/2021/10/26/C-MVC-Web-API%E5%A2%9E%E5%8A%A0Swagger/5.png" class="">

<p>é¦–å…ˆæ˜¯Swaggerçš„å®šç¾©é¡åˆ¥</p>
<p><strong>~/ConfigureSwaggerOptions.cs</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">namespace ApiVersioningSample</span><br><span class="line">&#123;</span><br><span class="line">    using System;</span><br><span class="line">    using System.Linq;</span><br><span class="line"></span><br><span class="line">    using Microsoft.AspNetCore.Mvc.ApiExplorer;</span><br><span class="line">    using Microsoft.Extensions.DependencyInjection;</span><br><span class="line">    using Microsoft.Extensions.Options;</span><br><span class="line">    using Microsoft.OpenApi.Models;</span><br><span class="line"></span><br><span class="line">    using Swashbuckle.AspNetCore.SwaggerGen;</span><br><span class="line"></span><br><span class="line">    /// &lt;summary&gt;</span><br><span class="line">    /// Configures the Swagger generation options.</span><br><span class="line">    /// &lt;/summary&gt;</span><br><span class="line">    /// &lt;remarks&gt;</span><br><span class="line">    /// &lt;para&gt;</span><br><span class="line">    /// This allows API versioning to define a Swagger document per API version after the</span><br><span class="line">    /// &lt;see cref=&quot;IApiVersionDescriptionProvider&quot; /&gt; service has been resolved from the service container.</span><br><span class="line">    /// &lt;/para&gt;</span><br><span class="line">    /// &lt;para&gt;Taken from https://github.com/microsoft/aspnet-api-versioning.&lt;/para&gt;</span><br><span class="line">    /// &lt;/remarks&gt;</span><br><span class="line">    public class ConfigureSwaggerOptions : IConfigureOptions&lt;SwaggerGenOptions&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        #region member vars</span><br><span class="line"></span><br><span class="line">        private readonly IApiVersionDescriptionProvider _provider;</span><br><span class="line"></span><br><span class="line">        #endregion</span><br><span class="line"></span><br><span class="line">        #region constructors and destructors</span><br><span class="line"></span><br><span class="line">        /// &lt;summary&gt;</span><br><span class="line">        /// Initializes a new instance of the &lt;see cref=&quot;ConfigureSwaggerOptions&quot; /&gt; class.</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        /// &lt;param name=&quot;provider&quot;&gt;</span><br><span class="line">        /// The &lt;see cref=&quot;IApiVersionDescriptionProvider&quot;&gt;provider&lt;/see&gt; used to generate Swagger</span><br><span class="line">        /// documents.</span><br><span class="line">        /// &lt;/param&gt;</span><br><span class="line">        public ConfigureSwaggerOptions(IApiVersionDescriptionProvider provider)</span><br><span class="line">        &#123;</span><br><span class="line">            _provider = provider;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        #endregion</span><br><span class="line"></span><br><span class="line">        #region explicit interfaces</span><br><span class="line"></span><br><span class="line">        /// &lt;inheritdoc /&gt;</span><br><span class="line">        public void Configure(SwaggerGenOptions options)</span><br><span class="line">        &#123;</span><br><span class="line">            // add a swagger document for each discovered API version</span><br><span class="line">            // note: you might choose to skip or document deprecated API versions differently</span><br><span class="line">            foreach (var description in _provider.ApiVersionDescriptions)</span><br><span class="line">            &#123;</span><br><span class="line">                options.SwaggerDoc(description.GroupName, CreateInfoForApiVersion(description));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        #endregion</span><br><span class="line"></span><br><span class="line">        #region methods</span><br><span class="line"></span><br><span class="line">        /// &lt;summary&gt;</span><br><span class="line">        /// Internal implementation for building the Swagger basic config.</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        /// &lt;param name=&quot;description&quot;&gt;The description object containing the.&lt;/param&gt;</span><br><span class="line">        /// &lt;returns&gt;The generated Open API info.&lt;/returns&gt;</span><br><span class="line">        private static OpenApiInfo CreateInfoForApiVersion(ApiVersionDescription description)</span><br><span class="line">        &#123;</span><br><span class="line">            var info = new OpenApiInfo</span><br><span class="line">            &#123;</span><br><span class="line">                Title = &quot;Sample API&quot;,</span><br><span class="line">                Version = description.ApiVersion.ToString(),</span><br><span class="line">                Description = @&quot;&lt;p&gt;Sample API with versioning including Swagger.&lt;/p&gt;&lt;p&gt;Partly taken from &lt;a href=&quot;&quot;https://github.com/microsoft/aspnet-api-versioning&quot;&quot;&gt;this repository&lt;/a&gt;.&lt;/p&gt;&quot;,</span><br><span class="line">                Contact = new OpenApiContact</span><br><span class="line">                &#123;</span><br><span class="line">                    Name = &quot;Yu Hsiang&quot;,</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            if (description.IsDeprecated)</span><br><span class="line">            &#123;</span><br><span class="line">                info.Description += @&quot;&lt;p&gt;&lt;strong&gt;&lt;span style=&quot;&quot;color:white;background-color:red&quot;&quot;&gt;VERSION IS DEPRECATED&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&quot;;</span><br><span class="line">            &#125;</span><br><span class="line">            return info;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        #endregion</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€™é¡åˆ¥ä¸»è¦ç”¨ä¾†æ”¾Swaggerå®¢è£½åŒ–çš„æ•¸å€¼</p>
<p>å†ä¾†æ˜¯å•Ÿç”¨Swagger</p>
<p><strong>~/Startup.cs</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line">using Microsoft.AspNetCore.Builder;</span><br><span class="line">using Microsoft.AspNetCore.Hosting;</span><br><span class="line">using Microsoft.AspNetCore.HttpsPolicy;</span><br><span class="line">using Microsoft.AspNetCore.Mvc;</span><br><span class="line">using Microsoft.Extensions.Configuration;</span><br><span class="line">using Microsoft.Extensions.DependencyInjection;</span><br><span class="line">using Microsoft.Extensions.Hosting;</span><br><span class="line">using Microsoft.Extensions.Logging;</span><br><span class="line">using System;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using System.Linq;</span><br><span class="line">using System.Threading.Tasks;</span><br><span class="line">using Microsoft.EntityFrameworkCore;</span><br><span class="line">using TodoAPI.Models;</span><br><span class="line">using Microsoft.OpenApi.Models;</span><br><span class="line">using Swashbuckle.AspNetCore.SwaggerGen;</span><br><span class="line">using Microsoft.Extensions.Options;</span><br><span class="line">using ApiVersioningSample;</span><br><span class="line">using Microsoft.AspNetCore.Mvc.ApiExplorer;</span><br><span class="line"></span><br><span class="line">namespace TodoAPI</span><br><span class="line">&#123;</span><br><span class="line">    public class Startup</span><br><span class="line">    &#123;</span><br><span class="line">        public Startup(IConfiguration configuration)</span><br><span class="line">        &#123;</span><br><span class="line">            Configuration = configuration;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public IConfiguration Configuration &#123; get; &#125;</span><br><span class="line"></span><br><span class="line">        // This method gets called by the runtime. Use this method to add services to the container.</span><br><span class="line">        public void ConfigureServices(IServiceCollection services)</span><br><span class="line">        &#123;</span><br><span class="line">            services.AddControllers();</span><br><span class="line">            // è³‡æ–™åº«é…ç½®</span><br><span class="line">            var connection = @&quot;Server=.\SQLExpress;Database=TodoDB;Trusted_Connection=True;ConnectRetryCount=0&quot;;</span><br><span class="line">            services.AddDbContext&lt;TodoDBContext&gt;(options =&gt; options.UseSqlServer(connection));</span><br><span class="line"></span><br><span class="line">            // å•Ÿç”¨APIç‰ˆæ§åŠŸèƒ½</span><br><span class="line">            services.AddApiVersioning(</span><br><span class="line">              options =&gt;</span><br><span class="line">              &#123;</span><br><span class="line">                    // reporting api versions will return the headers &quot;api-supported-versions&quot; and &quot;api-deprecated-versions&quot;</span><br><span class="line">                    options.ReportApiVersions = true;</span><br><span class="line">              &#125;);</span><br><span class="line"></span><br><span class="line">            // swagger é…ç½®</span><br><span class="line">            services.AddVersionedApiExplorer(</span><br><span class="line">                options =&gt;</span><br><span class="line">                &#123;</span><br><span class="line">                    // add the versioned api explorer, which also adds IApiVersionDescriptionProvider service</span><br><span class="line">                    // note: the specified format code will format the version as &quot;&#x27;v&#x27;major[.minor][-status]&quot;</span><br><span class="line">                    options.GroupNameFormat = &quot;&#x27;v&#x27;VVV&quot;;</span><br><span class="line">                    // note: this option is only necessary when versioning by url segment. the SubstitutionFormat</span><br><span class="line">                    // can also be used to control the format of the API version in route templates</span><br><span class="line">                    options.SubstituteApiVersionInUrl = true;</span><br><span class="line">                &#125;);</span><br><span class="line">            services.AddTransient&lt;IConfigureOptions&lt;SwaggerGenOptions&gt;, ConfigureSwaggerOptions&gt;();</span><br><span class="line">            services.AddSwaggerGen();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // This method gets called by the runtime. Use this method to configure the HTTP request pipeline.</span><br><span class="line">        public void Configure(IApplicationBuilder app, IWebHostEnvironment env, IApiVersionDescriptionProvider provider)</span><br><span class="line">        &#123;</span><br><span class="line">            if (env.IsDevelopment())</span><br><span class="line">            &#123;</span><br><span class="line">                app.UseDeveloperExceptionPage();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            app.UseHttpsRedirection();</span><br><span class="line"></span><br><span class="line">            app.UseRouting();</span><br><span class="line"></span><br><span class="line">            app.UseAuthorization();</span><br><span class="line">            </span><br><span class="line">            // swagger é…ç½®</span><br><span class="line">            app.UseSwagger();</span><br><span class="line">            app.UseSwaggerUI(</span><br><span class="line">                options =&gt;</span><br><span class="line">                &#123;</span><br><span class="line">                    // build a swagger endpoint for each discovered API version</span><br><span class="line">                    foreach (var description in provider.ApiVersionDescriptions)</span><br><span class="line">                    &#123;</span><br><span class="line">                        options.SwaggerEndpoint($&quot;/swagger/&#123;description.GroupName&#125;/swagger.json&quot;, description.GroupName.ToUpperInvariant());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            app.UseEndpoints(endpoints =&gt;</span><br><span class="line">            &#123;</span><br><span class="line">                endpoints.MapControllers();</span><br><span class="line"></span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ç¬¬48ï½60è¡Œ:swagger é…ç½®<br>ç¬¬79ï½89è¡Œ:swagger é…ç½®</p>
<p>4.ç‰ˆæœ¬çš„é¡åˆ¥æ’°å¯«:</p>
<p><strong>~/Controllers/V1_1/VersionController.cs</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections.Generic;</span><br><span class="line">using Microsoft.AspNetCore.Mvc;</span><br><span class="line"></span><br><span class="line">namespace TodoAPI.Controllers.V1_1</span><br><span class="line">&#123;</span><br><span class="line">    [ApiVersion(&quot;1.1&quot;)]</span><br><span class="line">    [Route(&quot;api/v&#123;version:apiVersion&#125;/[controller]&quot;)]</span><br><span class="line">    [ApiController]</span><br><span class="line">    public class VersionController : ControllerBase</span><br><span class="line">    &#123;</span><br><span class="line">        [HttpGet]</span><br><span class="line">        public IEnumerable&lt;string&gt; Get()</span><br><span class="line">        &#123;</span><br><span class="line">            return new string[] &#123; &quot;api v1.1&quot; &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>~/Controllers/V1_1/VersionController.cs</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections.Generic;</span><br><span class="line">using Microsoft.AspNetCore.Mvc;</span><br><span class="line"></span><br><span class="line">namespace TodoAPI.Controllers.V1_1</span><br><span class="line">&#123;</span><br><span class="line">    [ApiVersion(&quot;1.1&quot;)]</span><br><span class="line">    [Route(&quot;api/v&#123;version:apiVersion&#125;/[controller]&quot;)]</span><br><span class="line">    [ApiController]</span><br><span class="line">    public class VersionController : ControllerBase</span><br><span class="line">    &#123;</span><br><span class="line">        [HttpGet]</span><br><span class="line">        public IEnumerable&lt;string&gt; Get()</span><br><span class="line">        &#123;</span><br><span class="line">            return new string[] &#123; &quot;api v1.1&quot; &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>~/Controllers/V2_0/VersionController.cs</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections.Generic;</span><br><span class="line">using Microsoft.AspNetCore.Mvc;</span><br><span class="line"></span><br><span class="line">namespace TodoAPI.Controllers.V2_0</span><br><span class="line">&#123;</span><br><span class="line">    [ApiVersion(&quot;2.0&quot;)]</span><br><span class="line">    [Route(&quot;api/v&#123;version:apiVersion&#125;/[controller]&quot;)]</span><br><span class="line">    [ApiController]</span><br><span class="line">    public class VersionController : ControllerBase</span><br><span class="line">    &#123;</span><br><span class="line">        [HttpGet]</span><br><span class="line">        public IEnumerable&lt;string&gt; Get()</span><br><span class="line">        &#123;</span><br><span class="line">            return new string[] &#123; &quot;api v2.0&quot; &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>åŸºæœ¬ä¸Šå°±æ˜¯æ”¹<br>ç¬¬4è¡Œè³‡æ–™å¤¾:V1_0 è‡³ V1_1 è‡³ V2_0<br>ç¬¬6è¡ŒApiVersion:1.0 è‡³ 1.1 è‡³ 2.0<br>å…¶ä»–çš„Controllerä¹Ÿæ˜¯ä¸€æ¨£ï¼Œé€™é‚Šå°±èˆ‰ä¾‹VersionController.cs</p>
<p>5.å•Ÿç”¨å¾Œç¯„ä¾‹:</p>
<img src="/2021/10/26/C-MVC-Web-API%E5%A2%9E%E5%8A%A0Swagger/demo.gif" class="">

<h3 id="å°ˆæ¡ˆé€£çµ"><a href="#å°ˆæ¡ˆé€£çµ" class="headerlink" title="å°ˆæ¡ˆé€£çµ"></a>å°ˆæ¡ˆé€£çµ</h3><p><a target="_blank" rel="noopener" href="https://github.com/yuhsiang237/ASP.NET-Core-RESTfulAPI-Swagger">https://github.com/yuhsiang237/ASP.NET-Core-RESTfulAPI-Swagger</a></p>
<h3 id="ç¸½è¦½"><a href="#ç¸½è¦½" class="headerlink" title="ç¸½è¦½"></a>ç¸½è¦½</h3><p>Swagger UIæ­é…ç‰ˆæ§ï¼Œè€Œåœ¨.net Coreå®˜æ–¹æ˜¯æ²’æœ‰æä¾›ç‰ˆæœ¬+Swaggeré…ç½®çš„ï¼Œæ‰€ä»¥è¸©å¾ˆå¤šé›·ã€‚<br>é€™å›åƒè€ƒäº† <a target="_blank" rel="noopener" href="https://codingfreaks.de/dotnet-core-api-versioning/">https://codingfreaks.de/dotnet-core-api-versioning/</a> çš„æ–‡ç« ã€‚<br>èŠ±äº†ä¸å°‘æ™‚é–“åœ¨é™¤éŒ¯ï¼Œæœ€å¾Œçµ‚æ–¼æŠŠSwaggeræ­å»ºèµ·ä¾†ã€‚</p>
<p><strong>åƒè€ƒè³‡æ–™</strong><br><a target="_blank" rel="noopener" href="https://codingfreaks.de/dotnet-core-api-versioning/">https://codingfreaks.de/dotnet-core-api-versioning/</a><br><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-tw/aspnet/core/tutorials/getting-started-with-swashbuckle?view=aspnetcore-3.1&amp;tabs=visual-studio">https://docs.microsoft.com/zh-tw/aspnet/core/tutorials/getting-started-with-swashbuckle?view=aspnetcore-3.1&amp;tabs=visual-studio</a><br><a target="_blank" rel="noopener" href="https://medium.com/wenchin-rolls-around/%E8%BB%9F%E9%AB%94%E7%89%88%E6%9C%AC%E8%99%9F-ee446e1ad543">https://medium.com/wenchin-rolls-around/%E8%BB%9F%E9%AB%94%E7%89%88%E6%9C%AC%E8%99%9F-ee446e1ad543</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yuhsiang237.github.io/2021/10/26/C-MVC-Web-API%E5%A2%9E%E5%8A%A0Swagger/" data-id="cme6kwo0n001ggalj7ckk47m9" data-title="[Day23] C# MVC Web APIç‰ˆæœ¬å¢åŠ Swagger - C#&amp;AspNetCore" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-C-MVC-APIç‰ˆæœ¬æ§åˆ¶" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/10/19/C-MVC-API%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/" class="article-date">
  <time class="dt-published" datetime="2021-10-19T11:59:32.000Z" itemprop="datePublished">2021-10-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Code/">Code</a>â–º<a class="article-category-link" href="/categories/Code/C/">C#</a>â–º<a class="article-category-link" href="/categories/Framework/">Framework</a>â–º<a class="article-category-link" href="/categories/Framework/AspNetCore-API/">AspNetCore API</a>â–º<a class="article-category-link" href="/categories/Topic/">Topic</a>â–º<a class="article-category-link" href="/categories/Topic/2021-C-AspNetCore-Challenge/">2021 C# AspNetCore Challenge</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/10/19/C-MVC-API%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/">[Day22] C# MVC APIç‰ˆæœ¬æ§åˆ¶ - C#&amp;AspNetCore</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>åœ¨ä¸Šå›ä¸­æˆ‘å€‘ä»‹ç´¹äº† <a href="/2021/10/18/C-MVC-RESTful-API-%E4%B8%8B-%E5%AF%A6%E4%BD%9CRESTful-API/" title="[Day21] C# MVC RESTful API (ä¸‹) å¯¦ä½œRESTful API - C#&amp;AspNetCore">[Day21] C# MVC RESTful API (ä¸‹) å¯¦ä½œRESTful API - C#&amp;AspNetCore</a> ï¼Œå¯¦ä½œäº†RESTful APIã€‚</p>
<p>è€Œé€™å›å°‡è¦é€²è¡ŒAPIç‰ˆæœ¬æ§åˆ¶!<br>èƒ½è™•ç†å‰ç«¯(React/Vue)æˆ–APP(iOS/Android)ä¸èƒ½é¦¬ä¸Šæ›´æ–°çš„æœ€ä½³æ‰‹æ®µï¼Œæœ‰éŒ¯å¯ä»¥é¦¬ä¸Šå…ˆé‚„åŸä¸Šä¸€ç‰ˆæœ¬ã€é”åˆ°å‘ä¸‹ç›¸å®¹ã€‚</p>
<h3 id="APIè¦æ ¼"><a href="#APIè¦æ ¼" class="headerlink" title="APIè¦æ ¼"></a>APIè¦æ ¼</h3><p>å¯ä¿®æ”¹apiVersionèª¿ç”¨ä¸åŒç‰ˆæœ¬APIï¼Œå¦‚:v1.0ã€v2.0</p>
<table>
<tbody><tr><th>æ–¹æ³•</th>
<th>ç¶²å€</th>
<th>æè¿°</th>
<th>è¦æ±‚æ–‡æœ¬</th>
<th>å›æ‡‰æ–‡æœ¬</th>
</tr><tr>
<td>GET</td>
<td><code>&#123;apiVersion&#125;/api/todo</code></td>
<td>å–å¾—æ‰€æœ‰å¾…è¾¦äº‹é …</td>
<td>ç„¡</td>
<td>å¾…è¾¦äº‹é …é™£åˆ—</td>
</tr>
<tr>
<td>GET</td>
<td><code>&#123;apiVersion&#125;/api/todo/&#123;id&#125;</code></td>
<td>ä¾è­˜åˆ¥ç¢¼å–å¾—å¾…è¾¦äº‹é …</td>
<td>ç„¡</td>
<td>å¾…è¾¦äº‹é …</td>
</tr>
<tr>
<td>POST</td>
<td><code>&#123;apiVersion&#125;/api/todo</code></td>
<td>æ–°å¢å¾…è¾¦äº‹é …</td>
<td>å¾…è¾¦äº‹é …</td>
<td>å¾…è¾¦äº‹é …</td>
</tr>
<tr>
<td>PUT</td>
<td><code>&#123;apiVersion&#125;/api/todo/&#123;id&#125;</code></td>
<td>æ›´æ–°ç¾æœ‰çš„å¾…è¾¦äº‹é …</td>
<td>å¾…è¾¦äº‹é …</td>
<td>å¾…è¾¦äº‹é …</td>
</tr>
<tr>
<td>DELETE</td>
<td><code>&#123;apiVersion&#125;/api/todo/&#123;id&#125;</code></td>
<td>åˆªé™¤å¾…è¾¦äº‹é …</td>
<td>ç„¡</td>
<td>å¾…è¾¦äº‹é …</td>
</tr>
<tr>
<td>GET</td>
<td><code>&#123;apiVersion&#125;/api/version</code></td>
<td>å–å¾—APIç‰ˆæœ¬</td>
<td>ç„¡</td>
<td>APIç‰ˆæœ¬</td>
</tr>
</tbody></table>


<h3 id="å¯¦ä½œAPIç‰ˆæ§"><a href="#å¯¦ä½œAPIç‰ˆæ§" class="headerlink" title="å¯¦ä½œAPIç‰ˆæ§"></a>å¯¦ä½œAPIç‰ˆæ§</h3><p>å…ˆåˆ—å‡ºæˆ‘å€‘è¦æ”¹çš„æª”æ¡ˆéš»æ•¸:</p>
<img src="/2021/10/19/C-MVC-API%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/2.png" class="">

<p>1.å®‰è£Microsoft.AspNetCore.Mvc.Versioning</p>
<img src="/2021/10/19/C-MVC-API%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/1.png" class="">

<p>2.å†ä¾†æ›´æ–°Startup.csï¼Œæœå‹™å¢åŠ ä¸€è¡Œå•Ÿç”¨APIåŠŸèƒ½services.AddApiVersioning()</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// This method gets called by the runtime. Use this method to add services to the container.</span><br><span class="line">public void ConfigureServices(IServiceCollection services)</span><br><span class="line">&#123;</span><br><span class="line">    services.AddControllers();</span><br><span class="line">    // è³‡æ–™åº«é…ç½®</span><br><span class="line">    var connection = @&quot;Server=.\SQLExpress;Database=TodoDB;Trusted_Connection=True;ConnectRetryCount=0&quot;;</span><br><span class="line">    services.AddDbContext&lt;TodoDBContext&gt;(options =&gt; options.UseSqlServer(connection));</span><br><span class="line">    </span><br><span class="line">    // å•Ÿç”¨APIç‰ˆæ§åŠŸèƒ½</span><br><span class="line">    services.AddApiVersioning();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.ä»¥è³‡æ–™å¤¾åˆ†ç‰ˆæœ¬å±¤ï¼Œå°±æ˜¯æŠŠåŸæœ¬çš„Controllerè¤‡è£½è‡³ç‰ˆæœ¬è³‡æ–™å¤¾</p>
<p>å¦‚1.0ç‰ˆ:<br><strong>~/Controllers/V1/VersionController.cs</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections.Generic;</span><br><span class="line">using Microsoft.AspNetCore.Mvc;</span><br><span class="line"></span><br><span class="line">namespace TodoAPI.Controllers.V1</span><br><span class="line">&#123;</span><br><span class="line">    [ApiVersion(&quot;1.0&quot;)]</span><br><span class="line">    [Route(&quot;api/v&#123;version:apiVersion&#125;/[controller]&quot;)]</span><br><span class="line">    [ApiController]</span><br><span class="line">    public class VersionController : ControllerBase</span><br><span class="line">    &#123;</span><br><span class="line">        [HttpGet]</span><br><span class="line">        public IEnumerable&lt;string&gt; Get()</span><br><span class="line">        &#123;</span><br><span class="line">            return new string[] &#123; &quot;api v1&quot; &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å¦‚2.0ç‰ˆ:</p>
<p><strong>~/Controllers/V2/VersionController.cs</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections.Generic;</span><br><span class="line">using Microsoft.AspNetCore.Mvc;</span><br><span class="line"></span><br><span class="line">namespace TodoAPI.Controllers.V2</span><br><span class="line">&#123;</span><br><span class="line">    [ApiVersion(&quot;2.0&quot;)]</span><br><span class="line">    [Route(&quot;api/v&#123;version:apiVersion&#125;/[controller]&quot;)]</span><br><span class="line">    [ApiController]</span><br><span class="line">    public class VersionController : ControllerBase</span><br><span class="line">    &#123;</span><br><span class="line">        [HttpGet]</span><br><span class="line">        public IEnumerable&lt;string&gt; Get()</span><br><span class="line">        &#123;</span><br><span class="line">            return new string[] &#123; &quot;api v2&quot; &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åªè¦åœ¨æ¯å€‹Controllerä¿®æ”¹ä»¥ä¸‹çš„åœ°æ–¹å³å¯</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">namespace TodoAPI.Controllers.V1 </span><br></pre></td></tr></table></figure>
<p>æ”¹æˆ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">namespace TodoAPI.Controllers.V2</span><br></pre></td></tr></table></figure>
<p>ä»¥åŠ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ApiVersion(&quot;1.0&quot;)]</span><br></pre></td></tr></table></figure>
<p>æ”¹æˆ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ApiVersion(&quot;2.0&quot;)]</span><br></pre></td></tr></table></figure>
<p>TodoController.csä¹Ÿæ˜¯ä¸€æ¨£å–”ï¼Œå°±ä¸ç¤ºç¯„äº†ã€‚</p>
<p>4.å˜—è©¦çœ‹çœ‹</p>
<img src="/2021/10/19/C-MVC-API%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/demo.gif" class="">


<h3 id="ç¸½çµ"><a href="#ç¸½çµ" class="headerlink" title="ç¸½çµ"></a>ç¸½çµ</h3><p>åŸæœ¬å¾ˆé›£çš„äº‹æƒ…ï¼Œç«Ÿç„¶å¯ä»¥å¦‚æ­¤ç°¡å–®è§£æ±º!æ„Ÿå‹•!<br>å†ä¾†å°±æ˜¯è€ƒé©—DBè¦åŠƒäº†ï¼Œå› ç‚ºå¦‚æœè¦å‘ä¸‹å…¼å®¹è®Šæˆåªèƒ½å¢ä¸èƒ½åˆªã€‚<br>ä½†é€šå¸¸æˆ‘å€‘èƒ½åœ¨ä¸Šèˆ‡ä¸‹ç‰ˆé–“å…ˆé™¤éŒ¯ï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šä¸æœƒæœ‰å¤ªå¤§å•é¡Œã€‚</p>
<p>è€ŒLINQå¼·å‹åˆ¥å¥½è™•å°±ä¾†äº†ï¼Œå› ç‚ºæ˜¯é€éModelå­˜å–çš„é—œä¿‚ï¼Œæ‰€ä»¥èƒ½å¤ æœ‰æ•ˆé¿å…è¦æ ¼éŒ¯èª¤ã€‚</p>
<p>è€Œç¶²å€ç”¨v1.0ã€v2.0â€¦åŸå› åœ¨Getæ™‚ç€è¦½å™¨åªèƒ½ç”¨ç¶²å€ï¼Œæ‰€ä»¥æ˜¯æœ€æ–¹ä¾¿çš„æ–¹å¼ã€‚<br>ç•¶ç„¶ä¹Ÿèƒ½å¤ æ”¹æ”¾åœ¨headerã€æˆ–ç”¨?api=1.0çš„åšæ³•ã€‚</p>
<p>æœ€å¾Œé™„ä¸Šå®Œæ•´ç¨‹å¼ç¢¼:<br><a target="_blank" rel="noopener" href="https://github.com/yuhsiang237/ASP.NET-Core-RESTfulAPI-API-Version-Control">https://github.com/yuhsiang237/ASP.NET-Core-RESTfulAPI-API-Version-Control</a></p>
<p>å†ä¾†å°±æ˜¯æ·»åŠ Swagger:<br> <a href="/2021/10/26/C-MVC-Web-API%E5%A2%9E%E5%8A%A0Swagger/" title="[Day23] C# MVC Web APIç‰ˆæœ¬å¢åŠ Swagger - C#&amp;AspNetCore">[Day23] C# MVC Web APIç‰ˆæœ¬å¢åŠ Swagger - C#&amp;AspNetCore</a></p>
<p>é¡å¤–è£œå……:<br>è‡³æ–¼Controllerå¤šç‰ˆæœ¬é‚£Modelå‘¢?<br>å› ç‚ºå‘ä¸‹å…¼å®¹ï¼Œå¯èƒ½æœƒå›å‚³ä¸åŒç‰ˆçš„Model<br>é€™æ™‚å°±å¯ä»¥ä½¿ç”¨ç¹¼æ‰¿è·Ÿè¦†å¯«!<br>å¦‚1.1ç¹¼æ‰¿1.0:ModelV1_1:ModelV1_0<br>ä¹‹å¾Œæ·»åŠ å±¬æ€§è·Ÿè¦†å¯«æ–¹æ³•<br>è€Œä¸»è¦å°±æ˜¯é¿å…è³‡æ–™åº«ç•°å‹•å¤ªå¤§ï¼Œå°±å¯ä»¥é¿å…break changeé€ æˆä¸ç›¸å®¹ã€‚</p>
<p><strong>åƒè€ƒè³‡æ–™</strong><br><a target="_blank" rel="noopener" href="https://dotblogs.com.tw/rainmaker/2017/03/12/130759">https://dotblogs.com.tw/rainmaker/2017/03/12/130759</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yuhsiang237.github.io/2021/10/19/C-MVC-API%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/" data-id="cme6kwo09000rgalj7kq5fv2s" data-title="[Day22] C# MVC APIç‰ˆæœ¬æ§åˆ¶ - C#&amp;AspNetCore" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-C-MVC-RESTful-API-ä¸‹-å¯¦ä½œRESTful-API" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/10/18/C-MVC-RESTful-API-%E4%B8%8B-%E5%AF%A6%E4%BD%9CRESTful-API/" class="article-date">
  <time class="dt-published" datetime="2021-10-18T11:59:32.000Z" itemprop="datePublished">2021-10-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Code/">Code</a>â–º<a class="article-category-link" href="/categories/Code/C/">C#</a>â–º<a class="article-category-link" href="/categories/Framework/">Framework</a>â–º<a class="article-category-link" href="/categories/Framework/AspNetCore-API/">AspNetCore API</a>â–º<a class="article-category-link" href="/categories/Topic/">Topic</a>â–º<a class="article-category-link" href="/categories/Topic/2021-C-AspNetCore-Challenge/">2021 C# AspNetCore Challenge</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/10/18/C-MVC-RESTful-API-%E4%B8%8B-%E5%AF%A6%E4%BD%9CRESTful-API/">[Day21] C# MVC RESTful API (ä¸‹) å¯¦ä½œRESTful API - C#&amp;AspNetCore</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>åœ¨ä¸Šå›ä¸­æˆ‘å€‘ä»‹ç´¹äº† <a href="/2021/10/17/C-MVC-RESTful-API-%E4%B8%AD-%E5%BB%BA%E7%AB%8BAPI%E5%B0%88%E6%A1%88/" title="[Day20] C# MVC RESTful API (ä¸­) å»ºç«‹APIå°ˆæ¡ˆ - C#&amp;AspNetCore">[Day20] C# MVC RESTful API (ä¸­) å»ºç«‹APIå°ˆæ¡ˆ - C#&amp;AspNetCore</a> ï¼Œæˆ‘å€‘åœ¨åŸæœ¬çš„MVCå°ˆæ¡ˆä¸­åŠ å…¥äº†WEB APIå°ˆæ¡ˆã€‚</p>
<p>è€Œé€™å›å°‡æœƒæ’°å¯«RESTful API!<br>æœ¬æ–‡æœƒä»¥:<a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-tw/aspnet/core/tutorials/first-web-api?view=aspnetcore-3.1&amp;tabs=visual-studio">https://docs.microsoft.com/zh-tw/aspnet/core/tutorials/first-web-api?view=aspnetcore-3.1&amp;tabs=visual-studio</a> æä¾›çš„ç¯„ä¾‹ä½œç‚ºå¯¦ä½œä¾æ“šã€‚</p>
<h3 id="RESTful-APIè¦æ ¼"><a href="#RESTful-APIè¦æ ¼" class="headerlink" title="RESTful APIè¦æ ¼"></a>RESTful APIè¦æ ¼</h3><table>
<th>æ–¹æ³•</th>
<th>ç¶²å€</th>
<th>æè¿°</th>
<th>è¦æ±‚æ–‡æœ¬</th>
<th>å›æ‡‰æ–‡æœ¬</th>
<tr>
<td>GET</td>
<td><code>/api/todo</code></td>
<td>å–å¾—æ‰€æœ‰å¾…è¾¦äº‹é …</td>
<td>ç„¡</td>
<td>å¾…è¾¦äº‹é …é™£åˆ—</td>
</tr>
<tr>
<td>GET</td>
<td><code>/api/todo/&#123;id&#125;</code></td>
<td>ä¾è­˜åˆ¥ç¢¼å–å¾—å¾…è¾¦äº‹é …</td>
<td>ç„¡</td>
<td>å¾…è¾¦äº‹é …</td>
</tr>
<tr>
<td>POST</td>
<td><code>/api/todo</code></td>
<td>æ–°å¢å¾…è¾¦äº‹é …</td>
<td>å¾…è¾¦äº‹é …</td>
<td>å¾…è¾¦äº‹é …</td>
</tr>
<tr>
<td>PUT</td>
<td><code>/api/todo/&#123;id&#125;</code></td>
<td>æ›´æ–°ç¾æœ‰çš„å¾…è¾¦äº‹é …</td>
<td>å¾…è¾¦äº‹é …</td>
<td>å¾…è¾¦äº‹é …</td>
</tr>
<tr>
<td>DELETE</td>
<td><code>/api/todo/&#123;id&#125;</code></td>
<td>åˆªé™¤å¾…è¾¦äº‹é …</td>
<td>ç„¡</td>
<td>å¾…è¾¦äº‹é …</td>
</tr>
<!-- <tr>
<td>POST</td>
<td><code>/api/todo/batch</code></td>
<td>æ‰¹æ¬¡è™•ç†å¾…è¾¦äº‹é …ï¼Œå¯æ‰¹æ¬¡æ–°å¢ã€åˆªé™¤ã€ç·¨è¼¯</td>
<td>æ‰¹æ¬¡å‹•ä½œã€å¾…è¾¦äº‹é …é™£åˆ—</td>
<td>æ‰¹æ¬¡å‹•ä½œã€å¾…è¾¦äº‹é …é™£åˆ—</td>
</tr> -->
<tr>
</table>


<h3 id="å¯¦ä½œRESTful-API"><a href="#å¯¦ä½œRESTful-API" class="headerlink" title="å¯¦ä½œRESTful API"></a>å¯¦ä½œRESTful API</h3><p>å…ˆå®‰è£åŸºæœ¬è³‡æ–™åº«å¥—ä»¶<br>1.Microsoft.EntityFrameworkCore</p>
<img src="/2021/10/18/C-MVC-RESTful-API-%E4%B8%8B-%E5%AF%A6%E4%BD%9CRESTful-API/1.png" class="">
<p>2.Microsoft.EntityFrameworkCore.SqlServer</p>
<img src="/2021/10/18/C-MVC-RESTful-API-%E4%B8%8B-%E5%AF%A6%E4%BD%9CRESTful-API/2.png" class="">
<p>3.Microsoft.EntityFrameworkCore.Tools</p>
<img src="/2021/10/18/C-MVC-RESTful-API-%E4%B8%8B-%E5%AF%A6%E4%BD%9CRESTful-API/3.png" class="">
<p>4.ä½¿ç”¨DB First</p>
<img src="/2021/10/18/C-MVC-RESTful-API-%E4%B8%8B-%E5%AF%A6%E4%BD%9CRESTful-API/4.png" class="">

<img src="/2021/10/18/C-MVC-RESTful-API-%E4%B8%8B-%E5%AF%A6%E4%BD%9CRESTful-API/5.png" class="">

<p>ç”¨<code>Scaffold-DbContext</code>æŒ‡ä»¤ï¼Œä¾†é‚„åŸTodoDBè³‡æ–™åº«çš„Models</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Scaffold-DbContext &quot;Server=.\SQLExpress;Database=TodoDB;Trusted_Connection=True;&quot; Microsoft.EntityFrameworkCore.SqlServer -OutputDir Models</span><br></pre></td></tr></table></figure>
<p>åŸ·è¡Œç•«é¢:</p>
<img src="/2021/10/18/C-MVC-RESTful-API-%E4%B8%8B-%E5%AF%A6%E4%BD%9CRESTful-API/6.png" class="">
<p>åŸ·è¡Œå¾Œ:</p>
<img src="/2021/10/18/C-MVC-RESTful-API-%E4%B8%8B-%E5%AF%A6%E4%BD%9CRESTful-API/7.png" class="">

<p>5.Startup.cså¢åŠ è³‡æ–™åº«é…ç½®</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// This method gets called by the runtime. Use this method to add services to the container.</span><br><span class="line">    public void ConfigureServices(IServiceCollection services)</span><br><span class="line">    &#123;</span><br><span class="line">        services.AddControllers();</span><br><span class="line">        // è³‡æ–™åº«é…ç½®</span><br><span class="line">        var connection = @&quot;Server=.\SQLExpress;Database=TodoDB;Trusted_Connection=True;ConnectRetryCount=0&quot;;</span><br><span class="line">        services.AddDbContext&lt;TodoDBContext&gt;(options =&gt; options.UseSqlServer(connection));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>6.æ’°å¯«RESTful API</p>
<p><strong>~/Controllers/TodoController.cs</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections.Generic;</span><br><span class="line">using System.Linq;</span><br><span class="line">using System.Threading.Tasks;</span><br><span class="line">using Microsoft.AspNetCore.Mvc;</span><br><span class="line">using Microsoft.EntityFrameworkCore;</span><br><span class="line">using TodoAPI.Models;</span><br><span class="line"></span><br><span class="line">namespace TodoAPI.Controllers</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    [Route(&quot;api/[controller]&quot;)]</span><br><span class="line">    [ApiController]</span><br><span class="line">    public class TodoController : ControllerBase</span><br><span class="line">    &#123;</span><br><span class="line">        private readonly TodoDBContext _context;</span><br><span class="line">        public TodoController(TodoDBContext context)</span><br><span class="line">        &#123;</span><br><span class="line">            _context = context;</span><br><span class="line">        &#125;</span><br><span class="line">        [HttpGet]</span><br><span class="line">        public async Task&lt;ActionResult&lt;IEnumerable&lt;Todo&gt;&gt;&gt; GetTodos()</span><br><span class="line">        &#123;</span><br><span class="line">            return await _context.Todos.Where(x=&gt;x.IsDeleted != 1).ToListAsync();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        [HttpGet(&quot;&#123;id&#125;&quot;)]</span><br><span class="line">        public async Task&lt;ActionResult&lt;Todo&gt;&gt; GetTodo(int id)</span><br><span class="line">        &#123;</span><br><span class="line">            var obj = await _context.Todos.FindAsync(id);</span><br><span class="line"></span><br><span class="line">            if (obj.IsDeleted == 1)</span><br><span class="line">            &#123;</span><br><span class="line">                return NotFound();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            return obj;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        [HttpPut(&quot;&#123;id&#125;&quot;)]</span><br><span class="line">        public async Task&lt;ActionResult&lt;Todo&gt;&gt; PutTodo(int id, Todo newObj)</span><br><span class="line">        &#123;</span><br><span class="line">            if (id != newObj.Id)</span><br><span class="line">            &#123;</span><br><span class="line">                return BadRequest();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            var obj = await _context.Todos.FindAsync(id);</span><br><span class="line"></span><br><span class="line">            if(obj.IsDeleted == 1)</span><br><span class="line">            &#123;</span><br><span class="line">                return NotFound();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            obj.IsComplete = newObj.IsComplete;</span><br><span class="line">            obj.Name = newObj.Name;</span><br><span class="line"></span><br><span class="line">            try</span><br><span class="line">            &#123;</span><br><span class="line">                await _context.SaveChangesAsync();</span><br><span class="line">            &#125;</span><br><span class="line">            catch (DbUpdateConcurrencyException)</span><br><span class="line">            &#123;</span><br><span class="line">                if (!TodoExists(id))</span><br><span class="line">                &#123;</span><br><span class="line">                    return NotFound();</span><br><span class="line">                &#125;</span><br><span class="line">                else</span><br><span class="line">                &#123;</span><br><span class="line">                    throw;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            return obj;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        [HttpPost]</span><br><span class="line">        public async Task&lt;ActionResult&lt;Todo&gt;&gt; PostTodo(Todo newObj)</span><br><span class="line">        &#123;</span><br><span class="line">            var obj = new Todo</span><br><span class="line">            &#123;</span><br><span class="line">                Name = newObj.Name,</span><br><span class="line">                IsComplete = 0,</span><br><span class="line">                IsDeleted = 0</span><br><span class="line">            &#125;;</span><br><span class="line">            _context.Todos.Add(obj); </span><br><span class="line">            await _context.SaveChangesAsync();</span><br><span class="line"></span><br><span class="line">            return CreatedAtAction(nameof(GetTodo), new &#123; id = obj.Id &#125;, obj);</span><br><span class="line">        &#125;</span><br><span class="line">        [HttpDelete(&quot;&#123;id&#125;&quot;)]</span><br><span class="line">        public async Task&lt;ActionResult&lt;Todo&gt;&gt; DeleteTodo(int id)</span><br><span class="line">        &#123;</span><br><span class="line">            var obj = await _context.Todos.FindAsync(id);</span><br><span class="line">            obj.IsDeleted = 1;</span><br><span class="line"></span><br><span class="line">            if (obj == null)</span><br><span class="line">            &#123;</span><br><span class="line">                return NotFound();</span><br><span class="line">            &#125;</span><br><span class="line">            try</span><br><span class="line">            &#123;</span><br><span class="line">                await _context.SaveChangesAsync();</span><br><span class="line">            &#125;</span><br><span class="line">            catch (DbUpdateConcurrencyException)</span><br><span class="line">            &#123;</span><br><span class="line">                if (!TodoExists(id))</span><br><span class="line">                &#123;</span><br><span class="line">                    return NotFound();</span><br><span class="line">                &#125;</span><br><span class="line">                else</span><br><span class="line">                &#123;</span><br><span class="line">                    throw;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            return obj;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        private bool TodoExists(int id)</span><br><span class="line">        &#123;</span><br><span class="line">            return _context.Todos.Any(e =&gt; e.Id == id);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>7.ç”¨postmanæ¸¬è©¦</p>
<img src="/2021/10/18/C-MVC-RESTful-API-%E4%B8%8B-%E5%AF%A6%E4%BD%9CRESTful-API/demo.gif" class="">


<p>å°ˆæ¡ˆç¨‹å¼ç¢¼:<br><a target="_blank" rel="noopener" href="https://github.com/yuhsiang237/ASP.NET-Core-RESTfulAPI">https://github.com/yuhsiang237/ASP.NET-Core-RESTfulAPI</a></p>
<h3 id="ç¸½çµ"><a href="#ç¸½çµ" class="headerlink" title="ç¸½çµ"></a>ç¸½çµ</h3><p>é€™æ¨£å°±å®Œæˆäº†RESTful APIäº†!</p>
<p><strong>åƒè€ƒè³‡æ–™</strong><br><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-tw/aspnet/core/tutorials/first-web-api?view=aspnetcore-3.1&amp;tabs=visual-studio">https://docs.microsoft.com/zh-tw/aspnet/core/tutorials/first-web-api?view=aspnetcore-3.1&amp;tabs=visual-studio</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yuhsiang237.github.io/2021/10/18/C-MVC-RESTful-API-%E4%B8%8B-%E5%AF%A6%E4%BD%9CRESTful-API/" data-id="cme6kwo0l001dgalj34bk9aax" data-title="[Day21] C# MVC RESTful API (ä¸‹) å¯¦ä½œRESTful API - C#&amp;AspNetCore" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-C-MVC-RESTful-API-ä¸­-å»ºç«‹APIå°ˆæ¡ˆ" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/10/17/C-MVC-RESTful-API-%E4%B8%AD-%E5%BB%BA%E7%AB%8BAPI%E5%B0%88%E6%A1%88/" class="article-date">
  <time class="dt-published" datetime="2021-10-17T02:16:48.000Z" itemprop="datePublished">2021-10-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Code/">Code</a>â–º<a class="article-category-link" href="/categories/Code/C/">C#</a>â–º<a class="article-category-link" href="/categories/Framework/">Framework</a>â–º<a class="article-category-link" href="/categories/Framework/AspNetCore-API/">AspNetCore API</a>â–º<a class="article-category-link" href="/categories/Topic/">Topic</a>â–º<a class="article-category-link" href="/categories/Topic/2021-C-AspNetCore-Challenge/">2021 C# AspNetCore Challenge</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/10/17/C-MVC-RESTful-API-%E4%B8%AD-%E5%BB%BA%E7%AB%8BAPI%E5%B0%88%E6%A1%88/">[Day20] C# MVC RESTful API (ä¸­) å»ºç«‹APIå°ˆæ¡ˆ - C#&amp;AspNetCore</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>åœ¨ä¸Šå›ä¸­æˆ‘å€‘ä»‹ç´¹äº† <a href="/2021/10/16/C-MVC-RESTful-API-%E4%B8%8A-RESTful-%E5%9F%BA%E7%A4%8E%E7%9F%A5%E8%AD%98/" title="[Day19] C# MVC RESTful API (ä¸Š) RESTful åŸºç¤çŸ¥è­˜ - C#&amp;AspNetCore">[Day19] C# MVC RESTful API (ä¸Š) RESTful åŸºç¤çŸ¥è­˜ - C#&amp;AspNetCore</a> ï¼ŒçŸ¥é“äº†RESTful APIçš„åŸºç¤çŸ¥è­˜ã€‚</p>
<p>é€™å›å…ˆäº†è§£å¦‚ä½•åœ¨ç¾æœ‰çš„MVCå°ˆæ¡ˆä¸­åŠ å…¥APIå°ˆæ¡ˆå§!</p>
<h3 id="MVCå°ˆæ¡ˆåŠ å…¥WEB-APIå°ˆæ¡ˆ"><a href="#MVCå°ˆæ¡ˆåŠ å…¥WEB-APIå°ˆæ¡ˆ" class="headerlink" title="MVCå°ˆæ¡ˆåŠ å…¥WEB APIå°ˆæ¡ˆ"></a>MVCå°ˆæ¡ˆåŠ å…¥WEB APIå°ˆæ¡ˆ</h3><p>1.é€™æ˜¯ä¸€å€‹åŸæœ¬çš„MVCå°ˆæ¡ˆ</p>
<img src="/2021/10/17/C-MVC-RESTful-API-%E4%B8%AD-%E5%BB%BA%E7%AB%8BAPI%E5%B0%88%E6%A1%88/1.png" class="">
<p>2.å°Solutioné»å³éµ&gt;New Project</p>
<img src="/2021/10/17/C-MVC-RESTful-API-%E4%B8%AD-%E5%BB%BA%E7%AB%8BAPI%E5%B0%88%E6%A1%88/2.png" class="">
<p>3.é¸ASP.NET Core Web API</p>
<img src="/2021/10/17/C-MVC-RESTful-API-%E4%B8%AD-%E5%BB%BA%E7%AB%8BAPI%E5%B0%88%E6%A1%88/3.png" class="">
<p>4.å»ºç«‹APIå°ˆæ¡ˆåç¨±ï¼Œé€™å–åTodoAPI</p>
<img src="/2021/10/17/C-MVC-RESTful-API-%E4%B8%AD-%E5%BB%BA%E7%AB%8BAPI%E5%B0%88%E6%A1%88/4.png" class="">
<p>5.ç‰ˆæœ¬æˆ‘é¸.net core 3.1é•·æœŸç©©å®šç‰ˆæœ¬</p>
<img src="/2021/10/17/C-MVC-RESTful-API-%E4%B8%AD-%E5%BB%BA%E7%AB%8BAPI%E5%B0%88%E6%A1%88/5.png" class="">
<p>6.é€™æ™‚å°±æœƒæœ‰ä¸€å€‹å°ˆæ¡ˆTodoAPIåŠ å…¥ç¾æœ‰çš„Solutionäº†ã€‚</p>
<img src="/2021/10/17/C-MVC-RESTful-API-%E4%B8%AD-%E5%BB%BA%E7%AB%8BAPI%E5%B0%88%E6%A1%88/6.png" class="">
<p>7.åˆ‡æ›é‹è¡Œçš„å°ˆæ¡ˆ</p>
<img src="/2021/10/17/C-MVC-RESTful-API-%E4%B8%AD-%E5%BB%BA%E7%AB%8BAPI%E5%B0%88%E6%A1%88/7.png" class="">
<p>8.åŸ·è¡Œï¼Œå¯å‡ºç¾é è¨­çš„ç¯„ä¾‹APIçµæœ</p>
<img src="/2021/10/17/C-MVC-RESTful-API-%E4%B8%AD-%E5%BB%BA%E7%AB%8BAPI%E5%B0%88%E6%A1%88/8.png" class="">

<h3 id="ç¸½çµ"><a href="#ç¸½çµ" class="headerlink" title="ç¸½çµ"></a>ç¸½çµ</h3><p>åœ¨é€™ç¯‡ä¸­ä¸»è¦æ˜¯æ¢è¨å¦‚ä½•åœ¨ä¸€å€‹æœ‰MVCå°ˆæ¡ˆçš„ç‹€æ³ä¸‹å†å»åŠ ä¸€å€‹Web APIæœå‹™ã€‚<br>è€Œåœ¨ä¸‹ç¯‡æˆ‘å€‘å°±è¦ç”¨é€™ç¯„ä¾‹å¯¦ä½œRESTful APIã€‚</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yuhsiang237.github.io/2021/10/17/C-MVC-RESTful-API-%E4%B8%AD-%E5%BB%BA%E7%AB%8BAPI%E5%B0%88%E6%A1%88/" data-id="cme6kwo0m001fgalj2xc94n0m" data-title="[Day20] C# MVC RESTful API (ä¸­) å»ºç«‹APIå°ˆæ¡ˆ - C#&amp;AspNetCore" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-C-MVC-RESTful-API-ä¸Š-RESTful-åŸºç¤çŸ¥è­˜" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/10/16/C-MVC-RESTful-API-%E4%B8%8A-RESTful-%E5%9F%BA%E7%A4%8E%E7%9F%A5%E8%AD%98/" class="article-date">
  <time class="dt-published" datetime="2021-10-16T02:16:48.000Z" itemprop="datePublished">2021-10-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Code/">Code</a>â–º<a class="article-category-link" href="/categories/Code/C/">C#</a>â–º<a class="article-category-link" href="/categories/Framework/">Framework</a>â–º<a class="article-category-link" href="/categories/Framework/AspNetCore-API/">AspNetCore API</a>â–º<a class="article-category-link" href="/categories/Topic/">Topic</a>â–º<a class="article-category-link" href="/categories/Topic/2021-C-AspNetCore-Challenge/">2021 C# AspNetCore Challenge</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/10/16/C-MVC-RESTful-API-%E4%B8%8A-RESTful-%E5%9F%BA%E7%A4%8E%E7%9F%A5%E8%AD%98/">[Day19] C# MVC RESTful API (ä¸Š) RESTful åŸºç¤çŸ¥è­˜ - C#&amp;AspNetCore</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>åœ¨ä¸Šå›ä¸­æˆ‘å€‘ä»‹ç´¹äº† <a href="/2021/10/15/C-MVC%E5%B0%88%E6%A1%88%E4%B8%AD%E6%92%B0%E5%AF%ABAPI/" title="[Day18] C# MVCå°ˆæ¡ˆä¸­æ’°å¯«API - C#&amp;AspNetCore">[Day18] C# MVCå°ˆæ¡ˆä¸­æ’°å¯«API - C#&amp;AspNetCore</a> ï¼Œèƒ½åœ¨MVCå°ˆæ¡ˆä¸­æ’°å¯«APIäº†ã€‚</p>
<p>è€Œé€™å›ï¼Œæ¢è¨Web APIï¼Œä»–æœƒé–‹çµ¦APP(iOSæˆ–Android)ã€å‰ç«¯ç¶²ç«™(Reactæˆ–Vue)é€™ç¨®ä¸»å¾å¼åˆ†é›¢çš„æ¶æ§‹ã€‚<br>ç‚ºäº†èƒ½é–‹å‡ºæ¯”è¼ƒå…¬ç‰ˆçš„APIï¼Œå°±å¿…é ˆå…ˆäº†è§£RESTfulçš„æ ¸å¿ƒæ¦‚å¿µã€‚<br>(é€™æ¬¡å˜—è©¦ä»¥ç¿»åŸæ–‡çš„æ–¹å¼æ’°å¯«ï¼Œå¾€å¾Œéƒ½ç›¡å¯èƒ½ä»¥åŸæ–‡ç‚ºä¸»)</p>
<h3 id="RESTful-ä»‹ç´¹"><a href="#RESTful-ä»‹ç´¹" class="headerlink" title="RESTful ä»‹ç´¹"></a>RESTful ä»‹ç´¹</h3><p>Representational state transfer (REST) is a software architectural style that was created to guide the design and development of the architecture for the World Wide Web.REST defines a set of constraints for how the architecture of an Internet-scale distributed hypermedia system, such as the Web, should behave.The REST architectural style emphasises the scalability of interactions between components, uniform interfaces, independent deployment of components, and the creation of a layered architecture to facilitate caching components to reduce user-perceived latency, enforce security, and encapsulate legacy systems.</p>
<p>RESTæ˜¯ä¸€ç¨®è»Ÿé«”æ¶æ§‹çš„é¢¨æ ¼ï¼Œè¢«å‰µç«‹ä¾†å¼•å°ç¶²ç«™è¨­è¨ˆã€é–‹ç™¼æ¶æ§‹ã€‚ä¸¦ä¸”å®šç¾©äº†ç´„æŸæ¶æ§‹ï¼Œåƒæ˜¯åœ¨ç¶²ç«™ä¸Šçš„è¡Œç‚ºã€‚<br>æ¶æ§‹ä¸Šå¼·èª¿åœ¨çµ„ä»¶é–“çš„å¯æ“´å±•æ€§ã€çµ±ä¸€çš„æ¥å£ã€ç¨ç«‹éƒ¨ç½²çš„çµ„å»ºã€å‰µå»ºåˆ†å±¤æ¶æ§‹ä»¥å»ºç«‹å¿«å–æ¸›å°‘ç”¨æˆ¶å»¶é²ã€å¼·åŒ–å®‰å…¨æ€§ã€å°è£è€èˆŠç³»çµ±ã€‚</p>
<p>The REST architectural style is designed for network-based applications, specifically client-server applications. But more than that, it is designed for Internet-scale usage, so the coupling between the user agent (client) and the origin server must be as lightweight (loose) as possible to facilitate large-scale adoption. </p>
<p>è¢«ç”¨ä¾†è™•ç†ç¶²è·¯åŸºç¤çš„æ‡‰ç”¨ï¼Œå…·é«”ä¾†èªªåœ¨ä¸»å¾å¼æ¶æ§‹çš„æ‡‰ç”¨ã€‚ä½†ä¸æ­¢å¦‚æ­¤ï¼Œä¹Ÿè¢«ç”¨ä¾†ä½œç‚ºäº’è¯ç¶²çš„ä½¿ç”¨è€Œè¨­è¨ˆï¼Œå› æ­¤å®¢æˆ¶ç«¯ã€ä¸»æ©Ÿç«¯è€¦åˆåº¦ç›¡å¯èƒ½å¯èƒ½è¼•é‡ç´šï¼Œä»¥ä½¿åœ¨å¤§è¦æ¨¡æ™‚å®¹æ˜“æ¡ç”¨ã€‚</p>
<p>è€¦åˆåº¦(Coupling):coupling is the degree of interdependence between software modulesã€‚Coupling is usually contrasted with cohesion. Low coupling often correlates with high cohesion,<br>è€¦åˆåº¦è¡¨ç¤ºæ¨¡çµ„é–“ç›¸äº’ä¾è³´çš„ç¨‹åº¦ã€‚<br>è€¦åˆé€šå¸¸èˆ‡å…§èšç›¸é—œï¼Œä½è€¦åˆé€šå¸¸èˆ‡é«˜å…§èšç›¸é—œã€‚<br>å¦‚ä¸‹çš„(a)å°±æ˜¯æ¯”è¼ƒå¥½çš„çµæ§‹ï¼Œç›¡é‡å°è£å¥½ï¼Œé–‹ç°¡å–®çš„æ¥å£å‡ºä¾†ï¼Œä½†ç¾å¯¦æƒ…æ³ä¸‹ä¸å¯èƒ½åšåˆ°ç†æƒ³ã€‚<br>ä»¥æˆ‘è‡ªèº«ç¶“é©—ï¼Œæ›¾ç¶­è­·é‚£ç¨®(b)çš„ç‹€æ³ï¼Œè¦ææ‡‚Aé‚„å¾—å…ˆå»ææ‡‚Båœ¨å¹¹å˜›ï¼Œè¿½äº†8å±¤ä¹‹å¤šã€‚æ­¤å¤–ï¼Œç²¾ç°¡çš„ç¨‹å¼ç¢¼ä¸ç­‰æ–¼é«˜å…§èšï¼Œæœ‰æ™‚æ›´å¤šçš„æ˜¯<a target="_blank" rel="noopener" href="https://lenchen.medium.com/%E5%BF%8D%E8%80%85%E7%A8%8B%E5%BC%8F%E7%A2%BC-ninja-code-cc5e4a70bafc">å¿è€…ç¨‹å¼ç¢¼ï¼ˆNinja Codeï¼‰</a>ã€‚</p>
<img src="/2021/10/16/C-MVC-RESTful-API-%E4%B8%8A-RESTful-%E5%9F%BA%E7%A4%8E%E7%9F%A5%E8%AD%98/1.png" class="">

<h3 id="RESTful-6å€‹é™åˆ¶"><a href="#RESTful-6å€‹é™åˆ¶" class="headerlink" title="RESTful 6å€‹é™åˆ¶"></a>RESTful 6å€‹é™åˆ¶</h3><ol>
<li><p><strong>ä¸»å¾å¼æ¶æ§‹(Clientâ€“server architecture)</strong><br> The client-server design pattern enforces the principle of separation of concerns<br>ä¸»å¾å¼è¨­è¨ˆæ¨¡å¼å¼·åˆ¶é—œæ³¨é»åˆ†é›¢çš„åŸå‰‡<br>separating the user interface concerns from the data storage concerns. Portability of the user interface is thus improved.<br>åˆ†é›¢ç”¨æˆ¶ä»‹é¢èˆ‡è³‡æ–™å„²å­˜å•é¡Œã€‚ç”¨æˆ¶ä»‹é¢çš„å¯æ”œæ€§å› æ­¤è¢«æ”¹å–„ã€‚</p>
</li>
<li><p><strong>ç„¡ç‹€æ…‹(Statelessness)</strong><br> In computing, a stateless protocol is a communications protocol in which no session information is retained by the receiver, usually a server. Relevant session data is sent to the receiver by the client in such a way that every packet of information transferred can be understood in isolation, without context information from previous packets in the session.<br> ç„¡ç‹€æ…‹æ˜¯ç¨®æºé€šçš„å”å®šï¼Œæ²’æœ‰sessionè¢«æ¥æ”¶è€…ä¿ç•™ï¼Œé€šå¸¸æ¥æ”¶è€…æ˜¯ä¼ºæœå™¨ç«¯ã€‚å®¢æˆ¶ç«¯å°‡è³‡è¨Šé€çµ¦æ¥æ”¶è€…ï¼Œæ¯å€‹è³‡è¨Šå¯ä»¥ç¨ç«‹é›¢è§£ï¼Œä¸ç”¨è—‰ç”±ç†è§£ä¸Šä¸‹æ–‡æ‰èƒ½çŸ¥é“è¨Šæ¯ã€‚</p>
</li>
<li><p><strong>å¿«å–(Cacheability)</strong><br> As on the World Wide Web, clients and intermediaries can cache responses. Responses must, implicitly or explicitly, define themselves as either cacheable or non-cacheable to prevent clients from providing stale or inappropriate data in response to further requests. Well-managed caching partially or completely eliminates some clientâ€“server interactions, further improving scalability and performance.<br> åœ¨ç¶²è·¯ä¸Šå®¢æˆ¶ã€ä¸­é–“äººå¯ä»¥å¿«å–çµæœï¼Œå¯è‡ªè¡Œå®šç¾©æ˜¯å¦è©²ç·©å­˜çš„è³‡æ–™ã€‚è‰¯å¥½çš„å¿«å–èƒ½æ”¹å–„æ•ˆèƒ½ã€‚</p>
</li>
</ol>
<ol start="4">
<li><p><strong>åˆ†å±¤ç³»çµ±(Layered system)</strong><br> A client cannot ordinarily tell whether it is connected directly to the end server or to an intermediary along the way.Adding security as a separate layer enforces security policies.<br> å®¢æˆ¶ç«¯ä¸èƒ½åˆ¤æ–·æ˜¯é€£çµåˆ°çµ‚ç«¯é‚„æ˜¯ä¸­ä»‹ã€‚èƒ½å¢åŠ å®‰å…¨æ€§åœ¨ç‰¹åˆ¥çš„å±¤ç´šå¼·åˆ¶ç‰¹å®šçš„å®‰å…¨æ”¿ç­–ã€‚</p>
</li>
<li><p><strong>æŒ‰éœ€æ±‚ç·¨ç¢¼(Code on demand) å¯é¸</strong><br> Servers can temporarily extend or customize the functionality of a client by transferring executable code: for example, compiled components such as Java applets, or client-side scripts such as JavaScript.<br> ä¼ºæœå™¨ç«¯å¯è‡¨æ™‚æ“´å……æˆ–å¯åŸ·è¡Œä»£ç¢¼çµ¦å®¢æˆ¶ç«¯ï¼Œå¦‚ï¼šå®¢æˆ¶ç«¯ä»£ç¢¼JavaScriptã€ç·¨è­¯å¾Œå…ƒä»¶Javaå°ç¨‹å¼ã€‚</p>
</li>
<li><p><strong>çµ±ä¸€æ¥å£(Uniform interface)</strong><br> The uniform interface constraint is fundamental to the design of any RESTful system<br> çµ±ä¸€æ¥å£ç´„æŸæ˜¯restfulç³»çµ±çš„åŸºç¤ã€‚<br> ç‚ºä»¥ä¸‹å››é»:</p>
<ol>
<li><strong>è«‹æ±‚ä¸­åŒ…å«è³‡æºçš„ IDï¼ˆResource identification in requestsï¼‰</strong><br> æ±‚ä¸­åŒ…å«äº†å„ç¨®ç¨ç«‹è³‡æºçš„æ¨™è­˜ï¼Œä¾‹å¦‚ï¼Œåœ¨Webæœå‹™ä¸­çš„URIã€‚è³‡æºæœ¬èº«å’Œå‚³é€çµ¦å®¢æˆ¶ç«¯çš„æ¨™è­˜æ˜¯ç¨ç«‹ã€‚ä¾‹å¦‚ï¼Œä¼ºæœå™¨å¯ä»¥å°‡è‡ªèº«çš„è³‡æ–™åº«è³‡è¨Šä»¥HTMLã€XMLæˆ–è€…JSONçš„æ–¹å¼å‚³é€çµ¦å®¢æˆ¶ç«¯ï¼Œä½†æ˜¯é€™äº›å¯èƒ½éƒ½ä¸æ˜¯ä¼ºæœå™¨çš„å…§éƒ¨è¨˜éŒ„æ–¹å¼ã€‚</li>
<li><strong>è³‡æºé€šéæ¨™è­˜ä¾†æ“ä½œï¼ˆResource manipulation through representationsï¼‰</strong><br>ç•¶å®¢æˆ¶ç«¯æ“æœ‰ä¸€å€‹è³‡æºçš„æ¨™è­˜ï¼ŒåŒ…æ‹¬é™„å¸¶çš„å…ƒè³‡æ–™ï¼Œå‰‡å®ƒå°±æœ‰è¶³å¤ çš„è³‡è¨Šä¾†åˆªé™¤é€™å€‹è³‡æºã€‚</li>
<li><strong>è¨Šæ¯çš„è‡ªæˆ‘æè¿°æ€§ï¼ˆSelf-descriptive messagesï¼‰</strong><br> æ¯å€‹è¨Šæ¯åŒ…å«è¶³å¤ è³‡è¨Šæè¿°å¦‚ä½•è™•ç†è¨Šæ¯ã€‚</li>
<li><strong>ç”¨è¶…åª’é«”é©…å‹•æ‡‰ç”¨ç‹€æ…‹ï¼ˆHypermedia as the engine of application state (HATEOAS)</strong><br> åŒä½¿ç”¨è€…å­˜å–Webä¼ºæœå™¨çš„Homeé é¢ç›¸ä¼¼ï¼Œç•¶ä¸€å€‹ REST å®¢æˆ¶ç«¯å­˜å–äº†æœ€åˆçš„RESTæ‡‰ç”¨çš„URIä¹‹å¾Œï¼ŒREST å®¢æˆ¶ç«¯æ‡‰è©²å¯ä»¥ä½¿ç”¨ä¼ºæœå™¨ç«¯æä¾›çš„é€£çµï¼Œå‹•æ…‹çš„ç™¼ç¾æ‰€æœ‰çš„å¯ç”¨çš„è³‡æºå’Œå¯åŸ·è¡Œçš„æ“ä½œã€‚</li>
</ol>
</li>
</ol>
<h3 id="RESTfulå„ªé»"><a href="#RESTfulå„ªé»" class="headerlink" title="RESTfulå„ªé»"></a>RESTfulå„ªé»</h3><ul>
<li>å¯æ›´é«˜æ•ˆåˆ©ç”¨å¿«å–ä¾†æé«˜å›æ‡‰é€Ÿåº¦</li>
<li>é€šè¨Šæœ¬èº«çš„ç„¡ç‹€æ…‹æ€§å¯ä»¥è®“ä¸åŒçš„ä¼ºæœå™¨çš„è™•ç†ä¸€ç³»åˆ—è«‹æ±‚ä¸­çš„ä¸åŒè«‹æ±‚ï¼Œæé«˜ä¼ºæœå™¨çš„æ“´å……æ€§</li>
<li>ç€è¦½å™¨å³å¯ä½œç‚ºå®¢æˆ¶ç«¯ï¼Œç°¡åŒ–è»Ÿé«”éœ€æ±‚</li>
<li>ç›¸å°æ–¼å…¶ä»–ç–ŠåŠ åœ¨HTTPå”å®šä¹‹ä¸Šçš„æ©Ÿåˆ¶ï¼ŒRESTçš„è»Ÿé«”ç›¸ä¾æ€§æ›´å°<br>ä¸éœ€è¦é¡å¤–çš„è³‡æºç™¼ç¾æ©Ÿåˆ¶</li>
<li>åœ¨è»Ÿé«”æŠ€è¡“æ¼”é€²ä¸­çš„é•·æœŸçš„ç›¸å®¹æ€§æ›´å¥½</li>
</ul>
<h3 id="HTTPè«‹æ±‚æ–¹æ³•åœ¨RESTful-APIä¸­çš„å…¸å‹æ‡‰ç”¨"><a href="#HTTPè«‹æ±‚æ–¹æ³•åœ¨RESTful-APIä¸­çš„å…¸å‹æ‡‰ç”¨" class="headerlink" title="HTTPè«‹æ±‚æ–¹æ³•åœ¨RESTful APIä¸­çš„å…¸å‹æ‡‰ç”¨"></a>HTTPè«‹æ±‚æ–¹æ³•åœ¨RESTful APIä¸­çš„å…¸å‹æ‡‰ç”¨</h3><table class="wikitable" border="1">
<tbody><tr>
<th>è³‡æº</th>
<th>GET</th>
<th>PUT</th>
<th>POST</th>
<th>DELETE
</th></tr>
<tr>
<th>ä¸€çµ„è³‡æºçš„URIï¼Œæ¯”å¦‚<code>https://example.com/resources</code>
</th>
<td><b>åˆ—å‡º</b>URIï¼Œä»¥åŠè©²è³‡æºçµ„ä¸­æ¯å€‹è³‡æºçš„è©³ç´°è³‡è¨Šï¼ˆå¾Œè€…å¯é¸ï¼‰ã€‚
</td>
<td>ä½¿ç”¨çµ¦å®šçš„ä¸€çµ„è³‡æº<b>æ›¿æ›</b>ç•¶å‰æ•´çµ„è³‡æºã€‚
</td>
<td>åœ¨æœ¬çµ„è³‡æºä¸­<b>å»ºç«‹/è¿½åŠ </b>ä¸€å€‹æ–°çš„è³‡æºã€‚è©²æ“ä½œå¾€å¾€è¿”å›æ–°è³‡æºçš„URLã€‚
</td>
<td><b>åˆªé™¤</b>æ•´çµ„è³‡æºã€‚
</td></tr>
<tr>
<th>å–®å€‹è³‡æºçš„URIï¼Œæ¯”å¦‚<code>https://example.com/resources/142</code>
</th>
<td><b>å–å¾—</b>æŒ‡å®šçš„è³‡æºçš„è©³ç´°è³‡è¨Šï¼Œæ ¼å¼å¯ä»¥è‡ªé¸ä¸€å€‹åˆé©çš„ç¶²è·¯åª’é«”é¡å‹ï¼ˆæ¯”å¦‚ï¼šXMLã€JSONç­‰ï¼‰
</td>
<td><b>æ›¿æ›/å»ºç«‹</b>æŒ‡å®šçš„è³‡æºã€‚ä¸¦å°‡å…¶è¿½åŠ åˆ°ç›¸æ‡‰çš„è³‡æºçµ„ä¸­ã€‚
</td>
<td>æŠŠæŒ‡å®šçš„è³‡æºç•¶åšä¸€å€‹è³‡æºçµ„ï¼Œä¸¦åœ¨å…¶ä¸‹<b>å»ºç«‹/è¿½åŠ </b>ä¸€å€‹æ–°çš„å…ƒç´ ï¼Œä½¿å…¶éš¸å±¬æ–¼ç•¶å‰è³‡æºã€‚
</td>
<td><b>åˆªé™¤</b>æŒ‡å®šçš„å…ƒç´ ã€‚
</td></tr></tbody></table>

<h3 id="RESTfulè¡ä¼¸å•é¡Œ"><a href="#RESTfulè¡ä¼¸å•é¡Œ" class="headerlink" title="RESTfulè¡ä¼¸å•é¡Œ"></a>RESTfulè¡ä¼¸å•é¡Œ</h3><ol>
<li><strong>RESTfulçš„æ‰¹é‡è™•ç†å•é¡Œï¼Œè¦ä¸€æ¬¡è™•ç†å¤šç­†è³‡æ–™</strong><br> RESTfulçµ¦å‡ºäº†è™•ç†å–®ç­†è³‡æ–™çš„æ–¹å¼ï¼Œå»æ²’å¤šä»‹ç´¹å¤šç­†ï¼Œå› æ­¤åƒè€ƒä»¥ä¸‹æ–‡ä»¶å¾Œç™¼ç¾å¯ä»¥ç”¨<code>example.com/resources/batch</code>çš„æ–¹å¼è™•ç†<br> <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/restful-api">https://www.npmjs.com/package/restful-api</a><br> <a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1575071">https://cloud.tencent.com/developer/article/1575071</a></li>
<li><strong>RESTfulçš„æ¬Šé™è¦åŠƒå•é¡Œï¼Œä»¥è³‡æºå¼ä¸å¥½ç®¡ç†</strong><br> å¾Œå°é€šå¸¸ä»¥Role Based Access Control (RBAC) å»è¦åŠƒæ¬Šé™ã€‚<br> è€ŒRESTfulæ˜¯ä»¥è³‡æº(Resources)ç‚ºåº•ï¼Œé€™æ™‚åˆ¤æ–·å“ªå€‹APIå…·æœ‰æŸæ¬Šé™å°±å¿…é ˆç‰¹åˆ¥åˆ¤æ–·æˆ–æ·»åŠ ã€‚å¦‚æ²’é™åˆ¶å¥½å¯èƒ½é€ æˆè³‡æ–™å¤šçµ¦çš„æ¼æ´ã€‚<br> å¦‚æœæ˜¯æˆ‘æœƒä»¥æ•æ„Ÿè³‡è¨Šç‚ºå¤§æ–¹å‘å»é™åˆ¶ã€‚</li>
<li><strong>RESTfulçš„å®¢æˆ¶ç«¯é‚è¼¯ï¼ŒéŒ¯åœ¨èª°èº«ä¸Š</strong><br> å› ç‚ºé—œæ³¨é»åˆ†é›¢ï¼Œæ‰€ä»¥é›£çŸ¥é“å®¢æˆ¶ç«¯å¦‚Android/iOSçš„ç¨‹å¼æœ‰å•é¡Œæ™‚æ˜¯è½åœ¨APIäººå“¡èº«ä¸Šé‚„æ˜¯å‰ç«¯èº«ä¸Šã€‚<br> æœ‰é»æˆ‘è³‡æ–™éƒ½çµ¦ä½ äº†ï¼Œä½ è‡ªå·±è™•ç†çš„æ„Ÿè¦ºã€‚</li>
</ol>
<h3 id="ç¸½çµ"><a href="#ç¸½çµ" class="headerlink" title="ç¸½çµ"></a>ç¸½çµ</h3><p>åœ¨é€™ç¯‡ä¸­æˆ‘å€‘ä¸»è¦æ¢è¨RESTfulçš„æ ¸å¿ƒç†è«–éƒ¨åˆ†ï¼Œä¹Ÿç™¼ç¾RESTfulåœ¨ç¾å¯¦ä½¿ç”¨ä¸Šçš„å•é¡Œã€‚<br>åœ¨æˆ‘çš„çœ‹æ³•ä¸Šï¼Œä½¿ç”¨RESTfulçš„åŸå› åœ¨æ–¼:</p>
<ol>
<li>APIçµ±ä¸€çš„é¢¨æ ¼è¨­è¨ˆ</li>
<li>æœ‰ç‰¹å®šè¨­è¨ˆæ¨¡å¼åˆ©æ–¼ç¶­è­·æ€§</li>
<li>èƒ½æ¸›å°‘é–‹ç™¼æˆæœ¬ã€é–‹ç™¼æ™‚é–“</li>
</ol>
<p>å¦‚æœæ²’æ³•é”æˆä»¥ä¸Šå¹¾é»ï¼Œé‚£é¡å¤–ä½¿ç”¨è‡ªè¨‚çš„APIä¹Ÿç„¡å¦¨ã€‚<br>æ¯”å¦‚GoogleçœŸæœ‰åšåˆ°å…¨RESTfulå—?<br>ç¨å¾®æŸ¥çœ‹Google Driveã€Gmailå°±æœƒç™¼ç¾æ²’æœ‰ï¼Œé‚„æ˜¯ç”¨ä¸€äº›getXXXçš„APIã€‚åªæœ‰é–‹çµ¦å…¶ä»–é–‹ç™¼è€…æ‰ç”¨RESTful APIã€‚</p>
<p>å› æ­¤ï¼Œç›´è¦ºä¸Šæ¯”è¼ƒé©åˆé–‹çµ¦å¤–éƒ¨çš„å…¶ä»–äººè€Œä½¿ç”¨ã€‚</p>
<p>æœ€å¾Œï¼Œå¯¦ä½œå°‡åœ¨ä¸‹ç¯‡é–‹å§‹é€²è¡Œã€‚</p>
<p><strong>åƒè€ƒè³‡æ–™</strong><br><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Coupling_(computer_programming)#/media/File:CouplingVsCohesion.svg">https://en.wikipedia.org/wiki/Coupling_(computer_programming)#/media/File:CouplingVsCohesion.svg</a><br><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Coupling_(computer_programming)">https://en.wikipedia.org/wiki/Coupling_(computer_programming)</a><br><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E8%A1%A8%E7%8E%B0%E5%B1%82%E7%8A%B6%E6%80%81%E8%BD%AC%E6%8D%A2">https://zh.wikipedia.org/wiki/%E8%A1%A8%E7%8E%B0%E5%B1%82%E7%8A%B6%E6%80%81%E8%BD%AC%E6%8D%A2</a><br><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1497547">https://cloud.tencent.com/developer/article/1497547</a><br><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1575071">https://cloud.tencent.com/developer/article/1575071</a><br><a target="_blank" rel="noopener" href="https://www.restapitutorial.com/httpstatuscodes.html#google_vignette">https://www.restapitutorial.com/httpstatuscodes.html#google_vignette</a><br><a target="_blank" rel="noopener" href="https://noob.tw/restful-api/">https://noob.tw/restful-api/</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yuhsiang237.github.io/2021/10/16/C-MVC-RESTful-API-%E4%B8%8A-RESTful-%E5%9F%BA%E7%A4%8E%E7%9F%A5%E8%AD%98/" data-id="cme6kwo0j001bgalj5gq29ycj" data-title="[Day19] C# MVC RESTful API (ä¸Š) RESTful åŸºç¤çŸ¥è­˜ - C#&amp;AspNetCore" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-C-MVCå°ˆæ¡ˆä¸­æ’°å¯«API" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/10/15/C-MVC%E5%B0%88%E6%A1%88%E4%B8%AD%E6%92%B0%E5%AF%ABAPI/" class="article-date">
  <time class="dt-published" datetime="2021-10-15T02:16:48.000Z" itemprop="datePublished">2021-10-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Code/">Code</a>â–º<a class="article-category-link" href="/categories/Code/C/">C#</a>â–º<a class="article-category-link" href="/categories/Framework/">Framework</a>â–º<a class="article-category-link" href="/categories/Framework/AspNetCore-MVC/">AspNetCore MVC</a>â–º<a class="article-category-link" href="/categories/Topic/">Topic</a>â–º<a class="article-category-link" href="/categories/Topic/2021-C-AspNetCore-Challenge/">2021 C# AspNetCore Challenge</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/10/15/C-MVC%E5%B0%88%E6%A1%88%E4%B8%AD%E6%92%B0%E5%AF%ABAPI/">[Day18] C# MVCå°ˆæ¡ˆä¸­æ’°å¯«API - C#&amp;AspNetCore</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>åœ¨ä¸Šå›ä¸­æˆ‘å€‘ä»‹ç´¹äº† <a href="/2021/10/14/C-MVC-%E6%8E%92%E5%BA%8F%E7%AF%A9%E9%81%B8%E5%92%8C%E5%88%86%E9%A0%81%E5%AF%A6%E4%BD%9C/" title="[Day17] C# MVC æ’åºã€ç¯©é¸å’Œåˆ†é å¯¦ä½œ - C#&amp;AspNetCore">[Day17] C# MVC æ’åºã€ç¯©é¸å’Œåˆ†é å¯¦ä½œ - C#&amp;AspNetCore</a> ï¼Œèƒ½å‘ˆç¾å‡ºåˆ—è¡¨äº†ã€‚</p>
<p>è€Œé€™å›å°±è¦è¬›èƒ½è®“äº‹æƒ…æ¯”è¼ƒçœäº‹çš„APIã€‚</p>
<h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><p>æ‡‰ç”¨ç¨‹å¼ä»‹é¢ï¼ˆè‹±èªï¼šApplication Programming Interfaceï¼‰ï¼Œç¸®å¯«ç‚ºAPIï¼Œæ˜¯ä¸€ç¨®è¨ˆç®—ä»‹é¢ï¼Œå®ƒå®šç¾©å¤šå€‹è»Ÿé«”ä¸­ä»‹ä¹‹é–“çš„äº’å‹•ï¼Œä»¥åŠå¯ä»¥é€²è¡Œçš„å‘¼å«ï¼ˆcallï¼‰æˆ–è«‹æ±‚ï¼ˆrequestï¼‰çš„ç¨®é¡ï¼Œå¦‚ä½•é€²è¡Œå‘¼å«æˆ–ç™¼å‡ºè«‹æ±‚ï¼Œæ‡‰ä½¿ç”¨çš„è³‡æ–™æ ¼å¼ï¼Œæ‡‰éµå¾ªçš„æ…£ä¾‹ç­‰ã€‚</p>
<p>ç°¡å–®ä¾†èªªå°±æ˜¯:ç¨‹å¼çš„æ¥å£ï¼Œå¯ä»¥å‚³é€åƒæ•¸çµ¦å¾Œç«¯è™•ç†çš„å‡½å¼ï¼Œä¹‹å¾ŒæœƒæŠŠæ‰€éœ€çš„è³‡æ–™å›å‚³ä½ ã€‚</p>
<h3 id="å¯¦ä½œAPI"><a href="#å¯¦ä½œAPI" class="headerlink" title="å¯¦ä½œAPI"></a>å¯¦ä½œAPI</h3><p>é€™å›å…ˆä»‹ç´¹ä»»æ„å‘½åçš„APIã€‚</p>
<p>1.åœ¨Controlleræ’°å¯«APIï¼Œç¬¬37~45è¡Œ</p>
<p><strong>~/Controller/HomeController.cs</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">using Microsoft.AspNetCore.Mvc;</span><br><span class="line">using Microsoft.Extensions.Logging;</span><br><span class="line">using MVC_With_API.Models;</span><br><span class="line">using System;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using System.Diagnostics;</span><br><span class="line">using System.Linq;</span><br><span class="line">using System.Threading.Tasks;</span><br><span class="line"></span><br><span class="line">namespace MVC_With_API.Controllers</span><br><span class="line">&#123;</span><br><span class="line">    public class HomeController : Controller</span><br><span class="line">    &#123;</span><br><span class="line">        private readonly ILogger&lt;HomeController&gt; _logger;</span><br><span class="line"></span><br><span class="line">        public HomeController(ILogger&lt;HomeController&gt; logger)</span><br><span class="line">        &#123;</span><br><span class="line">            _logger = logger;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public IActionResult Index()</span><br><span class="line">        &#123;</span><br><span class="line">            return View();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public IActionResult Privacy()</span><br><span class="line">        &#123;</span><br><span class="line">            return View();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        [ResponseCache(Duration = 0, Location = ResponseCacheLocation.None, NoStore = true)]</span><br><span class="line">        public IActionResult Error()</span><br><span class="line">        &#123;</span><br><span class="line">            return View(new ErrorViewModel &#123; RequestId = Activity.Current?.Id ?? HttpContext.TraceIdentifier &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        [HttpPost]</span><br><span class="line">        public JsonResult getSum(int num)</span><br><span class="line">        &#123;</span><br><span class="line">            int sum = 0;</span><br><span class="line">            for(int i = 0; i &lt; num; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                sum += i;</span><br><span class="line">            &#125;</span><br><span class="line">            return Json(new &#123; result = sum &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>èªªæ˜:<br>å¦‚ä¸Šç¬¬37~45è¡Œå°±æ˜¯ä¸€å€‹APIäº†ï¼Œå¤–ç•Œå¯ä»¥ç”¨POSTæ–¹å¼Requestï¼Œç„¶å¾Œç¶“ç”±è£¡é¢çš„è¨ˆç®—å»å¾—åˆ°ä¸€å€‹çµæœï¼Œä¸¦å›å‚³Responseã€‚<br>é€™ç¨®éš¨æ„é¢¨æ ¼çš„APIå¤§æ¦‚åƒ…é©åˆåœ¨ç‰¹å®šControlleråº•ä¸‹ä½¿ç”¨ã€‚</p>
<p>2.å†ä¾†æˆ‘å€‘ç”¨æ¸¬è©¦å·¥å…·PostManæŸ¥çœ‹çµæœ<br><a target="_blank" rel="noopener" href="https://www.postman.com/downloads/">https://www.postman.com/downloads/</a><br>èªªæ˜:æˆ‘å€‘ç”¨bodyå‚³é€äº†åƒæ•¸numï¼Œä¸¦è¨­å®šç‚º10ï¼Œæœƒå¾1+2+3â€¦+10=45å¾—åˆ°45ï¼Œå¯å¾Responseæ¥åˆ°å€¼ã€‚</p>
<img src="/2021/10/15/C-MVC%E5%B0%88%E6%A1%88%E4%B8%AD%E6%92%B0%E5%AF%ABAPI/1.png" class="">

<p>3.å˜—è©¦åœ¨é é¢ä¸Šå‘¼å«</p>
<p><strong>~/Views/Home/Index.cshtml</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">@&#123;</span><br><span class="line">    ViewData[&quot;Title&quot;] = &quot;Home Page&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;div class=&quot;text-center&quot;&gt;</span><br><span class="line">    &lt;h1 class=&quot;display-4&quot;&gt;Welcome&lt;/h1&gt;</span><br><span class="line">    &lt;p&gt;Learn about &lt;a href=&quot;https://docs.microsoft.com/aspnet/core&quot;&gt;building Web apps with ASP.NET Core&lt;/a&gt;.&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;div id=&quot;result&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">@section Scripts&#123;</span><br><span class="line">    &lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">    $.post(&quot;Home/getSum&quot;,</span><br><span class="line">        &#123;</span><br><span class="line">            num: &quot;10&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        function (data, status) &#123;</span><br><span class="line">            $(&#x27;#result&#x27;).html(data.result)</span><br><span class="line">        &#125;);</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>èªªæ˜:ç¬¬95~105è¡Œå°±æ˜¯å‘¼å«çš„AJAXäº†!<br>ä¸¦æŠŠçµæœå°åˆ°htmlä¸Šã€‚</p>
<p>çµæœ:</p>
<img src="/2021/10/15/C-MVC%E5%B0%88%E6%A1%88%E4%B8%AD%E6%92%B0%E5%AF%ABAPI/2.png" class="">
<h3 id="ç¸½çµ"><a href="#ç¸½çµ" class="headerlink" title="ç¸½çµ"></a>ç¸½çµ</h3><p>é€™ç¨®ç°¡æ˜“ç„¡è¦ç¯„çš„APIæ¯”è¼ƒé©åˆåªåœ¨Controlleråº•ä¸‹å¯«ã€‚<br>å¦‚æœè¦é–‹çµ¦å¤–ç•Œæ¯”è¼ƒæ¨è–¦ç”¨RESTful APIã€‚</p>
<p>è‡³æ–¼ç‚ºä»€éº¼RESTfulå‘¢?<br>å› ç‚ºå„ç¨®getPeopleDataã€updatePeopleã€getPeopleListâ€¦æœƒé€ æˆç¶­è­·ä¸Šä¸å¥½æŒæ§ï¼Œæ²’æœ‰å›ºå®šæ ¼å¼ï¼Œä¸å¥½ç›´è¦ºçŸ¥é“çµæœã€‚<br>ä½†å¦‚æœå°ˆæ¡ˆå…§éƒ¨æœ‰é¢¨æ ¼çµ±ä¸€APIï¼Œä¸”åå‘è‡ªç”¨ï¼Œé‚£å…¶å¯¦ä¹Ÿä¸éœ€è¦RESTfulã€‚</p>
<p>ä¸‹å›æœƒå˜—è©¦ä½¿ç”¨RESTful APIçš„æ–¹å¼æ’°å¯«ã€‚</p>
<p>ç„¶å¾Œç›¸è¼ƒæ–¼ä¹‹å‰Laravelé–‹ç™¼çš„ç¶“é©—ï¼Œæ„Ÿè¦º.net core MVCåˆ‡è·¯ç”±æ–¹å¼ä¸å¤ªç›´è¦º@@ã€‚</p>
<p><strong>åƒè€ƒè³‡æ–™</strong><br><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-tw/aspnet/core/web-api/?view=aspnetcore-3.1">https://docs.microsoft.com/zh-tw/aspnet/core/web-api/?view=aspnetcore-3.1</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yuhsiang237.github.io/2021/10/15/C-MVC%E5%B0%88%E6%A1%88%E4%B8%AD%E6%92%B0%E5%AF%ABAPI/" data-id="cme6kwo0y0024galj02ycbp22" data-title="[Day18] C# MVCå°ˆæ¡ˆä¸­æ’°å¯«API - C#&amp;AspNetCore" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-C-MVC-æ’åºç¯©é¸å’Œåˆ†é å¯¦ä½œ" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/10/14/C-MVC-%E6%8E%92%E5%BA%8F%E7%AF%A9%E9%81%B8%E5%92%8C%E5%88%86%E9%A0%81%E5%AF%A6%E4%BD%9C/" class="article-date">
  <time class="dt-published" datetime="2021-10-14T02:16:48.000Z" itemprop="datePublished">2021-10-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Code/">Code</a>â–º<a class="article-category-link" href="/categories/Code/C/">C#</a>â–º<a class="article-category-link" href="/categories/Framework/">Framework</a>â–º<a class="article-category-link" href="/categories/Framework/AspNetCore-MVC/">AspNetCore MVC</a>â–º<a class="article-category-link" href="/categories/Topic/">Topic</a>â–º<a class="article-category-link" href="/categories/Topic/2021-C-AspNetCore-Challenge/">2021 C# AspNetCore Challenge</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/10/14/C-MVC-%E6%8E%92%E5%BA%8F%E7%AF%A9%E9%81%B8%E5%92%8C%E5%88%86%E9%A0%81%E5%AF%A6%E4%BD%9C/">[Day17] C# MVC æ’åºã€ç¯©é¸å’Œåˆ†é å¯¦ä½œ - C#&amp;AspNetCore</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>å°æ–¼è³‡æ–™åº«çš„æ“ä½œæˆ‘å€‘ä»‹ç´¹äº†å…©ç¨®åšæ³•:</p>
<ul>
<li><a href="/2021/10/12/C-MVC-Dapper%E7%94%A8%E6%B3%95/" title="[Day16] C# MVC Dapperç”¨æ³•èˆ‡é€£çµè³‡æ–™åº« - C#&amp;AspNetCore">[Day16] C# MVC Dapperç”¨æ³•èˆ‡é€£çµè³‡æ–™åº« - C#&amp;AspNetCore</a> </li>
<li><a href="/2021/10/02/C-MVC-Model%E8%88%87%E8%B3%87%E6%96%99%E5%BA%AB%E9%80%A3%E7%B5%90/" title="[Day7] C# MVC Modelæ¨¡å‹é€£çµè³‡æ–™åº«ï¼Œä½¿ç”¨Entity Framework - C#&amp;AspNetCore">[Day7] C# MVC Modelæ¨¡å‹é€£çµè³‡æ–™åº«ï¼Œä½¿ç”¨Entity Framework - C#&amp;AspNetCore</a></li>
</ul>
<p>è€Œåœ¨ä¸Šæ–¹å…©ç¯‡æ–‡ä¸­æˆ‘å€‘éƒ½æ˜¯æ’ˆé é¢å‘ˆç¾å–®ä¸€è³‡æ–™ã€‚<br>å› æ­¤é€™å›ä¾†è«‡è«‡åˆ—è¡¨å§!</p>
<h3 id="ç›®æ¨™"><a href="#ç›®æ¨™" class="headerlink" title="ç›®æ¨™"></a>ç›®æ¨™</h3><p>ä»¥ä¸‹æ˜¯æ•´é«”çš„ç›®æ¨™:</p>
<ul>
<li>å¯æœå°‹éæ¿¾</li>
<li>å¯æ’åº</li>
<li>å¯åˆ†é </li>
</ul>
<p>åŸºæœ¬ä¸Šæœ‰é€™ä¸‰ç¨®åŠŸèƒ½ï¼Œå°±æ˜¯ä¸€å€‹å¼·å¤§çš„åˆ—è¡¨äº†ã€‚<br>è€Œå‰›å¥½å®˜æ–¹å°±æœ‰æä¾›é€™æ–¹é¢çš„å¯¦ä½œæ•™å­¸ï¼Œå› æ­¤å°±åƒè€ƒå®˜æ–¹ä½œæ³•:<br><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-tw/aspnet/core/data/ef-mvc/sort-filter-page?view=aspnetcore-3.1">https://docs.microsoft.com/zh-tw/aspnet/core/data/ef-mvc/sort-filter-page?view=aspnetcore-3.1</a></p>
<h3 id="å¯¦ä½œ"><a href="#å¯¦ä½œ" class="headerlink" title="å¯¦ä½œ"></a>å¯¦ä½œ</h3><p>åœ¨æ­¤ç¯„ä¾‹ä½¿ç”¨Entity Framework  Coreä½œç‚ºç¤ºç¯„ã€‚</p>
<p>å…ˆé™„ä¸Šå®Œæˆå¾Œçµæœ:</p>
<img src="/2021/10/14/C-MVC-%E6%8E%92%E5%BA%8F%E7%AF%A9%E9%81%B8%E5%92%8C%E5%88%86%E9%A0%81%E5%AF%A6%E4%BD%9C/1.png" class="">

<p>ä¿®æ”¹æª”æ¡ˆ:</p>
<ul>
<li>~/Commons/PaginatedList.cs:åˆ†é åˆ—è¡¨é¡åˆ¥æª”æ¡ˆï¼Œå”åŠ©æˆ‘å€‘è£½ä½œåˆ†é ã€‚</li>
<li>~/Controllers/OrderController.cs:è¨‚å–®åˆ—è¡¨çš„æ§åˆ¶å™¨ï¼Œè² è²¬æ•´å¼µåˆ—è¡¨çš„é‚è¼¯ï¼Œå¦‚æ’åºã€åˆ†é ã€æœå°‹ã€‚</li>
<li>~/Models/ViewModels/OrderIndexViewModel.cs:ç”¨ä¾†å‘ˆç¾åˆ—è¡¨è¦æ ¼çš„ViewModelã€‚</li>
<li>~/Views/Order/Index.cshtml:åˆ—è¡¨ç•«é¢ç¨‹å¼ç¢¼ã€‚</li>
</ul>
<img src="/2021/10/14/C-MVC-%E6%8E%92%E5%BA%8F%E7%AF%A9%E9%81%B8%E5%92%8C%E5%88%86%E9%A0%81%E5%AF%A6%E4%BD%9C/4.png" class="">

<p>1.é¦–å…ˆå…ˆå»ºç«‹åˆ—è¡¨åˆ†é çš„é¡åˆ¥</p>
<p><strong>~/Commons/PaginatedList.cs</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">using System;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using System.Linq;</span><br><span class="line">using System.Threading.Tasks;</span><br><span class="line">using Microsoft.EntityFrameworkCore;</span><br><span class="line"></span><br><span class="line">namespace ListExample</span><br><span class="line">&#123;</span><br><span class="line">    public class PaginatedList&lt;T&gt; : List&lt;T&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        public int PageIndex &#123; get; private set; &#125;</span><br><span class="line">        public int TotalPages &#123; get; private set; &#125;</span><br><span class="line"></span><br><span class="line">        public PaginatedList(List&lt;T&gt; items, int count, int pageIndex, int pageSize)</span><br><span class="line">        &#123;</span><br><span class="line">            PageIndex = pageIndex;</span><br><span class="line">            TotalPages = (int)Math.Ceiling(count / (double)pageSize);</span><br><span class="line"></span><br><span class="line">            this.AddRange(items);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public bool HasPreviousPage</span><br><span class="line">        &#123;</span><br><span class="line">            get</span><br><span class="line">            &#123;</span><br><span class="line">                return (PageIndex &gt; 1);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public bool HasNextPage</span><br><span class="line">        &#123;</span><br><span class="line">            get</span><br><span class="line">            &#123;</span><br><span class="line">                return (PageIndex &lt; TotalPages);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public static async Task&lt;PaginatedList&lt;T&gt;&gt; CreateAsync(IQueryable&lt;T&gt; source, int pageIndex, int pageSize)</span><br><span class="line">        &#123;</span><br><span class="line">            var count = await source.CountAsync();</span><br><span class="line">            var items = await source.Skip((pageIndex - 1) * pageSize).Take(pageSize).ToListAsync();</span><br><span class="line">            return new PaginatedList&lt;T&gt;(items, count, pageIndex, pageSize);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>èªªæ˜:é€™æ˜¯å®˜æ–¹æä¾›çš„é¡åˆ¥ï¼Œä¸éœ€è¦å‹•ã€‚</p>
<ul>
<li>CreateAsync:ä¸»è¦è®“æˆ‘å€‘æŠŠè³‡æ–™ä»¥PaginatedListçš„æ–¹å¼å‚³çµ¦Viewã€‚</li>
<li>HasPreviousPage:åˆ¤æ–·ä¸Šä¸€é é¢æ˜¯å¦å­˜åœ¨ï¼Œç”¨ä¾†å•Ÿå‹•è·Ÿé—œé–‰ä¸Šä¸€é æŒ‰éˆ•ã€‚</li>
<li>HasNextPage:åˆ¤æ–·ä¸‹ä¸€é é¢ï¼Œç”¨ä¾†å•Ÿå‹•è·Ÿé—œé–‰ä¸‹ä¸€é æŒ‰éˆ•ã€‚</li>
</ul>
<p>2.å†ä¾†æ˜¯è³‡æ–™è¦æ ¼ï¼Œå› ç‚ºæˆ‘å€‘çš„è³‡æ–™æœ‰ä½¿ç”¨åˆ°å…©å¼µè³‡æ–™è¡¨(é¡§å®¢ã€è¨‚å–®)ï¼Œå› æ­¤æœƒéœ€è¦ç”¨åˆ°ViewModelã€‚</p>
<p><strong>~/Models/ViewModels/OrderIndexViewModel.cs</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">using System;</span><br><span class="line">using System.ComponentModel.DataAnnotations;</span><br><span class="line">namespace ListExample.Models.ViewModels</span><br><span class="line">&#123;</span><br><span class="line">    public class OrderIndexViewModel</span><br><span class="line">    &#123;</span><br><span class="line">        [Display(Name = &quot;è¨‚å–®ç·¨è™Ÿ&quot;)]</span><br><span class="line"></span><br><span class="line">        public string Number &#123; get; set; &#125;</span><br><span class="line">        [Display(Name = &quot;å¯„é€æ—¥æœŸ&quot;)]</span><br><span class="line"></span><br><span class="line">        public DateTime ShippingDate &#123; get; set; &#125;</span><br><span class="line">        [Display(Name = &quot;å¯„é€åœ°å€&quot;)]</span><br><span class="line"></span><br><span class="line">        public string ShippingAddress &#123; get; set; &#125;</span><br><span class="line">        [Display(Name = &quot;å®¢æˆ¶ç°½æ”¶&quot;)]</span><br><span class="line"></span><br><span class="line">        public string CustomerSignature &#123; get; set; &#125;</span><br><span class="line">        [Display(Name = &quot;å®¢æˆ¶ç·¨è™Ÿ&quot;)]</span><br><span class="line"></span><br><span class="line">        public string CustomerNumber &#123; get; set; &#125;</span><br><span class="line">        [Display(Name = &quot;ç¸½é¡&quot;)]</span><br><span class="line"></span><br><span class="line">        public decimal Total &#123; get; set; &#125;</span><br><span class="line">        [Display(Name = &quot;å®¢æˆ¶åç¨±&quot;)]</span><br><span class="line"></span><br><span class="line">        public string CustomerName &#123; get; set; &#125;</span><br><span class="line">        [Display(Name = &quot;å®¢æˆ¶é›»è©±&quot;)]</span><br><span class="line"></span><br><span class="line">        public string CustomerTel &#123; get; set; &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.ä¹‹å¾Œæ˜¯Controllerï¼Œè² è²¬æˆ‘å€‘åˆ†é ã€æŸ¥è©¢ã€æ’åºçš„ä¸»è¦å•†æ¥­é‚è¼¯ã€‚<br><strong>~/Controllers/OrderController.cs</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line">using ListExample.Models;</span><br><span class="line">using Microsoft.AspNetCore.Mvc;</span><br><span class="line">using Microsoft.EntityFrameworkCore;</span><br><span class="line">using System;</span><br><span class="line">using System.Threading.Tasks;</span><br><span class="line">using System.Linq;</span><br><span class="line">using ListExample.Models.ViewModels;</span><br><span class="line"></span><br><span class="line">namespace ListExample.Controllers</span><br><span class="line">&#123;</span><br><span class="line">    public class OrderController : Controller</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        private readonly OrdersContext _context;</span><br><span class="line"></span><br><span class="line">        public OrderController(OrdersContext context)</span><br><span class="line">        &#123;</span><br><span class="line">            _context = context;</span><br><span class="line">        &#125;</span><br><span class="line">        public async Task&lt;IActionResult&gt; Index(</span><br><span class="line">      string sortOrder,</span><br><span class="line">      string currentFilterCustomer,</span><br><span class="line">      string currentFilterNumber,</span><br><span class="line">      string searchStringCustomer,</span><br><span class="line">      string searchStringNumber,</span><br><span class="line">      int? goToPageNumber,</span><br><span class="line">      int pageSize,</span><br><span class="line">      int? pageNumber)</span><br><span class="line">        &#123;</span><br><span class="line">            // 1.æœå°‹é‚è¼¯</span><br><span class="line">            var query = from a in _context.Orders</span><br><span class="line">                        join b in _context.Customers on a.CustomerNumber equals b.Number</span><br><span class="line">                        into result1</span><br><span class="line">                        from ab in result1.DefaultIfEmpty()</span><br><span class="line">                        select new OrderIndexViewModel</span><br><span class="line">                        &#123;</span><br><span class="line">                            Number = a.Number,</span><br><span class="line">                            ShippingAddress = a.ShippingAddress,</span><br><span class="line">                            ShippingDate = a.ShippingDate,</span><br><span class="line">                            CustomerSignature = a.CustomerSignature,</span><br><span class="line">                            Total = a.Total,</span><br><span class="line">                            CustomerNumber = a.CustomerNumber,</span><br><span class="line">                            CustomerName = ab.Name,</span><br><span class="line">                            CustomerTel = ab.Tel</span><br><span class="line">                        &#125;;</span><br><span class="line"></span><br><span class="line">            // 2.æ¢ä»¶éæ¿¾</span><br><span class="line">            if (searchStringCustomer != null || searchStringNumber != null)</span><br><span class="line">            &#123;</span><br><span class="line">                pageNumber = 1;</span><br><span class="line">            &#125;</span><br><span class="line">            else</span><br><span class="line">            &#123;</span><br><span class="line">                searchStringCustomer = currentFilterCustomer;</span><br><span class="line">                searchStringNumber = currentFilterNumber;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            ViewData[&quot;CurrentFilterCustomer&quot;] = searchStringCustomer;</span><br><span class="line">            ViewData[&quot;CurrentFilterNumber&quot;] = searchStringNumber;</span><br><span class="line"></span><br><span class="line">            if (!String.IsNullOrEmpty(searchStringCustomer))</span><br><span class="line">            &#123;</span><br><span class="line">                query = query.Where(s =&gt; s.CustomerName.Contains(searchStringCustomer));</span><br><span class="line">            &#125;</span><br><span class="line">            if (!String.IsNullOrEmpty(searchStringNumber))</span><br><span class="line">            &#123;</span><br><span class="line">                query = query.Where(s =&gt; s.Number.Contains(searchStringNumber));</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            // 3.æ’åºä¾æ“š</span><br><span class="line">            ViewData[&quot;CurrentSort&quot;] = sortOrder;</span><br><span class="line"></span><br><span class="line">            switch (sortOrder)</span><br><span class="line">            &#123;</span><br><span class="line">                case &quot;1&quot;:</span><br><span class="line">                    query = query.OrderByDescending(s =&gt; s.ShippingDate);</span><br><span class="line">                    break;</span><br><span class="line">                case &quot;2&quot;:</span><br><span class="line">                    query = query.OrderBy(s =&gt; s.ShippingDate);</span><br><span class="line">                    break;</span><br><span class="line">                case &quot;3&quot;:</span><br><span class="line">                    query = query.OrderByDescending(s =&gt; s.Total);</span><br><span class="line">                    break;</span><br><span class="line">                case &quot;4&quot;:</span><br><span class="line">                    query = query.OrderBy(s =&gt; s.Total);</span><br><span class="line">                    break;</span><br><span class="line">                default:</span><br><span class="line">                    query = query.OrderByDescending(s =&gt; s.ShippingDate);</span><br><span class="line">                    break;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            // 4.å‰å¾€é æ•¸</span><br><span class="line">            if (goToPageNumber != null)</span><br><span class="line">            &#123;</span><br><span class="line">                pageNumber = goToPageNumber;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            // 5.æ¯é ç­†æ•¸</span><br><span class="line">            if (pageSize == 0)</span><br><span class="line">            &#123;</span><br><span class="line">                pageSize = 10;</span><br><span class="line">            &#125;</span><br><span class="line">            ViewData[&quot;pageSize&quot;] = pageSize;</span><br><span class="line">            </span><br><span class="line">            // 6.è¿”å›çµæœ</span><br><span class="line">            return View(await PaginatedList&lt;OrderIndexViewModel&gt;.CreateAsync(query.AsNoTracking(), pageNumber ?? 1, pageSize));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>èªªæ˜:é€™ç¯„ä¾‹ä¹Ÿæ˜¯ç”±å®˜æ–¹æ”¹é€ è€Œæˆã€‚</p>
<ul>
<li>Indexçš„åƒæ•¸:<ul>
<li>sortOrder:æ’åºçš„åƒæ•¸ã€‚</li>
<li>currentFilterCustomer:éæ¿¾Customer(å®¢æˆ¶åç¨±)æœå°‹æ¡†çš„åƒæ•¸ï¼Œæš«å­˜éœ€è¦ã€‚</li>
<li>currentFilterNumber:éæ¿¾Number(è¨‚å–®ç·¨è™Ÿ)æœå°‹æ¡†çš„åƒæ•¸ï¼Œæš«å­˜éœ€è¦ã€‚</li>
<li>searchStringCustomer:éæ¿¾Customer(å®¢æˆ¶åç¨±)æœå°‹æ¡†çš„åƒæ•¸ã€‚</li>
<li>searchStringNumber:éæ¿¾Number(è¨‚å–®ç·¨è™Ÿ)æœå°‹æ¡†çš„åƒæ•¸ã€‚</li>
<li>goToPageNumber:è·³åˆ°æŸé çš„åƒæ•¸ã€‚</li>
<li>pageSize:æ¯é ç­†æ•¸ã€‚</li>
<li>pageNumber:ç›®å‰åœ¨ç¬¬å¹¾é é¢ã€‚</li>
</ul>
</li>
</ul>
<p>ä¸»è¦æµç¨‹ç‚º:å»ºç«‹æŸ¥è©¢&gt;éæ¿¾&gt;æ’åº&gt;åˆ†é ã€‚</p>
<ul>
<li>ç¬¬31ï½45è¡Œ:å»ºç«‹LINQæœå°‹ã€‚</li>
<li>ç¬¬47ï½68è¡Œ:ç”¨LINQéæ¿¾ï¼Œå› ç‚ºå¯èƒ½æœƒæœ‰å¾ˆå¤šæœå°‹åƒæ•¸ï¼Œåœ¨é€™ç¯„ä¾‹ä¸­å°±æœ‰å…©å€‹ï¼Œä½†è¦å¢åŠ Nå€‹æ”¹æ³•éƒ½ä¸€æ¨£ã€‚ç®—æ˜¯:KISS (Keep It Simple, Stupid)ã€‚</li>
<li>ç¬¬71ï½90è¡Œ:ç”¨LINQæ’åºã€‚</li>
<li>ç¬¬92ï½103è¡Œ:æ¯é ç­†æ•¸é™åˆ¶ã€è·³è‡³æŒ‡å®šé ã€‚</li>
<li>ç¬¬105è¡Œ:å›å‚³çµæœã€‚</li>
</ul>
<p>è€Œä½¿ç”¨ViewDataæ˜¯å› ç‚ºä¸€äº›å­—ä¸²é‚„éœ€è¦ç•™åœ¨é é¢ä¸Šï¼Œå¦‚:åˆ†é ã€æœå°‹å­—ä¸²ã€æ’åºã€‚</p>
<p>4.å‰å°ç•«é¢å‘ˆç¾</p>
<p><strong>~/Views/Order/Index.cshtml</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br></pre></td><td class="code"><pre><span class="line">@model PaginatedList&lt;ListExample.Models.ViewModels.OrderIndexViewModel&gt;</span><br><span class="line">@*</span><br><span class="line">    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860</span><br><span class="line">*@</span><br><span class="line">@&#123;</span><br><span class="line">&#125;</span><br><span class="line">&lt;h1&gt;Order&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">&lt;form asp-action=&quot;Index&quot; class=&quot;mt-3&quot; id=&quot;form_search&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;row&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;col-sm col-md-6 col-lg-3 col-xl-3&quot;&gt;</span><br><span class="line">            &lt;label class=&quot;custom-label&quot;&gt;å®¢æˆ¶åç¨±&lt;/label&gt;</span><br><span class="line">            &lt;div class=&quot;form-group form-row&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;col&quot;&gt;</span><br><span class="line">                    &lt;input id=&quot;input_customer&quot; type=&quot;text&quot; class=&quot;form-control mr-2&quot; name=&quot;searchStringCustomer&quot; value=&quot;@ViewData[&quot;CurrentFilterCustomer&quot;]&quot; /&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;col-sm col-md-6 col-lg-3 col-xl-3&quot;&gt;</span><br><span class="line">            &lt;label class=&quot;custom-label&quot;&gt;è¨‚å–®ç·¨è™Ÿ&lt;/label&gt;</span><br><span class="line">            &lt;div class=&quot;form-group form-row&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;col&quot;&gt;</span><br><span class="line">                    &lt;input id=&quot;input_number&quot; type=&quot;text&quot; class=&quot;form-control mr-2&quot; name=&quot;searchStringNumber&quot; value=&quot;@ViewData[&quot;CurrentFilterNumber&quot;]&quot; /&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;text-right&quot;&gt;</span><br><span class="line">        &lt;button type=&quot;submit&quot; class=&quot;btn btn-secondary mb-2&quot;&gt;æŸ¥è©¢è³‡æ–™&lt;/button&gt;</span><br><span class="line">        &lt;button class=&quot;btn btn-outline-secondary mb-2&quot; onclick=&quot;clearSearch();&quot;&gt;æ¸…ç©ºæŸ¥è©¢&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;hr class=&quot;mt-0&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;d-flex justify-content-end&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;col-2 px-0&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">                &lt;select class=&quot;form-control&quot; name=&quot;sortOrder&quot; onchange=&quot;this.form.submit()&quot;&gt;</span><br><span class="line">                    &lt;option value=&quot;0&quot; selected=&quot;@((string)ViewData[&quot;CurrentSort&quot;] == &quot;0&quot;)&quot;&gt;é è¨­æ’åº&lt;/option&gt;</span><br><span class="line">                    &lt;option value=&quot;1&quot; selected=&quot;@((string)ViewData[&quot;CurrentSort&quot;] == &quot;1&quot;)&quot;&gt;å‡ºè²¨æ—¥æœŸ é«˜â†’ä½&lt;/option&gt;</span><br><span class="line">                    &lt;option value=&quot;2&quot; selected=&quot;@((string)ViewData[&quot;CurrentSort&quot;] == &quot;2&quot;)&quot;&gt;å‡ºè²¨æ—¥æœŸ ä½â†’é«˜&lt;/option&gt;</span><br><span class="line">                    &lt;option value=&quot;3&quot; selected=&quot;@((string)ViewData[&quot;CurrentSort&quot;] == &quot;3&quot;)&quot;&gt;è¨‚å–®ç¸½é¡ é«˜â†’ä½&lt;/option&gt;</span><br><span class="line">                    &lt;option value=&quot;4&quot; selected=&quot;@((string)ViewData[&quot;CurrentSort&quot;] == &quot;4&quot;)&quot;&gt;è¨‚å–®ç¸½é¡ ä½â†’é«˜&lt;/option&gt;</span><br><span class="line">                &lt;/select&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;div class=&quot;table-responsive&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;table class=&quot;table table-bordered&quot;&gt;</span><br><span class="line">            &lt;thead&gt;</span><br><span class="line">                &lt;tr&gt;</span><br><span class="line">                    &lt;th&gt;</span><br><span class="line">                        è¨‚å–®ç·¨è™Ÿ</span><br><span class="line">                    &lt;/th&gt;</span><br><span class="line">                    &lt;th&gt;</span><br><span class="line">                        å‡ºè²¨æ—¥æœŸ</span><br><span class="line">                    &lt;/th&gt;</span><br><span class="line">                    &lt;th&gt;</span><br><span class="line">                        å¯„é€åœ°å€</span><br><span class="line">                    &lt;/th&gt;</span><br><span class="line">                    &lt;th&gt;</span><br><span class="line">                        å®¢æˆ¶ç·¨è™Ÿ</span><br><span class="line">                    &lt;/th&gt;</span><br><span class="line">                    &lt;th&gt;</span><br><span class="line">                        å®¢æˆ¶åç¨±</span><br><span class="line">                    &lt;/th&gt;</span><br><span class="line">                    &lt;th&gt;</span><br><span class="line">                        å®¢æˆ¶é›»è©±</span><br><span class="line">                    &lt;/th&gt;</span><br><span class="line">                    &lt;th&gt;</span><br><span class="line">                        å®¢æˆ¶ç°½æ”¶äºº</span><br><span class="line">                    &lt;/th&gt;</span><br><span class="line">                    &lt;th&gt;</span><br><span class="line">                        è¨‚å–®ç¸½é¡</span><br><span class="line">                    &lt;/th&gt;</span><br><span class="line">                &lt;/tr&gt;</span><br><span class="line">            &lt;/thead&gt;</span><br><span class="line">            &lt;tbody&gt;</span><br><span class="line">                @foreach (var item in Model)</span><br><span class="line">                &#123;</span><br><span class="line">                    &lt;tr&gt;</span><br><span class="line">                        &lt;td&gt;</span><br><span class="line">                            @Html.DisplayFor(modelItem =&gt; item.Number)</span><br><span class="line">                        &lt;/td&gt;</span><br><span class="line"></span><br><span class="line">                        &lt;td&gt;</span><br><span class="line">                            @Convert.ToDateTime(item.ShippingDate).ToString(&quot;yyyy-MM-dd&quot;)</span><br><span class="line">                        &lt;/td&gt;</span><br><span class="line">                        &lt;td&gt;</span><br><span class="line">                            @Html.DisplayFor(modelItem =&gt; item.ShippingAddress)</span><br><span class="line">                        &lt;/td&gt;</span><br><span class="line">                        &lt;td&gt;</span><br><span class="line">                            @Html.DisplayFor(modelItem =&gt; item.CustomerNumber)</span><br><span class="line">                        &lt;/td&gt;</span><br><span class="line">                        &lt;td&gt;</span><br><span class="line">                            @Html.DisplayFor(modelItem =&gt; item.CustomerName)</span><br><span class="line">                        &lt;/td&gt;</span><br><span class="line">                        &lt;td&gt;</span><br><span class="line">                            @Html.DisplayFor(modelItem =&gt; item.CustomerTel)</span><br><span class="line">                        &lt;/td&gt;</span><br><span class="line">                        &lt;td&gt;</span><br><span class="line">                            @if (item.CustomerSignature != &quot;&quot; &amp;&amp; item.CustomerSignature != null)</span><br><span class="line">                            &#123;</span><br><span class="line">                                @Html.DisplayFor(modelItem =&gt; item.CustomerSignature)</span><br><span class="line">                            &#125;</span><br><span class="line">                            else</span><br><span class="line">                            &#123;</span><br><span class="line">                                &lt;span&gt;-&lt;/span&gt;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &lt;/td&gt;</span><br><span class="line">                        &lt;td&gt;</span><br><span class="line">                            @Html.DisplayFor(modelItem =&gt; item.Total)</span><br><span class="line">                        &lt;/td&gt;</span><br><span class="line">                    &lt;/tr&gt;</span><br><span class="line">                &#125;</span><br><span class="line">            &lt;/tbody&gt;</span><br><span class="line">        &lt;/table&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    @&#123;</span><br><span class="line">        var prevDisabled = !Model.HasPreviousPage ? &quot;disabled&quot; : &quot;&quot;;</span><br><span class="line">        var nextDisabled = !Model.HasNextPage ? &quot;disabled&quot; : &quot;&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &lt;div class=&quot;list-pagination mt-3&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;form-inline text-center&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;mx-auto&quot;&gt;</span><br><span class="line">                æ¯é </span><br><span class="line">                &lt;select class=&quot;custom-select&quot; name=&quot;pageSize&quot; onchange=&quot;changePageSize()&quot;&gt;</span><br><span class="line">                    &lt;option value=&quot;5&quot; selected=&quot;@((int)ViewData[&quot;pageSize&quot;]==5)&quot;&gt;5&lt;/option&gt;</span><br><span class="line">                    &lt;option value=&quot;10&quot; selected=&quot;@((int)ViewData[&quot;pageSize&quot;]==10)&quot;&gt;10&lt;/option&gt;</span><br><span class="line">                    &lt;option value=&quot;30&quot; selected=&quot;@((int)ViewData[&quot;pageSize&quot;]==30)&quot;&gt;30&lt;/option&gt;</span><br><span class="line">                    &lt;option value=&quot;50&quot; selected=&quot;@((int)ViewData[&quot;pageSize&quot;]==50)&quot;&gt;50&lt;/option&gt;</span><br><span class="line">                &lt;/select&gt;ï¼Œç¬¬ &lt;span&gt;@(Model.TotalPages &lt; Model.PageIndex ? 0 : Model.PageIndex) / @Model.TotalPages&lt;/span&gt; é ï¼Œå…± &lt;span&gt;@Model.TotalPages&lt;/span&gt; é ï¼Œ</span><br><span class="line">                &lt;a asp-action=&quot;Index&quot;</span><br><span class="line">                    asp-route-sortOrder=&quot;@ViewData[&quot;CurrentSort&quot;]&quot;</span><br><span class="line">                    asp-route-pageNumber=&quot;@(Model.PageIndex - 1)&quot;</span><br><span class="line">                    asp-route-currentFilterNumber=&quot;@ViewData[&quot;CurrentFilterNumber&quot;]&quot;</span><br><span class="line">                    asp-route-CurrentFilterCustomer=&quot;@ViewData[&quot;CurrentFilterCustomer&quot;]&quot;</span><br><span class="line">                    asp-route-pageSize=&quot;@ViewData[&quot;PageSize&quot;]&quot;</span><br><span class="line">                    class=&quot;btn btn-outline-secondary btn-sm @prevDisabled&quot;&gt;</span><br><span class="line">                    ä¸Šä¸€é </span><br><span class="line">                &lt;/a&gt;ï½œè·³è‡³ç¬¬</span><br><span class="line">                &lt;select id=&quot;select_goToPage&quot; class=&quot;custom-select&quot; name=&quot;goToPageNumber&quot; onchange=&quot;goToPage();&quot;&gt;</span><br><span class="line">                    &lt;option&gt;</span><br><span class="line">                        é¸æ“‡</span><br><span class="line">                    &lt;/option&gt;</span><br><span class="line">                    @for (var i = 1; i &lt;= Model.TotalPages; i++)</span><br><span class="line">                    &#123;</span><br><span class="line">                        &lt;option value=&quot;@i&quot; selected=&quot;@(Model.PageIndex == i)&quot;&gt;</span><br><span class="line">                            @i</span><br><span class="line">                        &lt;/option&gt;</span><br><span class="line">                    &#125;</span><br><span class="line">                &lt;/select&gt;</span><br><span class="line">                é ï½œ</span><br><span class="line">                &lt;a asp-action=&quot;Index&quot;</span><br><span class="line">                   asp-route-sortOrder=&quot;@ViewData[&quot;CurrentSort&quot;]&quot;</span><br><span class="line">                   asp-route-pageNumber=&quot;@(Model.PageIndex + 1)&quot;</span><br><span class="line">                   asp-route-currentFilterNumber=&quot;@ViewData[&quot;CurrentFilterNumber&quot;]&quot;</span><br><span class="line">                   asp-route-CurrentFilterCustomer=&quot;@ViewData[&quot;CurrentFilterCustomer&quot;]&quot;</span><br><span class="line">                   asp-route-pageSize=&quot;@ViewData[&quot;PageSize&quot;]&quot;</span><br><span class="line">                   class=&quot;btn btn-outline-secondary btn-sm @nextDisabled&quot;&gt;</span><br><span class="line">                    ä¸‹ä¸€é </span><br><span class="line">                &lt;/a&gt;</span><br><span class="line"></span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@section Scripts&#123;</span><br><span class="line">    &lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">        function clearSearch() &#123;</span><br><span class="line">            $(&#x27;#input_customer&#x27;).val(&#x27;&#x27;)</span><br><span class="line">            $(&#x27;#input_number&#x27;).val(&#x27;&#x27;)</span><br><span class="line">            $(&#x27;#form_search&#x27;).submit()</span><br><span class="line">        &#125;</span><br><span class="line">        function goToPage() &#123;</span><br><span class="line">            $(&#x27;#form_search&#x27;).submit()</span><br><span class="line">        &#125;</span><br><span class="line">        function changePageSize() &#123;</span><br><span class="line">            $(&#x27;#form_search&#x27;).submit()</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é—œéµåœ¨æŠŠæ•´å€‹è¡¨éƒ½åŒ…é€²formè£¡é¢ï¼Œå…±ç”¨ä¸€å€‹Actionã€‚<br>ç¬¬10ï½45è¡Œ:ç‚ºæŸ¥è©¢ã€æ’åº<br>ç¬¬50ï½119è¡Œ:ç‚ºåˆ—è¡¨<br>ç¬¬125ï½168è¡Œ:ç‚ºåˆ†é å€å¡Š<br>ç¬¬173ï½184è¡Œ:è®“ä¸€äº›æ“ä½œå¯ä»¥å†æ”¹è®Šæ™‚è‡ªå‹•åŸ·è¡Œformçš„Actionã€‚</p>
<p>5.å®Œæˆå¾ŒåŸ·è¡Œç•«é¢:</p>
<img src="/2021/10/14/C-MVC-%E6%8E%92%E5%BA%8F%E7%AF%A9%E9%81%B8%E5%92%8C%E5%88%86%E9%A0%81%E5%AF%A6%E4%BD%9C/3.gif" class="">


<h3 id="ç¸½çµ"><a href="#ç¸½çµ" class="headerlink" title="ç¸½çµ"></a>ç¸½çµ</h3><p>é€™ç¨®è¦è²¼ç¨‹å¼ç¢¼çš„å¾ˆé›£å»è§£é‡‹ï¼Œåªèƒ½èªªç…§è‘—åšå°±èƒ½å¼„å‡ºä¸€å€‹åˆ—è¡¨ã€‚<br>å®˜æ–¹ <a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-tw/aspnet/core/data/ef-mvc/sort-filter-page?view=aspnetcore-3.1">https://docs.microsoft.com/zh-tw/aspnet/core/data/ef-mvc/sort-filter-page?view=aspnetcore-3.1</a> ä¹Ÿæ˜¯é€™æ¨£æä¾›ã€‚<br>æˆ‘è·Ÿå®˜æ–¹ä½œæ³•å·®ç•°åœ¨æ–¼:æ’åºå¯ä»¥æ’å¤šå€‹ã€éæ¿¾å¯ä»¥éæ¿¾å¤šå€‹ã€æœ‰åˆ†é å‰å¾€çš„æ–¹å¼ã€‚<br>ç¸½ä¹‹å°±æ˜¯å¤§æ–¹å‘æ˜¯å°çš„:å»ºç«‹æŸ¥è©¢&gt;éæ¿¾&gt;æ’åº&gt;åˆ†é ã€‚ç´°ç¯€å†ä¿®æ­£æˆè‡ªå·±éœ€æ±‚ã€‚</p>
<p>ç„¶å¾Œï¼Œå…¶å¯¦ç”¨APIå¥—å€‹å‰ç«¯åˆ—è¡¨æœƒæ¯”è¼ƒç°¡å–®ï¼Œæ’ˆå‡ºå…¨éƒ¨ç„¶å¾Œäº¤çµ¦å‰ç«¯è¡¨æ ¼å…ƒä»¶ã€‚<br>ä½†å¾Œç«¯é€™ç¨®å‰‡æ¯”è¼ƒç©©å®šä¸€äº›ï¼Œå› ç‚ºç·¨è­¯æ™‚å°±èƒ½çŸ¥é“éŒ¯èª¤ï¼Œéœ€è¦æ¯”è¼ƒå¤šç¨‹å¼ç¢¼æ‰èƒ½é”åˆ°ã€‚</p>
<p>æœ€å¾Œï¼Œè®“æˆ‘æ¯”è¼ƒè¨ç•°çš„æ˜¯ç«Ÿç„¶æ‰¾ä¸åˆ°ç¾æˆçš„éå®˜æ–¹ç¯„ä¾‹å¯ä»¥åƒè€ƒâ€¦ã€‚</p>
<p>å®Œæ•´ç¨‹å¼ç¢¼:<a target="_blank" rel="noopener" href="https://github.com/yuhsiang237/ASP.NET-Core-MVC-PaginatedList">https://github.com/yuhsiang237/ASP.NET-Core-MVC-PaginatedList</a></p>
<p><strong>åƒè€ƒè³‡æ–™</strong><br><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-tw/aspnet/core/data/ef-mvc/sort-filter-page?view=aspnetcore-3.1">https://docs.microsoft.com/zh-tw/aspnet/core/data/ef-mvc/sort-filter-page?view=aspnetcore-3.1</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/mzl87/article/details/102924701">https://blog.csdn.net/mzl87/article/details/102924701</a><br><a target="_blank" rel="noopener" href="https://jscinin.medium.com/asp-net-core-mvc-part-12-%E7%82%BA%E9%99%B3%E5%88%97%E7%9A%84%E8%B3%87%E6%96%99%E8%A3%BD%E4%BD%9C%E5%88%86%E9%A0%81%E6%95%88%E6%9E%9C-%E5%A5%97%E4%BB%B6x-pagedlist-core-mvc-a2191d86317d">https://jscinin.medium.com/asp-net-core-mvc-part-12-%E7%82%BA%E9%99%B3%E5%88%97%E7%9A%84%E8%B3%87%E6%96%99%E8%A3%BD%E4%BD%9C%E5%88%86%E9%A0%81%E6%95%88%E6%9E%9C-%E5%A5%97%E4%BB%B6x-pagedlist-core-mvc-a2191d86317d</a><br><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-tw/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application">https://docs.microsoft.com/zh-tw/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yuhsiang237.github.io/2021/10/14/C-MVC-%E6%8E%92%E5%BA%8F%E7%AF%A9%E9%81%B8%E5%92%8C%E5%88%86%E9%A0%81%E5%AF%A6%E4%BD%9C/" data-id="cme6kwo0t001sgaljenera8bo" data-title="[Day17] C# MVC æ’åºã€ç¯©é¸å’Œåˆ†é å¯¦ä½œ - C#&amp;AspNetCore" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/7/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="extend next" rel="next" href="/page/9/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Code/">Code</a><span class="category-list-count">76</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Code/C/">C#</a><span class="category-list-count">69</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Code/Javascript/">Javascript</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Code/Refactoring/">Refactoring</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Code/Typescript/">Typescript</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Computer-Science/">Computer Science</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Computer-Science/Algorithm/">Algorithm</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Computer-Science/Data-structure/">Data structure</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Computer-Science/Electronic-Circuit/">Electronic Circuit</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Daily-Log/">Daily Log</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Database/">Database</a><span class="category-list-count">57</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Database/PostgreSQL/">PostgreSQL</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Database/SQL-Server/">SQL Server</a><span class="category-list-count">47</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Framework/">Framework</a><span class="category-list-count">27</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Framework/AspNetCore-API/">AspNetCore API</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Framework/AspNetCore-MVC/">AspNetCore MVC</a><span class="category-list-count">21</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Topic/">Topic</a><span class="category-list-count">76</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Topic/2021-C-AspNetCore-Challenge/">2021 C# AspNetCore Challenge</a><span class="category-list-count">30</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Topic/2021-SQL-Server-Challenge/">2021 SQL Server Challenge</a><span class="category-list-count">30</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Topic/2022-C-SyncAndAsync/">2022 C# SyncAndAsync</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Topic/2025-Typescript/">2025 Typescript</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Topic/Big-Data/">Big Data</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Topic/LeetCode/">LeetCode</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Topic/SystemStructure/">SystemStructure</a><span class="category-list-count">1</span></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/08/">August 2025</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a><span class="archive-list-count">17</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a><span class="archive-list-count">24</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a><span class="archive-list-count">46</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a><span class="archive-list-count">12</span></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 Yu Hsiang<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>
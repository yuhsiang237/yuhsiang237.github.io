<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>UM&#39;s Coding Note</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="I record my coding experience at this place">
<meta property="og:type" content="website">
<meta property="og:title" content="UM&#39;s Coding Note">
<meta property="og:url" content="https://yuhsiang237.github.io/page/12/index.html">
<meta property="og:site_name" content="UM&#39;s Coding Note">
<meta property="og:description" content="I record my coding experience at this place">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Yu Hsiang">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="UM's Coding Note" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">UM&#39;s Coding Note</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">I record my coding experience at this place🤙</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://yuhsiang237.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-電商資料庫設計參考" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/09/19/%E9%9B%BB%E5%95%86%E8%B3%87%E6%96%99%E5%BA%AB%E8%A8%AD%E8%A8%88%E5%8F%83%E8%80%83/" class="article-date">
  <time class="dt-published" datetime="2021-09-18T18:53:39.000Z" itemprop="datePublished">2021-09-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Database/">Database</a>►<a class="article-category-link" href="/categories/Database/SQL-Server/">SQL Server</a>►<a class="article-category-link" href="/categories/Topic/">Topic</a>►<a class="article-category-link" href="/categories/Topic/2021-SQL-Server-Challenge/">2021 SQL Server Challenge</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/09/19/%E9%9B%BB%E5%95%86%E8%B3%87%E6%96%99%E5%BA%AB%E8%A8%AD%E8%A8%88%E5%8F%83%E8%80%83/">[Day30] 電商資料庫設計參考 - SQL Server資料庫入門</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>最後的兩回中研究別人怎麼設計資料庫。<br>這回主要探討電商，因為沒有現成的範例，所以只好去找一個大略可以講的範例。</p>
<h3 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h3><p>因為電商，所以最主要是販售物品為主，會有庫存、商品、結帳，讓顧客如何順利地購買產品、保留過往資料以供糾紛調查是最重要的。<br>以下是我找到的電商模擬資料表:</p>
<img src="/2021/09/19/%E9%9B%BB%E5%95%86%E8%B3%87%E6%96%99%E5%BA%AB%E8%A8%AD%E8%A8%88%E5%8F%83%E8%80%83/ecommerce-platform-data.png" class="">

<h3 id="從資料表上分析"><a href="#從資料表上分析" class="headerlink" title="從資料表上分析"></a>從資料表上分析</h3><p>先從user來說，首先要建立的就是顧客資料。<br>於是有了user、user_address、user_payment三張表。<br>而關係到能否正常運送、付款，所以把關鍵功能拿出來開表也是很正常的。<br>為了避免欄位過多，把不相干的項目拉出去就是資料庫正規化。<br>不斷比較各個欄位與該列表的主鍵關係，把表拆出，即2NF、3NF。</p>
<p>再來是product，產品。<br>因此有了product_category、product_inventory、discount三張表。<br>產品的分類、庫存、折扣，而其中庫存最重要，因為它關係到能否正常賣出東西。<br>雖然我不知道為什麼不直接把product_inventory的外來鍵設定成product的主鍵，這樣能更直覺的去Mapping。總之，多開這一張庫存表可以知道販售的情況、庫存異動情況。在價格變動上，想追蹤也是可以這麼做的。<br>而discount表，則是拉出來，獨立處理這商品套用的折扣，有個active，可以啟用、關閉。我覺得這張折扣表上可以加一個修正價錢，等於有一段時間打折能直接套用這折扣價，照原本設計是用百分比去折扣。<br>我覺得這商品是最難的規劃，會有多種不同價格，怎麼記錄他異動等等。</p>
<p>再來是購物車shopping_session、cart_item。<br>因為我們可能會換電腦操作，所以不能放在Cookie，會需要購物車幫我們紀錄要買哪些資料。<br>在這cart_item裡面就是不斷添加產品product，可能有N個產品，之後這N個產品都算在同一個shopping_session上。<br>這段我自己覺得只要cart_item就好，就是購物車裡放哪些東西，因為只是用來暫存用的。</p>
<p>結帳完成訂單order_details、order_items、payment_details。<br>在最後流程就是使用者要能夠結帳、產生訂單。<br>把cart_item的資料都拿出來，放到order_items，之後點下結帳時，用程式的”交易”的寫法，去檢查能正常扣除庫存，就建立這筆訂單。<br>此外，訂單建立就是付款了，只要照著付款流程付完款，在更新payment_details即可。<br>而order_details則是記錄這筆訂單總金額、備註等等。<br>如果被刪除了，是否要自動把庫存加回去就看個人需求，總之能做到。<br>如果怕有糾紛問題就是多存一份沒關聯的字串資料。把當時結帳的商品名稱、款項都寫明，已備不時之需使用。</p>
<p>此外，商品那些都做成軟刪除，因為未來可能會需要關聯，所以能看到有deleted_at欄位。<br>deleted_at、modified_at、created_at在資料庫的表建議都建立，以供人工好追蹤。<br>然後，發現好像大多數資料表設計如type類型都設定成varchar，應該在拉出去一層關聯會比較好，往後類型被改會比較容易更新，只取代一個跟取代N個的差別。</p>
<h3 id="從型別上分析"><a href="#從型別上分析" class="headerlink" title="從型別上分析"></a>從型別上分析</h3><p>時間它是用timestamp，但如果SQL server用datetime2會更好。<br>商品的價格上price用decimal，跟我前面幾回探討過的型別有關，就是選沒有誤差精確數值。<br>在id上是int，但其實也可以用bigint如wordpress就是用bigint。<br>文字用varchar。</p>
<h3 id="總結"><a href="#總結" class="headerlink" title="總結"></a>總結</h3><p>從這個資料庫來看，已能滿足大多的需求，我覺得關鍵在這系統主要想幹嘛，在把那部份特別補強設計架構，就八九不離時了。<br>主要的功能表能設計的穩固，後面要擴建就能容易些。<br>此外，我覺得還能再加上個折價券表，可以套用在最後的結帳上。</p>
<p><strong>參考資料</strong><br><a target="_blank" rel="noopener" href="https://resources.fabric.inc/blog/answers/ecommerce-database-design-example?fbclid=IwAR388b0qI1maAfEDWguD9y4pOEywv3TG2gJIEq4jDW2jNQsZWdYfdTSVr-I">https://resources.fabric.inc/blog/answers/ecommerce-database-design-example?fbclid=IwAR388b0qI1maAfEDWguD9y4pOEywv3TG2gJIEq4jDW2jNQsZWdYfdTSVr-I</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yuhsiang237.github.io/2021/09/19/%E9%9B%BB%E5%95%86%E8%B3%87%E6%96%99%E5%BA%AB%E8%A8%AD%E8%A8%88%E5%8F%83%E8%80%83/" data-id="cme6kwo7f00ougalj1gej7sro" data-title="[Day30] 電商資料庫設計參考 - SQL Server資料庫入門" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-如何讓自己的想法變正面" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/09/19/%E5%A6%82%E4%BD%95%E8%AE%93%E8%87%AA%E5%B7%B1%E7%9A%84%E6%83%B3%E6%B3%95%E8%AE%8A%E6%AD%A3%E9%9D%A2/" class="article-date">
  <time class="dt-published" datetime="2021-09-18T17:51:30.000Z" itemprop="datePublished">2021-09-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Daily-Log/">Daily Log</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/09/19/%E5%A6%82%E4%BD%95%E8%AE%93%E8%87%AA%E5%B7%B1%E7%9A%84%E6%83%B3%E6%B3%95%E8%AE%8A%E6%AD%A3%E9%9D%A2/">如何讓自己的想法變正面</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>先讓自己吃飽，身體的能量夠。</p>
<img src="/2021/09/19/%E5%A6%82%E4%BD%95%E8%AE%93%E8%87%AA%E5%B7%B1%E7%9A%84%E6%83%B3%E6%B3%95%E8%AE%8A%E6%AD%A3%E9%9D%A2/1.jpg" class="">
<p><strong><center>GJ! 幸運星-此方</center></strong><br>不要開網路，不要去看留言，不要去看新聞。<br>期待每天可能會發生的好事。<br>多走向戶外，讓自己轉換眼界。<br>做自己有興趣的事，讓自己滿足有成就感。<br>活著有無限的可能性，多嘗試。<br>每天做點能夠實際改變現況的事。<br>看書。<br>行動。<br>如此一來，時機一到，佛系的正面想法就來了。(棒)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yuhsiang237.github.io/2021/09/19/%E5%A6%82%E4%BD%95%E8%AE%93%E8%87%AA%E5%B7%B1%E7%9A%84%E6%83%B3%E6%B3%95%E8%AE%8A%E6%AD%A3%E9%9D%A2/" data-id="cme6kwo3w007ngalj3bkk4usn" data-title="如何讓自己的想法變正面" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-壓力的調解，一切都是該承受的嗎" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/09/19/%E5%A3%93%E5%8A%9B%E7%9A%84%E8%AA%BF%E8%A7%A3%EF%BC%8C%E4%B8%80%E5%88%87%E9%83%BD%E6%98%AF%E8%A9%B2%E6%89%BF%E5%8F%97%E7%9A%84%E5%97%8E/" class="article-date">
  <time class="dt-published" datetime="2021-09-18T16:58:12.000Z" itemprop="datePublished">2021-09-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Daily-Log/">Daily Log</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/09/19/%E5%A3%93%E5%8A%9B%E7%9A%84%E8%AA%BF%E8%A7%A3%EF%BC%8C%E4%B8%80%E5%88%87%E9%83%BD%E6%98%AF%E8%A9%B2%E6%89%BF%E5%8F%97%E7%9A%84%E5%97%8E/">壓力的調解，一切都是該承受的嗎?</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>我從遊戲裡面學到一件很重要的事，就是「選擇面對、迴避都是一條好路」。<br>在過去，我往往每件事都選擇直接面對，但發現這樣並不是好的，因為壓力會很大。</p>
<img src="/2021/09/19/%E5%A3%93%E5%8A%9B%E7%9A%84%E8%AA%BF%E8%A7%A3%EF%BC%8C%E4%B8%80%E5%88%87%E9%83%BD%E6%98%AF%E8%A9%B2%E6%89%BF%E5%8F%97%E7%9A%84%E5%97%8E/1.png" class="">
<p><strong><center>宮崎英高(老賊)的微笑</center></strong></p>
<h3 id="以遊戲來說"><a href="#以遊戲來說" class="headerlink" title="以遊戲來說"></a>以遊戲來說</h3><p>聊一下這遊戲叫做「血源詛咒」，作者是宮崎英高。<br>我們一進遊戲就會被一堆殭屍、亡靈給追殺，如果遇到單一隻那還能免強解決，如果一次遇上三隻以上，那就難逃一命。<br>而在這遊戲中，我們的目標就是打倒每個關卡點的王，所以遇到的那些小怪都是能免就免，除非自己想切磋、有必要，不然不要主動去引小怪。</p>
<h3 id="以人生來說"><a href="#以人生來說" class="headerlink" title="以人生來說"></a>以人生來說</h3><p>我從上面的遊戲經驗得到一個自己的見解。<br>把人生的小目標比喻成關卡點的王，而你就是只是在選擇一條相對好走的路。<br>遇到一個工作，如果發現不適合，還有別條路可走，那就自己決定要不要硬撐。有時及早退回上一步重新選擇也是方法。</p>
<h3 id="調解壓力的方法"><a href="#調解壓力的方法" class="headerlink" title="調解壓力的方法"></a>調解壓力的方法</h3><p>壓力這種無形的東西，容易放在腦子裡一直積著，很抽象，你想解它，卻無從而解的被約束。<br>我的方法很簡單，其實就是拿筆、紙，把面對的壓力寫下來(具象化它)，寫完後把它放到一個封印的盒子裡面，告訴自己我下次打開盒子前它都跟我無關。</p>
<p>雖然這看起來有點神奇，但對我而言是有效的。<br>而有些被封印的壓力，時間一過後也煙消雲散了，就只是一時的不愉快、解不了。</p>
<p>把那些壓力封印後，繼續專注在現實那些能發生改變”踏實”的事，走在一條新的路上。</p>
<p>最後，還是一樣，肯定有人也遇到相同問題，所以我在這提供自己的想法，協助遇到跟我一樣問題的人。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yuhsiang237.github.io/2021/09/19/%E5%A3%93%E5%8A%9B%E7%9A%84%E8%AA%BF%E8%A7%A3%EF%BC%8C%E4%B8%80%E5%88%87%E9%83%BD%E6%98%AF%E8%A9%B2%E6%89%BF%E5%8F%97%E7%9A%84%E5%97%8E/" data-id="cme6kwo3w007lgalj9mwo1jco" data-title="壓力的調解，一切都是該承受的嗎?" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-wordpress資料庫規劃參考" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/09/17/wordpress%E8%B3%87%E6%96%99%E5%BA%AB%E8%A6%8F%E5%8A%83%E5%8F%83%E8%80%83/" class="article-date">
  <time class="dt-published" datetime="2021-09-17T13:17:12.000Z" itemprop="datePublished">2021-09-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Database/">Database</a>►<a class="article-category-link" href="/categories/Database/SQL-Server/">SQL Server</a>►<a class="article-category-link" href="/categories/Topic/">Topic</a>►<a class="article-category-link" href="/categories/Topic/2021-SQL-Server-Challenge/">2021 SQL Server Challenge</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/09/17/wordpress%E8%B3%87%E6%96%99%E5%BA%AB%E8%A6%8F%E5%8A%83%E5%8F%83%E8%80%83/">[Day29] Blog資料庫設計參考 - SQL Server資料庫入門</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>剩下兩篇就30了，後面想看一下其他有規模的資料庫是怎麼設計的。<br>這回以wordpress為例子，然後注意wordpress是用mysql，所以在型別上會跟SQL server有些不一樣。</p>
<h3 id="資料型別上"><a href="#資料型別上" class="headerlink" title="資料型別上"></a>資料型別上</h3><p>表的主鍵ID是使用BIGINT，可以存(-9223372036854775808 ~ 9223372036854776807 )<br>時間則是用DATETIME，MYSQL的DATEIME可以存‘1000-01-01 00:00:00’ to ‘9999-12-31 23:59:59’.<br>如果是用SQL Server要用DATETIME2，可以存0001-01-01 ~ 9999-12-31<br>除了主鍵ID外的整數用INT<br>文字則是VARCHAR<br>在MYSQL上<br>TINYTEXT: 256 bytes<br>TEXT: 65,535 bytes =&gt; ~64kb<br>MEDIUMTEXT: 16,777,215 bytes =&gt; ~16MB<br>LONGTEXT: 4,294,967,295 bytes =&gt; ~4GB</p>
<h3 id="單一資料表上的設計"><a href="#單一資料表上的設計" class="headerlink" title="單一資料表上的設計"></a>單一資料表上的設計</h3><p>wp_comments:<br>1.透過comment_ID、comment_parent搭配可以設計出樹狀階層留言。<br>2.發現comment_type是varchar，不是再開一張表用ID關聯回去，就直接存文字。<br>3.發現有兩種時間comment_date_gmt、comment_date，可能是要處理跨時區問題。<br>4.發現很多需要另鍵表再做關聯的都直接用varchar，如comment_approved、comment_type。</p>
<p>wp_users:<br>1.ID是wp_post、wp_comments的外來鍵，可以知道操作者。<br>2.email只要varchar(100)。</p>
<p>wp_posts:<br>1.ID是wp_comments的comment_post_ID外來鍵。<br>2.對日期都多存一個gmt。<br>3.多存一個comment_count，可能是為了讓要取得留言數不用再做一次sum，讓效能好些。<br>4.很多需要另鍵表再做關聯的都直接用varchar，如post_status、comment_status、post_type。<br>5.使用了GUID(255)不知道是要做什麼，因為本身已有個ID可以識別了，且在其他表也沒看到它的存在。<br>6.有建立時間、修改時間。</p>
<p>wp_term_relationships:<br>1.object_id、term_taxonomy_id用來做多對多的表，文章、分類。一篇文章有很多個分類，一個分類有很多個文章。</p>
<p>wp_term_taxonomy:<br>1.ID、parent可以跟留言一樣做出樹狀結構的分類。</p>
<p>wp_options:<br>1.options_name、options_value，儲存像是字典型別的系統資料，每個資料名稱與數值都1對1。</p>
<p>wp_usermeta、wp_postmeta、wp_commentmata:<br>1.key、value，儲存字典，用於再網頁上印出metadata，SEO使用。</p>
<img src="/2021/09/17/wordpress%E8%B3%87%E6%96%99%E5%BA%AB%E8%A6%8F%E5%8A%83%E5%8F%83%E8%80%83/wordpress_db_schema.png" class="">

<h3 id="小結"><a href="#小結" class="headerlink" title="小結"></a>小結</h3><p>wordpress很明顯就是文章、留言導向，所以這兩張表設計得比較用心，有多去紀錄一些額外資訊如修改日期。<br>其他相對不重要的表，則設計的堪用就好，像是一些型別應該要在開個表做個ID在關聯回去，但他直接用varchar文字來做。<br>此外，考量到跨區問題，所以有多存一個gmt時間，但目前不知道他會怎麼用它。<br>且一些計算欄位的count都直接開出來，而不是用資料庫算(我是覺得不太好，但如果為了效能是可以加)。<br>而在多對多的表命名上則是命名relationships，這樣一眼就知道這是個來做關聯用的表。<br>對於系統定義值以字典方式儲存，就只要key、value，就能避免無限增加的欄了。</p>
<p>最後，多參考一些套裝軟體的資料庫規劃，會更直覺得設計出彈性的資料表，以上。</p>
<p><strong>參考資料</strong><br><a target="_blank" rel="noopener" href="https://blog.longwin.com.tw/2009/10/mysql-text-field-type-length-limit-2009/">https://blog.longwin.com.tw/2009/10/mysql-text-field-type-length-limit-2009/</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yuhsiang237.github.io/2021/09/17/wordpress%E8%B3%87%E6%96%99%E5%BA%AB%E8%A6%8F%E5%8A%83%E5%8F%83%E8%80%83/" data-id="cme6kwo3m0071galjcy8m79bd" data-title="[Day29] Blog資料庫設計參考 - SQL Server資料庫入門" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-學會操作資料庫的好處" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/09/17/%E5%AD%B8%E6%9C%83%E6%93%8D%E4%BD%9C%E8%B3%87%E6%96%99%E5%BA%AB%E7%9A%84%E5%A5%BD%E8%99%95/" class="article-date">
  <time class="dt-published" datetime="2021-09-17T10:09:41.000Z" itemprop="datePublished">2021-09-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Database/">Database</a>►<a class="article-category-link" href="/categories/Database/SQL-Server/">SQL Server</a>►<a class="article-category-link" href="/categories/Topic/">Topic</a>►<a class="article-category-link" href="/categories/Topic/2021-SQL-Server-Challenge/">2021 SQL Server Challenge</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/09/17/%E5%AD%B8%E6%9C%83%E6%93%8D%E4%BD%9C%E8%B3%87%E6%96%99%E5%BA%AB%E7%9A%84%E5%A5%BD%E8%99%95/">[Day28] 聊聊學會操作資料庫的好處 - SQL Server資料庫入門</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>為什麼要學資料庫呢?為了工作?為了自己興趣?為了學歷?</p>
<img src="/2021/09/17/%E5%AD%B8%E6%9C%83%E6%93%8D%E4%BD%9C%E8%B3%87%E6%96%99%E5%BA%AB%E7%9A%84%E5%A5%BD%E8%99%95/header.jpg" class="">

<p>我學操作資料庫的原因比較跟興趣有關。<br>為了能夠更知道像是undertale(地下傳說)、魔物獵人:世界(MHW)、血源詛咒Bloodborne那樣的遊戲背後的儲存體該如何設計。<br>如果我不會資料庫，把他們全存在Excel，一個數值一個欄位，可能要存到天荒地老。</p>
<p>寫個電玩遊戲出來會用到，如果有從事後端工作也會用到，學一下其實算一石二鳥。<br>雖然說以這淺談並不會講到很深，但卻能幫助我先整理好這片地圖，需要時在快速回來參考即可。</p>
<p>雖然市面上大多數都用來設計應用類程式，因為身在台灣就這比較好賺。<br>但老實說要帶給人成就感還是遊戲更好一些。至少它不是冰冷的(?)</p>
<p>再來學習設計資料庫有助於鍛鍊我抽象思考的能力，把屬性分類歸位。<br>能夠從看到畫面轉化成數值再變成表格，即一種逆向工程的能力。</p>
<p>總之，資料庫對我而言大概就是這樣了，協助我提升未來再儲存資料上的架構、存取方式。<br>然後，我並不是追求完美的那種大神，我只要符合需求、好維護就好，雖然有各種奇淫技巧能夠不斷改善他的效能，但對我來說它就是個分類好的文件夾…，我的目標是放在程式本身外的目標跟整體上。就是把他們組再一起成為一個獨一無二的創作，讓後帶給自己感動就這樣。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yuhsiang237.github.io/2021/09/17/%E5%AD%B8%E6%9C%83%E6%93%8D%E4%BD%9C%E8%B3%87%E6%96%99%E5%BA%AB%E7%9A%84%E5%A5%BD%E8%99%95/" data-id="cme6kwo3y007sgaljah425zlp" data-title="[Day28] 聊聊學會操作資料庫的好處 - SQL Server資料庫入門" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-sql-server-數學函式" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/09/17/sql-server-%E6%95%B8%E5%AD%B8%E5%87%BD%E5%BC%8F/" class="article-date">
  <time class="dt-published" datetime="2021-09-17T09:37:44.000Z" itemprop="datePublished">2021-09-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Database/">Database</a>►<a class="article-category-link" href="/categories/Database/SQL-Server/">SQL Server</a>►<a class="article-category-link" href="/categories/Topic/">Topic</a>►<a class="article-category-link" href="/categories/Topic/2021-SQL-Server-Challenge/">2021 SQL Server Challenge</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/09/17/sql-server-%E6%95%B8%E5%AD%B8%E5%87%BD%E5%BC%8F/">[Day27] SQL server 數學函式 - SQL Server資料庫入門</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>這回稍微帶一下可能會用到的數學函式。</p>
<h3 id="ROUND-四捨五入"><a href="#ROUND-四捨五入" class="headerlink" title="ROUND 四捨五入"></a>ROUND 四捨五入</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT ROUND(235.41500, 2) AS RoundValue;</span><br></pre></td></tr></table></figure>
<p>結果:235.42000</p>
<h3 id="SQUARE-平方"><a href="#SQUARE-平方" class="headerlink" title="SQUARE 平方"></a>SQUARE 平方</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select SQUARE(6);</span><br></pre></td></tr></table></figure>
<p>結果:36</p>
<h3 id="SQRT-開根號"><a href="#SQRT-開根號" class="headerlink" title="SQRT 開根號"></a>SQRT 開根號</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select SQRT(36);</span><br></pre></td></tr></table></figure>
<p>結果:6</p>
<h3 id="FLOOR-地板"><a href="#FLOOR-地板" class="headerlink" title="FLOOR 地板"></a>FLOOR 地板</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT FLOOR(25.75) AS FloorValue; </span><br></pre></td></tr></table></figure>
<p>結果:25</p>
<h3 id="CEILING-天花板"><a href="#CEILING-天花板" class="headerlink" title="CEILING 天花板"></a>CEILING 天花板</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT CEILING(25.1) AS CeilValue; </span><br></pre></td></tr></table></figure>
<p>結果:26</p>
<h3 id="Abs-絕對值"><a href="#Abs-絕對值" class="headerlink" title="Abs 絕對值"></a>Abs 絕對值</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT Abs(-243.5) AS AbsNum; </span><br></pre></td></tr></table></figure>
<p>結果:243.5</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yuhsiang237.github.io/2021/09/17/sql-server-%E6%95%B8%E5%AD%B8%E5%87%BD%E5%BC%8F/" data-id="cme6kwo3b006egalj63ku53vv" data-title="[Day27] SQL server 數學函式 - SQL Server資料庫入門" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-sql-server-分頁處理" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/09/17/sql-server-%E5%88%86%E9%A0%81%E8%99%95%E7%90%86/" class="article-date">
  <time class="dt-published" datetime="2021-09-17T09:09:56.000Z" itemprop="datePublished">2021-09-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Database/">Database</a>►<a class="article-category-link" href="/categories/Database/SQL-Server/">SQL Server</a>►<a class="article-category-link" href="/categories/Topic/">Topic</a>►<a class="article-category-link" href="/categories/Topic/2021-SQL-Server-Challenge/">2021 SQL Server Challenge</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/09/17/sql-server-%E5%88%86%E9%A0%81%E8%99%95%E7%90%86/">[Day26] SQL server 分頁處理 - SQL Server資料庫入門</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>通常在寫表單時，我們不會一次索取所有資料，因為資料若有百萬筆，那效能可能會不好、浪費流量。<br>所以，這時候就需要分頁了。<br>但是SQL server沒有Mysql的limit功能，所以要自己組出來QQ。</p>
<p>稍微查了一下Google，發現已有不少現成做法，就當作紀錄記下來。</p>
<p>他的做法其實就是用子查詢。<br>就是內層先做一個有row欄位，這row欄位透過 ROW_NUMBER() OVER 去產生順序編號<br>製作好內部的子查詢後，再由外部把這子查詢視為一張temp_table<br>之後就可以用where去判斷想取哪段的row了。</p>
<p>但是我比較好奇的是，如果是很多left join、inner join好像用這方法會變得很亂。(?)</p>
<p>要:1~5筆資料。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM ( </span><br><span class="line"> SELECT *, ROW_NUMBER() OVER (ORDER BY id desc)  row </span><br><span class="line"> FROM test</span><br><span class="line"> ) as temp_table</span><br><span class="line">WHERE row &gt;= 1 and row &lt;= 5</span><br></pre></td></tr></table></figure>
<p>結果:</p>
<img src="/2021/09/17/sql-server-%E5%88%86%E9%A0%81%E8%99%95%E7%90%86/1.png" class="">

<p>要:6~10筆資料。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM ( </span><br><span class="line"> SELECT *, ROW_NUMBER() OVER (ORDER BY id desc)  row </span><br><span class="line"> FROM test</span><br><span class="line"> ) as temp_table</span><br><span class="line">WHERE row &gt;= 6 and row &lt;= 10</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>結果:</p>
<img src="/2021/09/17/sql-server-%E5%88%86%E9%A0%81%E8%99%95%E7%90%86/2.png" class="">



<p><strong>參考資料</strong><br><a target="_blank" rel="noopener" href="http://bioankeyang.blogspot.com/2013/03/ms-sql-servermysql-limit.html">http://bioankeyang.blogspot.com/2013/03/ms-sql-servermysql-limit.html</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yuhsiang237.github.io/2021/09/17/sql-server-%E5%88%86%E9%A0%81%E8%99%95%E7%90%86/" data-id="cme6kwo370066galj7blr7h9a" data-title="[Day26] SQL server 分頁處理 - SQL Server資料庫入門" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-sql-server-日期函數" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/09/17/sql-server-%E6%97%A5%E6%9C%9F%E5%87%BD%E6%95%B8/" class="article-date">
  <time class="dt-published" datetime="2021-09-17T08:28:08.000Z" itemprop="datePublished">2021-09-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Database/">Database</a>►<a class="article-category-link" href="/categories/Database/SQL-Server/">SQL Server</a>►<a class="article-category-link" href="/categories/Topic/">Topic</a>►<a class="article-category-link" href="/categories/Topic/2021-SQL-Server-Challenge/">2021 SQL Server Challenge</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/09/17/sql-server-%E6%97%A5%E6%9C%9F%E5%87%BD%E6%95%B8/">[Day25] SQL server 日期函數 - SQL Server資料庫入門</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>這回介紹日期函數的使用。<br>在大多的資料庫都會有一些可以用的函式，讓我們做一些特殊操作。<br>在這回以SQL server資料庫為例子。</p>
<h3 id="SQL-server日期函式"><a href="#SQL-server日期函式" class="headerlink" title="SQL server日期函式"></a>SQL server日期函式</h3><p>GETDATE() 取得現在的日期時間<br>DATEADD() 增加或減少指定的時間間隔<br>DATEPART() 取出日期時間中特定的部分<br>CONVERT() 格式化日期時間顯示<br>DATEDIFF() 日期相減</p>
<h3 id="可用的關鍵字"><a href="#可用的關鍵字" class="headerlink" title="可用的關鍵字"></a>可用的關鍵字</h3><p>可用的關鍵字參數:</p>
<table><thead><tr><th>datepart (全名和縮寫)</th><th>說明</th></tr></thead><tbody><tr><td>year, yyyy, yy</td><td>年</td></tr><tr><td>month, mm, m</td><td>月</td></tr><tr><td>day, dd, d</td><td>日</td></tr><tr><td>hour, hh</td><td>時</td></tr><tr><td>minute, n</td><td>分</td></tr><tr><td>second, ss, s</td><td>秒</td></tr><tr><td>millisecond, ms</td><td>毫秒</td></tr><tr><td>microsecond, mcs</td><td>微秒</td></tr><tr><td>nanosecond, ns</td><td>毫微秒</td></tr><tr><td>quarter, qq, q</td><td>季</td></tr><tr><td>dayofyear, dy, y</td><td>一年中的第幾天</td></tr><tr><td>week, wk, ww</td><td>週</td></tr><tr><td>weekday, dw</td><td>星期幾</td></tr></tbody></table>


<h3 id="GETDATE"><a href="#GETDATE" class="headerlink" title="GETDATE"></a>GETDATE</h3><p>取得現在的日期時間</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Select </span><br><span class="line">GETDATE() as 現在的日期時間</span><br></pre></td></tr></table></figure>
<p>結果</p>
<img src="/2021/09/17/sql-server-%E6%97%A5%E6%9C%9F%E5%87%BD%E6%95%B8/1.png" class="">

<h3 id="DATEADD"><a href="#DATEADD" class="headerlink" title="DATEADD"></a>DATEADD</h3><p>增加或減少指定的時間間隔<br>可以輸入負值，代表回推<br>正值則是往後推</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Select </span><br><span class="line">DATEADD(day, 2, GETDATE()) as 兩天後</span><br></pre></td></tr></table></figure>
<p>結果</p>
<img src="/2021/09/17/sql-server-%E6%97%A5%E6%9C%9F%E5%87%BD%E6%95%B8/2.png" class="">


<h3 id="DATEPART"><a href="#DATEPART" class="headerlink" title="DATEPART"></a>DATEPART</h3><p>取出日期時間中特定的部分</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT DATEPART(yyyy, GETDATE())  as 年,</span><br><span class="line">DATEPART(mm, GETDATE())  as 月,</span><br><span class="line">DATEPART(dd, GETDATE())  as 日</span><br></pre></td></tr></table></figure>
<p>結果</p>
<img src="/2021/09/17/sql-server-%E6%97%A5%E6%9C%9F%E5%87%BD%E6%95%B8/3.png" class="">


<h3 id="CONVERT"><a href="#CONVERT" class="headerlink" title="CONVERT"></a>CONVERT</h3><p>格式化日期時間顯示，可以用格式化代碼快速轉成指定規範格式。</p>
<p>格式代碼:</p>
<table>
<tbody><tr>
<th>Style ID</th>
<th>Style 格式</th>
</tr>

<tr>
<td>100 或者 0</td>
<td>mon dd yyyy hh:miAM （或者 PM）</td>
</tr>

<tr>
<td>101</td>
<td>mm/dd/yy</td>
</tr>

<tr>
<td>102</td>
<td>yy.mm.dd</td>
</tr>

<tr>
<td>103</td>
<td>dd/mm/yy</td>
</tr>

<tr>
<td>104</td>
<td>dd.mm.yy</td>
</tr>

<tr>
<td>105</td>
<td>dd-mm-yy</td>
</tr>

<tr>
<td>106</td>
<td>dd mon yy</td>
</tr>

<tr>
<td>107</td>
<td>Mon dd, yy</td>
</tr>

<tr>
<td>108</td>
<td>hh:mm:ss</td>
</tr>

<tr>
<td>109 或者 9</td>
<td>mon dd yyyy hh:mi:ss:mmmAM（或者 PM）</td>
</tr>

<tr>
<td>110</td>
<td>mm-dd-yy</td>
</tr>

<tr>
<td>111</td>
<td>yy/mm/dd</td>
</tr>

<tr>
<td>112</td>
<td>yymmdd</td></tr>

<tr>
<td>113 或者 13</td>
<td>dd mon yyyy hh:mm:ss:mmm(24h)</td>
</tr>

<tr>
<td>114</td>
<td>hh:mi:ss:mmm(24h)</td>
</tr>

<tr>
<td>120 或者 20</td>
<td>yyyy-mm-dd hh:mi:ss(24h)</td>
</tr>

<tr>
<td>121 或者 21</td>
<td>yyyy-mm-dd hh:mi:ss.mmm(24h)</td>
</tr>

<tr>
<td>126</td>
<td>yyyy-mm-ddThh:mm:ss.mmm（没有空格）</td>
</tr>

<tr>
<td>130</td>
<td>dd mon yyyy hh:mi:ss:mmmAM</td>
</tr>

<tr>
<td>131</td>
<td>dd/mm/yy hh:mi:ss:mmmAM</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT CONVERT(varchar, GETDATE(), 100) AS Converted</span><br></pre></td></tr></table></figure>
結果
<img src="/2021/09/17/sql-server-%E6%97%A5%E6%9C%9F%E5%87%BD%E6%95%B8/4.png" class="">

<h3 id="DATEDIFF"><a href="#DATEDIFF" class="headerlink" title="DATEDIFF"></a>DATEDIFF</h3><p>日期相減</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT DATEDIFF(day, &#x27;2008-06-10&#x27;, &#x27;2008-08-10&#x27;) AS 日期相差</span><br></pre></td></tr></table></figure>
<p>結果</p>
<img src="/2021/09/17/sql-server-%E6%97%A5%E6%9C%9F%E5%87%BD%E6%95%B8/5.png" class="">


<h3 id="結論"><a href="#結論" class="headerlink" title="結論"></a>結論</h3><p>在SQL語法上比較常用的是DATEDIFF、DATEADD、CONVERT。GETDATE。<br>如:前1個月、今天-7天、上禮拜資料這種需求還蠻常見的。</p>
<p><strong>參考資料</strong><br><a target="_blank" rel="noopener" href="https://www.fooish.com/sql/sql-server-getdate-function.html">https://www.fooish.com/sql/sql-server-getdate-function.html</a><br><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/sql/func_convert.asp">https://www.w3school.com.cn/sql/func_convert.asp</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yuhsiang237.github.io/2021/09/17/sql-server-%E6%97%A5%E6%9C%9F%E5%87%BD%E6%95%B8/" data-id="cme6kwo3e006igalj09tkbpm8" data-title="[Day25] SQL server 日期函數 - SQL Server資料庫入門" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-sql-server-資料庫管理帳號新增" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/09/17/sql-server-%E8%B3%87%E6%96%99%E5%BA%AB%E7%AE%A1%E7%90%86%E5%B8%B3%E8%99%9F%E6%96%B0%E5%A2%9E/" class="article-date">
  <time class="dt-published" datetime="2021-09-17T04:40:37.000Z" itemprop="datePublished">2021-09-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Database/">Database</a>►<a class="article-category-link" href="/categories/Database/SQL-Server/">SQL Server</a>►<a class="article-category-link" href="/categories/Topic/">Topic</a>►<a class="article-category-link" href="/categories/Topic/2021-SQL-Server-Challenge/">2021 SQL Server Challenge</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/09/17/sql-server-%E8%B3%87%E6%96%99%E5%BA%AB%E7%AE%A1%E7%90%86%E5%B8%B3%E8%99%9F%E6%96%B0%E5%A2%9E/">[Day24] SQL server 資料庫管理帳號新增 - SQL Server資料庫入門</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>當我們一開始安裝SQL server時，系統會幫我們預設一組帳號，即最高管理員帳號。<br>但當我們實際開發時，勢必不會使用這組帳號，因為太過危險了。<br>他能夠刪除資料庫、表，哪天被入侵、盜用時整個資料庫都會有危險。<br>所以，在此要介紹一下新增自訂權限的管理員。</p>
<h3 id="新增自訂的資料庫管理員"><a href="#新增自訂的資料庫管理員" class="headerlink" title="新增自訂的資料庫管理員"></a>新增自訂的資料庫管理員</h3><p>1.新增登入</p>
<img src="/2021/09/17/sql-server-%E8%B3%87%E6%96%99%E5%BA%AB%E7%AE%A1%E7%90%86%E5%B8%B3%E8%99%9F%E6%96%B0%E5%A2%9E/1.png" class="">
<p>2.填入帳、密資料</p>
<img src="/2021/09/17/sql-server-%E8%B3%87%E6%96%99%E5%BA%AB%E7%AE%A1%E7%90%86%E5%B8%B3%E8%99%9F%E6%96%B0%E5%A2%9E/1-1.png" class="">
<p>3.可以在左方看到剛新增的管理員</p>
<img src="/2021/09/17/sql-server-%E8%B3%87%E6%96%99%E5%BA%AB%E7%AE%A1%E7%90%86%E5%B8%B3%E8%99%9F%E6%96%B0%E5%A2%9E/2.png" class="">
<p>4.屬性</p>
<img src="/2021/09/17/sql-server-%E8%B3%87%E6%96%99%E5%BA%AB%E7%AE%A1%E7%90%86%E5%B8%B3%E8%99%9F%E6%96%B0%E5%A2%9E/3.png" class="">
<p>5.使用混和模式登入</p>
<img src="/2021/09/17/sql-server-%E8%B3%87%E6%96%99%E5%BA%AB%E7%AE%A1%E7%90%86%E5%B8%B3%E8%99%9F%E6%96%B0%E5%A2%9E/4.png" class="">
<p>6.開啟SQL Server 2019 Configuration Manager，重啟SQL server。<br>注意，重新開機是沒效的，一定要用這種方法重新運作SQL server</p>
<img src="/2021/09/17/sql-server-%E8%B3%87%E6%96%99%E5%BA%AB%E7%AE%A1%E7%90%86%E5%B8%B3%E8%99%9F%E6%96%B0%E5%A2%9E/5.png" class="">
<p>7.登入帳號</p>
<img src="/2021/09/17/sql-server-%E8%B3%87%E6%96%99%E5%BA%AB%E7%AE%A1%E7%90%86%E5%B8%B3%E8%99%9F%E6%96%B0%E5%A2%9E/6.png" class="">
<p>8.成功登入</p>
<img src="/2021/09/17/sql-server-%E8%B3%87%E6%96%99%E5%BA%AB%E7%AE%A1%E7%90%86%E5%B8%B3%E8%99%9F%E6%96%B0%E5%A2%9E/7.png" class="">
<p>9.登入後選擇原本資料庫會發現沒有權限</p>
<img src="/2021/09/17/sql-server-%E8%B3%87%E6%96%99%E5%BA%AB%E7%AE%A1%E7%90%86%E5%B8%B3%E8%99%9F%E6%96%B0%E5%A2%9E/9.png" class="">
<p>10.回去編輯test01帳號，把Orders的db_owner勾起來即可。</p>
<img src="/2021/09/17/sql-server-%E8%B3%87%E6%96%99%E5%BA%AB%E7%AE%A1%E7%90%86%E5%B8%B3%E8%99%9F%E6%96%B0%E5%A2%9E/10.png" class="">

<h3 id="結論"><a href="#結論" class="headerlink" title="結論"></a>結論</h3><p>這樣一來就能限制某些帳號管理特定資料庫了。</p>
<h3 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h3><p><a target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/articles/10214386">https://ithelp.ithome.com.tw/articles/10214386</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yuhsiang237.github.io/2021/09/17/sql-server-%E8%B3%87%E6%96%99%E5%BA%AB%E7%AE%A1%E7%90%86%E5%B8%B3%E8%99%9F%E6%96%B0%E5%A2%9E/" data-id="cme6kwo3g006ngaljbvwi15k8" data-title="[Day24] SQL server 資料庫管理帳號新增 - SQL Server資料庫入門" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-sql-server-資料庫備份使用sql" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/09/17/sql-server-%E8%B3%87%E6%96%99%E5%BA%AB%E5%82%99%E4%BB%BD%E4%BD%BF%E7%94%A8sql/" class="article-date">
  <time class="dt-published" datetime="2021-09-17T02:36:37.000Z" itemprop="datePublished">2021-09-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Database/">Database</a>►<a class="article-category-link" href="/categories/Database/SQL-Server/">SQL Server</a>►<a class="article-category-link" href="/categories/Topic/">Topic</a>►<a class="article-category-link" href="/categories/Topic/2021-SQL-Server-Challenge/">2021 SQL Server Challenge</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/09/17/sql-server-%E8%B3%87%E6%96%99%E5%BA%AB%E5%82%99%E4%BB%BD%E4%BD%BF%E7%94%A8sql/">[Day23] SQL server 資料庫備份與還原，使用sql - SQL Server資料庫入門</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>因為SQL server會有匯入舊版問題，像是把2019版的匯入到2008版的，所以要在探討另一個做法，即向下兼容的備份與還原。</p>
<h3 id="備份"><a href="#備份" class="headerlink" title="備份"></a>備份</h3><p>1.選擇generate scripts</p>
<img src="/2021/09/17/sql-server-%E8%B3%87%E6%96%99%E5%BA%AB%E5%82%99%E4%BB%BD%E4%BD%BF%E7%94%A8sql/1.png" class="">
<p>2.會跳出框框，選擇進階、儲存成script</p>
<img src="/2021/09/17/sql-server-%E8%B3%87%E6%96%99%E5%BA%AB%E5%82%99%E4%BB%BD%E4%BD%BF%E7%94%A8sql/2.png" class="">
<p>3.可選擇想降級的SQL server版本</p>
<img src="/2021/09/17/sql-server-%E8%B3%87%E6%96%99%E5%BA%AB%E5%82%99%E4%BB%BD%E4%BD%BF%E7%94%A8sql/3.png" class="">
<p>4.可選擇只要匯出schema還是data</p>
<img src="/2021/09/17/sql-server-%E8%B3%87%E6%96%99%E5%BA%AB%E5%82%99%E4%BB%BD%E4%BD%BF%E7%94%A8sql/4.png" class="">
<p>5.點Next下一步</p>
<img src="/2021/09/17/sql-server-%E8%B3%87%E6%96%99%E5%BA%AB%E5%82%99%E4%BB%BD%E4%BD%BF%E7%94%A8sql/5.png" class="">
<p>6.也是點Next下一步</p>
<img src="/2021/09/17/sql-server-%E8%B3%87%E6%96%99%E5%BA%AB%E5%82%99%E4%BB%BD%E4%BD%BF%E7%94%A8sql/6.png" class="">
<p>7.等待生成完畢，點OK</p>
<img src="/2021/09/17/sql-server-%E8%B3%87%E6%96%99%E5%BA%AB%E5%82%99%E4%BB%BD%E4%BD%BF%E7%94%A8sql/7.png" class="">
<p>8.到資料夾就可以找到.sql檔案了</p>
<img src="/2021/09/17/sql-server-%E8%B3%87%E6%96%99%E5%BA%AB%E5%82%99%E4%BB%BD%E4%BD%BF%E7%94%A8sql/8.png" class="">
<h3 id="還原"><a href="#還原" class="headerlink" title="還原"></a>還原</h3><p>1.雙擊剛剛匯出的.sql</p>
<img src="/2021/09/17/sql-server-%E8%B3%87%E6%96%99%E5%BA%AB%E5%82%99%E4%BB%BD%E4%BD%BF%E7%94%A8sql/8.png" class="">
<p>2.執行他Execute</p>
<img src="/2021/09/17/sql-server-%E8%B3%87%E6%96%99%E5%BA%AB%E5%82%99%E4%BB%BD%E4%BD%BF%E7%94%A8sql/9.png" class="">
<p>3.這時會一直跑都跑不完，中止後發現錯誤，因為用.sql匯入要把原本資料庫給砍了。<br>不能有相同名稱的資料庫</p>
<img src="/2021/09/17/sql-server-%E8%B3%87%E6%96%99%E5%BA%AB%E5%82%99%E4%BB%BD%E4%BD%BF%E7%94%A8sql/10.png" class="">
<p>4.把現有資料庫給刪除</p>
<img src="/2021/09/17/sql-server-%E8%B3%87%E6%96%99%E5%BA%AB%E5%82%99%E4%BB%BD%E4%BD%BF%E7%94%A8sql/11.png" class="">
<p>5.勾選關閉資料庫連線後點擊OK</p>
<img src="/2021/09/17/sql-server-%E8%B3%87%E6%96%99%E5%BA%AB%E5%82%99%E4%BB%BD%E4%BD%BF%E7%94%A8sql/12.png" class="">
<p>6.此時，重新再跑一次，可以發現成功執行<br>刷新左方的資料庫，可以發現成功還原了。</p>
<img src="/2021/09/17/sql-server-%E8%B3%87%E6%96%99%E5%BA%AB%E5%82%99%E4%BB%BD%E4%BD%BF%E7%94%A8sql/14.png" class="">

<h3 id="使用-sql的優缺點"><a href="#使用-sql的優缺點" class="headerlink" title="使用.sql的優缺點"></a>使用.sql的優缺點</h3><p>優點:<br>1.可以選擇產出舊版 SQL Server 的 script<br>2.可以自行調整 script<br>可能會有問題的部分:<br>1.特殊字元或是 binary 無法匯入<br>參考:<a target="_blank" rel="noopener" href="https://social.technet.microsoft.com/Forums/zh-TW/1fc3c435-5b24-45bf-8cb9-1427e3392de2/293052753023383208032338420837sqlserver2001335722251043439930340?forum=sqlservermanagementzhcht">https://social.technet.microsoft.com/Forums/zh-TW/1fc3c435-5b24-45bf-8cb9-1427e3392de2/293052753023383208032338420837sqlserver2001335722251043439930340?forum=sqlservermanagementzhcht</a><br>(但我發現新版2019的都已經有自動幫你補上N了所以好像不太會有問題。)<br>補上:<br>在國際性資料庫中管理字元資料，最容易的方式是使用 Unicode nchar、nvarchar 和 nvarchar(max) 資料類型，而不是相對的非 Unicode char、varchar 和 text。</p>
<p>2.如果想要建立相同的資料庫需要調整的內容較多。<br>(所以我上面做法是直接砍了。)</p>
<h3 id="總結"><a href="#總結" class="headerlink" title="總結"></a>總結</h3><p>如果.bak不行才出此下策，通常是對方機器太舊才可能用這種方式。</p>
<p><strong>參考資料</strong><br><a target="_blank" rel="noopener" href="https://blog.yowko.com/sql-server-backup-restore/">https://blog.yowko.com/sql-server-backup-restore/</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yuhsiang237.github.io/2021/09/17/sql-server-%E8%B3%87%E6%96%99%E5%BA%AB%E5%82%99%E4%BB%BD%E4%BD%BF%E7%94%A8sql/" data-id="cme6kwo3f006kgalj6olranoh" data-title="[Day23] SQL server 資料庫備份與還原，使用sql - SQL Server資料庫入門" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/11/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="page-number" href="/page/11/">11</a><span class="page-number current">12</span><a class="page-number" href="/page/13/">13</a><a class="page-number" href="/page/14/">14</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="extend next" rel="next" href="/page/13/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Code/">Code</a><span class="category-list-count">82</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Code/C/">C#</a><span class="category-list-count">69</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Code/Javascript/">Javascript</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Code/Refactoring/">Refactoring</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Code/Typescript/">Typescript</a><span class="category-list-count">7</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Computer-Science/">Computer Science</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Computer-Science/Algorithm/">Algorithm</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Computer-Science/Data-structure/">Data structure</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Computer-Science/Electronic-Circuit/">Electronic Circuit</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Daily-Log/">Daily Log</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Database/">Database</a><span class="category-list-count">57</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Database/PostgreSQL/">PostgreSQL</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Database/SQL-Server/">SQL Server</a><span class="category-list-count">47</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Framework/">Framework</a><span class="category-list-count">27</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Framework/AspNetCore-API/">AspNetCore API</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Framework/AspNetCore-MVC/">AspNetCore MVC</a><span class="category-list-count">21</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Topic/">Topic</a><span class="category-list-count">82</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Topic/2021-C-AspNetCore-Challenge/">2021 C# AspNetCore Challenge</a><span class="category-list-count">30</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Topic/2021-SQL-Server-Challenge/">2021 SQL Server Challenge</a><span class="category-list-count">30</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Topic/2022-C-SyncAndAsync/">2022 C# SyncAndAsync</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Topic/2025-Typescript/">2025 Typescript</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Topic/Big-Data/">Big Data</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Topic/LeetCode/">LeetCode</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Topic/SystemStructure/">SystemStructure</a><span class="category-list-count">1</span></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/08/">August 2025</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a><span class="archive-list-count">17</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a><span class="archive-list-count">24</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a><span class="archive-list-count">46</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a><span class="archive-list-count">12</span></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 Yu Hsiang<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>
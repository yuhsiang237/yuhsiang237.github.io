---
title:  '[Day5] 資料庫正規化 - SQL Server資料庫入門'
date: 2021-09-05 12:28:08
categories:
  - [SQL]
---
### 前言
這回主要淺談一下資料庫正規化。

### 資料庫正規化
正規化的目的:
1. 避免資料重複或相互矛盾的情形。
2. 使資料庫在使用時能更有效率、更容易維護。

正規化:
1. 資料庫的正規化共可分為1NF (Normal Form)、2NF、3NF、BCNF (Boyce-Codd Normal Form)、4NF、5NF 等多個階段, 不過對於一般資料庫設計來說, **通常只需要執行到BCNF即可**, 而其他更高階的正規化只有在特殊的情況下才用得到。

2. 在資料表正規化的過程(1NF 到BCNF) 中, 每個階段都是以**欄位的相依性**, 做為分割資料表的依據之一。

什麼是相依性?
欄位相依:就是在資料表中，乙欄位的值必須搭配甲欄位才有意義，則我們說『乙欄位相依於甲欄位』。

### 第一正規化規則(1NF):
1.決定主鍵:資料表中有主鍵, 而其他所有的欄位都相依於主鍵。
2.一個欄位只能有單一值:每個欄位中都只有儲存單一值,例如: 姓名欄位中不能存放2 個人的姓名。
3.消除意義上重複的欄位:資料表中沒有意義相同的多個欄位, 例如: 姓名1、姓名2...等重複的欄位。

### 第二正規化規則(2NF):
1.符合1NF 的格式
2.去除『部分相依性』:各欄位與主鍵間沒有部分相依的關係。

**部分相依:** 只有在主鍵是由多個欄位組成時才會發生，部分相依的欄位只與主鍵中的部分欄位有相依性，而與另一部份的欄位沒有相依性。

要除去資料表中的部分相依性, 只需將部份相依的欄位分割成另外的資料表即可。

### 第三正規化規則(3NF):
1.符合2NF 的格式。
2.去除『間接相依性』:各欄位與主鍵間沒有間接相依的關係。

**間接(遞移)相依:** 是指二個欄位並非直接相依，而是藉助其他欄位來達成資料相依的關係。例如A與B相依且B與C相依，則我們說A與C為間接相依。

### Boyce-Codd 正規化(BCNF) 
對於大部分資料庫來說, 通常只需要執行到第三階段的正規化即足夠了。如果資料表的主鍵是由多個欄位組成的, 則必須再執行Boyce-Codd 正規化

1.符合2NF 的格式。
2.各欄位與主鍵沒有間接相依的關係。
3.主鍵中的各欄位不可以相依於其他非主鍵的欄位。


### 其他
正規化的另類思考:
1.不必要的分割:正規化的工作有時候不必做的太徹底, 因為過多的資料表可能會降低系統執行的效能。
2.人工的分割:有時為了增加資料處理的效率, 我們可以將已經符合BCNF 的資料表再做分割。一個資料表擁有很多欄位, 而其中又有
很多欄位根本很少用到。那麼, 我們就可以將這些很少用到的欄位分離出來, 存放到另外一個資料表中。

**參考資料**
http://140.118.9.79/UML-SASD/%E6%AD%A3%E8%A6%8F%E5%8C%96.pdf
http://9715109.blogspot.com/2010/10/12.html
https://ithelp.ithome.com.tw/articles/10229472